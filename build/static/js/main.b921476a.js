/*! For license information please see main.b921476a.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,s)&&!N.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+I(l,0):i,x(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+I(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+I(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},P={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!N.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(k);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(S),S=-1),p=!0;var i=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),w(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(x,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,E=null,S=-1,C=5,I=-1;function T(){return!(t.unstable_now()-I<C)}function j(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?_():(N=!1,E=null)}}else N=!1}if("function"===typeof b)_=function(){b(j)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,A=D.port2;D.port1.onmessage=j,_=function(){A.postMessage(null)}}else _=function(){y(j,0)};function P(e){E=e,N||(N=!0,_())}function O(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,O(x,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,L=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(Qm){var t=Qm.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Gm){var r=Gm}Reflect.construct(e,[],t)}else{try{t.call()}catch(Gm){r=Gm}e.call(t.prototype)}else{try{throw Error()}catch(Gm){r=Gm}e()}}catch(Gm){if(Gm&&r&&"string"===typeof Gm.stack){for(var s=Gm.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case E:return"Profiler";case N:return"StrictMode";case T:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return z(e(t))}catch(Qm){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(rg){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,_e=null;function Ne(e){if(e=vs(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),xe(e.stateNode,e.type,t))}}function Ee(e){ke?_e?_e.push(e):_e=[e]:ke=e}function Se(){if(ke){var e=ke,t=_e;if(_e=ke=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Te=!1;function je(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==ke||null!==_e)&&(Ie(),Se())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ae=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(Hm){Ae=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(eg){this.onError(eg)}}var Re=!1,Me=null,Le=!1,Fe=null,Ue={onError:function(e){Re=!0,Me=e}};function Ve(e,t,n,r,s,i,a,o,l){Re=!1,Me=null,Oe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(i(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ke(s),e;if(a===r)return Ke(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Xe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,Ze=s.unstable_UserBlockingPriority,et=s.unstable_NormalPriority,tt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,rt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ot|0)|0},at=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ut(o):0!==(i&=a)&&(r=ut(i))}else 0!==(a=n&~s)?r=ut(a):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,kt,_t,Nt,Et=!1,St=[],Ct=null,It=null,Tt=null,jt=new Map,Dt=new Map,At=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=vs(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=ys(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Nt(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vs(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Lt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Ct&&Lt(Ct)&&(Ct=null),null!==It&&Lt(It)&&(It=null),null!==Tt&&Lt(Tt)&&(Tt=null),jt.forEach(Ft),Dt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==It&&Vt(It,e),null!==Tt&&Vt(Tt,e),jt.forEach(t),Dt.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Mt(n),null===n.blockedOn&&At.shift()}var zt=w.ReactCurrentBatchConfig,Kt=!0;function qt(e,t,n,r){var s=vt,i=zt.transition;zt.transition=null;try{vt=1,Wt(e,t,n,r)}finally{vt=s,zt.transition=i}}function Ht(e,t,n,r){var s=vt,i=zt.transition;zt.transition=null;try{vt=4,Wt(e,t,n,r)}finally{vt=s,zt.transition=i}}function Wt(e,t,n,r){if(Kt){var s=Qt(e,t,n,r);if(null===s)Kr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Rt(Ct,e,t,n,r,s),!0;case"dragenter":return It=Rt(It,e,t,n,r,s),!0;case"mouseover":return Tt=Rt(Tt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return jt.set(i,Rt(jt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Rt(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=vs(s);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&Kr(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=ys(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,$t=null;function Zt(){if($t)return $t;var e,t,n=Jt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var sn,an,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),un=L({},ln,{view:0,detail:0}),dn=rn(un),hn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(sn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=sn=0,on=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=rn(hn),pn=rn(L({},hn,{dataTransfer:0})),mn=rn(L({},un,{relatedTarget:0})),gn=rn(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(L({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Nn(){return _n}var En=L({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=rn(En),Cn=rn(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=rn(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Tn=rn(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=rn(jn),An=[9,13,27,32],Pn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Rn=u&&"TextEvent"in window&&!On,Mn=u&&(!Pn||On&&8<On&&11>=On),Ln=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function qn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Gn(e){Lr(e,0)}function Qn(e){if(G(bs(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),$n="function"===typeof Zn.oninput}Jn=$n}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Hn&&(Hn.detachEvent("onpropertychange",tr),Wn=Hn=null)}function tr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];qn(t,Wn,e,we(e)),je(Gn,t)}}function nr(e,t,n){"focusin"===e?(er(),Wn=n,(Hn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function sr(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Xm){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=cr(n,i);var a=cr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},_r={};function Nr(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return kr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Nr("animationend"),Sr=Nr("animationiteration"),Cr=Nr("animationstart"),Ir=Nr("transitionend"),Tr=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Tr.set(e,t),l(t,[e])}for(var Ar=0;Ar<jr.length;Ar++){var Pr=jr[Ar];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Sr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Ve.apply(this,arguments),Re){if(!Re)throw Error(i(198));var u=Me;Re=!1,Me=null,Le||(Le=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Le)throw e=Fe,Le=!1,Fe=null,e}function Fr(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var s=qt;break;case 4:s=Ht;break;default:s=Wt}n=s.bind(null,t,n,e),s=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=i,s=we(n),a=[];e:{var o=Tr.get(e);if(void 0!==o){var l=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Er:case Sr:case Cr:l=gn;break;case Ir:l=Tn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=De(p,h))&&u.push(qr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bs(l),f=null==c?o:bs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,ys(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Kn(o))if(Xn)g=ir;else{g=rr;var y=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bs(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(a,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(a,n,s)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=Zt()):(Jt="value"in(Xt=s)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,b)).length&&(b=new bn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Rn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Un(e,t)?(e=Zt(),$t=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Lr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(qr(e,i,s)),null!=(i=De(e,t))&&r.push(qr(e,i,s))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(qr(n,l,o)):s||null!=(l=De(n,i))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function $r(){}var Zr=null,es=null;function ts(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,rs="function"===typeof clearTimeout?clearTimeout:void 0,ss="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ss?function(e){return ss.resolve(null).then(e).catch(as)}:ns;function as(e){setTimeout(function(){throw e})}function os(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function ls(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),ds="__reactFiber$"+us,hs="__reactProps$"+us,fs="__reactContainer$"+us,ps="__reactEvents$"+us,ms="__reactListeners$"+us,gs="__reactHandles$"+us;function ys(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cs(e);null!==e;){if(n=e[ds])return n;e=cs(e)}return t}n=(e=n).parentNode}return null}function vs(e){return!(e=e[ds]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[hs]||null}var xs=[],ks=-1;function _s(e){return{current:e}}function Ns(e){0>ks||(e.current=xs[ks],xs[ks]=null,ks--)}function Es(e,t){ks++,xs[ks]=e.current,e.current=t}var Ss={},Cs=_s(Ss),Is=_s(!1),Ts=Ss;function js(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function As(){Ns(Is),Ns(Cs)}function Ps(e,t,n){if(Cs.current!==Ss)throw Error(i(168));Es(Cs,t),Es(Is,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,K(e)||"Unknown",s));return L({},n,r)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,Ts=Cs.current,Es(Cs,e),Es(Is,Is.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Os(e,t,Ts),r.__reactInternalMemoizedMergedChildContext=e,Ns(Is),Ns(Cs),Es(Cs,e)):Ns(Is),Es(Is,n)}var Ls=null,Fs=!1,Us=!1;function Vs(e){null===Ls?Ls=[e]:Ls.push(e)}function Bs(){if(!Us&&null!==Ls){Us=!0;var e=0,t=vt;try{var n=Ls;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ls=null,Fs=!1}catch(Fm){throw null!==Ls&&(Ls=Ls.slice(e+1)),We($e,Bs),Fm}finally{vt=t,Us=!1}}return null}var zs=[],Ks=0,qs=null,Hs=0,Ws=[],Gs=0,Qs=null,Ys=1,Xs="";function Js(e,t){zs[Ks++]=Hs,zs[Ks++]=qs,qs=e,Hs=t}function $s(e,t,n){Ws[Gs++]=Ys,Ws[Gs++]=Xs,Ws[Gs++]=Qs,Qs=e;var r=Ys;e=Xs;var s=32-it(r)-1;r&=~(1<<s),n+=1;var i=32-it(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-it(t)+s|n<<s|r,Xs=i+e}else Ys=1<<i|n<<s|r,Xs=e}function Zs(e){null!==e.return&&(Js(e,1),$s(e,1,0))}function ei(e){for(;e===qs;)qs=zs[--Ks],zs[Ks]=null,Hs=zs[--Ks],zs[Ks]=null;for(;e===Qs;)Qs=Ws[--Gs],Ws[Gs]=null,Xs=Ws[--Gs],Ws[Gs]=null,Ys=Ws[--Gs],Ws[Gs]=null}var ti=null,ni=null,ri=!1,si=null;function ii(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ti=e,ni=ls(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ti=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Ys,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ti=e,ni=null,!0);default:return!1}}function oi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ri){var t=ni;if(t){var n=t;if(!ai(e,t)){if(oi(e))throw Error(i(418));t=ls(n.nextSibling);var r=ti;t&&ai(e,t)?ii(r,n):(e.flags=-4097&e.flags|2,ri=!1,ti=e)}}else{if(oi(e))throw Error(i(418));e.flags=-4097&e.flags|2,ri=!1,ti=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ti=e}function ui(e){if(e!==ti)return!1;if(!ri)return ci(e),ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ts(e.type,e.memoizedProps)),t&&(t=ni)){if(oi(e))throw hi(),Error(i(418));for(;t;)ii(e,t),t=ls(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ni=ls(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ni=null}}else ni=ti?ls(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ni;e;)e=ls(e.nextSibling)}function fi(){ni=ti=null,ri=!1}function pi(e){null===si?si=[e]:si.push(e)}var mi=w.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case k:return(t=Uc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Mc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case k:return n.key===s?u(e,t,n,r):null;case A:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||R(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),ri&&Js(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ri&&Js(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),ri&&Js(s,m),c}function g(s,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),ri&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return ri&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),ri&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((i=Mc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return o(r);case A:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(R(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Fc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var wi=bi(!0),xi=bi(!1),ki=_s(null),_i=null,Ni=null,Ei=null;function Si(){Ei=Ni=_i=null}function Ci(e){var t=ki.current;Ns(ki),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){_i=e,Ei=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function ji(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===_i)throw Error(i(308));Ni=e,_i.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Di=null;function Ai(e){null===Di?Di=[e]:Di.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ai(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Oi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ai(r)):(t.next=s.next,s.next=t),r.interleaved=t,Oi(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Ri=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Ki(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var qi={},Wi=_s(qi),Gi=_s(qi),Qi=_s(qi);function Yi(e){if(e===qi)throw Error(i(174));return e}function Xi(e,t){switch(Es(Qi,t),Es(Gi,e),Es(Wi,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ns(Wi),Es(Wi,t)}function Ji(){Ns(Wi),Ns(Gi),Ns(Qi)}function $i(e){Yi(Qi.current);var t=Yi(Wi.current),n=le(t,e.type);t!==n&&(Es(Gi,e),Es(Wi,n))}function Zi(e){Gi.current===e&&(Ns(Wi),Ns(Gi))}var ea=_s(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var sa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,s,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Za:eo,e=n(r,s),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,sa.current=to,e=n(r,s)}while(da)}if(sa.current=$a,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,oa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,ar(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,oa.lanes|=a,Ll|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);ar(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function Na(e,t){var n=oa,r=ba(),s=t(),a=!ar(r.memoizedState,s);if(a&&(r.memoizedState=s,wo=!0),r=r.queue,Ma(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Da(9,Sa.bind(null,n,r,s,t),void 0,null),null===jl)throw Error(i(349));0!==(30&aa)||Ea(n,t,s)}return s}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Ta(e)}function Ca(e,t,n){return n(function(){Ia(t)&&Ta(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(Xm){return!0}}function Ta(e){var t=Oi(e,1);null!==t&&rc(t,e,1,-1)}function ja(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,oa,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return ba().memoizedState}function Pa(e,t,n,r){var s=va();oa.flags|=e,s.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var s=ba();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Da(t,n,i,r))}oa.flags|=e,s.memoizedState=Da(1|t,n,i,r)}function Ra(e,t){return Pa(8390656,8,e,t)}function Ma(e,t){return Oa(2048,8,e,t)}function La(e,t){return Oa(4,2,e,t)}function Fa(e,t){return Oa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Ua.bind(null,t,e),n)}function Ba(){}function za(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ka(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(ar(n,t)||(n=pt(),oa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{vt=n,ia.transition=r}}function Wa(){return ba().memoizedState}function Ga(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Pi(e,t,n,r))){rc(n,e,r,tc()),Ja(n,t,r)}}function Qa(e,t,n){var r=nc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,ar(o,a)){var l=t.interleaved;return null===l?(s.next=s,Ai(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Gm){}null!==(n=Pi(e,t,s,r))&&(rc(n,e,r,s=tc()),Ja(n,t,r))}}function Ya(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Xa(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $a={readContext:ji,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:ji,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:ji,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:ja,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,s=va();if(ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===jl)throw Error(i(349));0!==(30&aa)||Ea(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ra(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=jl.identifierPrefix;if(ri){var n=Xs;t=":"+t+"R"+(n=(Ys&~(1<<32-it(Ys)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:ji,useCallback:za,useContext:ji,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:Ka,useReducer:xa,useRef:Aa,useState:function(){return xa(wa)},useDebugValue:Ba,useDeferredValue:function(e){return qa(ba(),la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1},to={readContext:ji,useCallback:za,useContext:ji,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:Ka,useReducer:ka,useRef:Aa,useState:function(){return ka(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:qa(t,la.memoizedState,e)},useTransition:function(){return[ka(wa)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(rc(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(rc(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(rc(t,e,r,n),Vi(t,e,r))}};function io(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(s,i))}function ao(e,t,n){var r=!1,s=Ss,i=t.contextType;return"object"===typeof i&&null!==i?i=ji(i):(s=Ds(t)?Ts:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?js(e,s):Ss),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=ji(i):(i=Ds(t)?Ts:Cs.current,s.context=js(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ro(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(Jm){s="\nError generating stack: "+Jm.message+"\n"+Jm.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(Qm){setTimeout(function(){throw Qm})}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),ho(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ho(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bo=w.ReactCurrentOwner,wo=!1;function xo(e,t,n,r){t.child=null===e?xi(t,null,n,r):wi(t,e.child,n,r)}function ko(e,t,n,r,s){n=n.render;var i=t.ref;return Ti(t,s),r=ga(e,t,n,r,i,s),n=ya(),null===e||wo?(ri&&n&&Zs(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,No(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:or)(a,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(or(i,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(wo=!0)}}return Co(e,t,n,r,s)}function Eo(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Es(Ol,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Es(Ol,Pl),Pl|=r;return xo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,s){var i=Ds(n)?Ts:Cs.current;return i=js(t,i),Ti(t,s),n=ga(e,t,n,r,i,s),r=ya(),null===e||wo?(ri&&r&&Zs(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function Io(e,t,n,r,s){if(Ds(n)){var i=!0;Rs(t)}else i=!1;if(Ti(t,s),null===t.stateNode)qo(e,t),ao(t,n,r),lo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ji(c):c=js(t,c=Ds(n)?Ts:Cs.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),Ri=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Is.current||Ri?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ri||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Li(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ji(l):l=js(t,l=Ds(n)?Ts:Cs.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,a,r,l),Ri=!1,h=t.memoizedState,a.state=h,zi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Is.current||Ri?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Ri||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,i,s)}function To(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Ho(e,t,i);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Xi(e,t.containerInfo)}function Do(e,t,n,r,s){return fi(),pi(s),t.flags|=256,xo(e,t,n,r),t.child}var Ao,Po,Oo,Ro,Mo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,s=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Es(ea,1&a),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Mc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Mo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=uo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(a=Mc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=uo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=jl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oi(e,s),rc(r,e,s,-1))}return gc(),Vo(e,t,o,r=uo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ni=ls(s.nextSibling),ti=t,ri=!0,si=null,null!==e&&(Ws[Gs++]=Ys,Ws[Gs++]=Xs,Ws[Gs++]=Qs,Ys=e.id,Xs=e.overflow,Qs=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,s}return e=(o=e.child).sibling,s=Oc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&pi(r),wi(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function zo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ko(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Es(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ta(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zo(t,!0,n,null,i);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ei(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ds(t.type)&&As(),Go(t),null;case 3:return r=t.stateNode,Ji(),Ns(Is),Ns(Cs),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==si&&(oc(si),si=null))),Po(e,t),Go(t),null;case 5:Zi(t);var s=Yi(Qi.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Go(t),null}if(e=Yi(Wi.current),ui(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ds]=t,r[hs]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Fr(Or[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":se(r,a),Fr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ds]=t,e[hs]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),s=r;break;case"iframe":case"object":case"embed":Fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Fr(Or[s],e);s=r;break;case"source":Fr("error",e),s=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),s=r;break;case"details":Fr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),Fr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Fr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Qi.current),Yi(Wi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(a=r.nodeValue!==n)&&null!==(e=ti))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Go(t),null;case 13:if(Ns(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ri&&null!==ni&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ds]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==si&&(oc(si),si=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Ji(),Po(e,t),null===e&&Br(t.stateNode.containerInfo),Go(t),null;case 10:return Ci(t.type._context),Go(t),null;case 19:if(Ns(ea),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Kl&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ri)return Go(t),null}else 2*Xe()-a.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Es(ea,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ei(t),t.tag){case 1:return Ds(t.type)&&As(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),Ns(Is),Ns(Cs),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Ns(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ns(ea),null;case 4:return Ji(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Wi.current);var i,a=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),a=[];break;case"select":s=L({},s,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Jo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Xm){Ec(e,t,Xm)}else n.current=null}function tl(e,t,n){try{n()}catch(Xm){Ec(e,t,Xm)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&tl(t,n,i)}s=s.next}while(s!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[hs],delete t[ps],delete t[ms],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(Ym){}switch(n.tag){case 5:Jo||el(n,t);case 6:var r=dl,s=hl;dl=null,fl(e,t,n),hl=s,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?os(e.parentNode,n):1===e.nodeType&&os(e,n),Bt(e)):os(dl,n.stateNode));break;case 4:r=dl,s=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tl(n,t,a),s=s.next}while(s!==r)}fl(e,t,n);break;case 1:if(!Jo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Ym){Ec(n,t,Ym)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,fl(e,t,n),Jo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,o,s),dl=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Gm){Ec(s,t,Gm)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),sl(3,e)}catch(Um){Ec(e,e.return,Um)}try{rl(5,e,e.return)}catch(Um){Ec(e,e.return,Um)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(Um){Ec(e,e.return,Um)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(s,h):"dangerouslySetInnerHTML"===d?ue(s,h):"children"===d?de(s,h):b(s,d,h,u)}switch(l){case"input":$(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[hs]=a}catch(Um){Ec(e,e.return,Um)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(Um){Ec(e,e.return,Um)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(Um){Ec(e,e.return,Um)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,gl(t,e),Jo=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Um){Ec(r,n,Um)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==p?(p.return=f,Zo=p):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(Um){Ec(e,e.return,Um)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(Um){Ec(e,e.return,Um)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),ul(e,ll(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(i(161))}}catch(Hi){Ec(e,e.return,Hi)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Xo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Xo;var c=Jo;if(Xo=a,(Jo=l)&&!c)for(Zo=s;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Zo=l):_l(s);for(;null!==i;)Zo=i,wl(i,t,n),i=i.sibling;Zo=s,Xo=o,Jo=c}xl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Zo=i):xl(e)}}function xl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ki(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ki(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Jo||512&t.flags&&il(t)}catch(Bm){Ec(t,t.return,Bm)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Hi){Ec(t,n,Hi)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Hi){Ec(t,s,Hi)}}var i=t.return;try{il(t)}catch(Hi){Ec(t,i,Hi)}break;case 5:var a=t.return;try{il(t)}catch(Hi){Ec(t,a,Hi)}}}catch(Hi){Ec(t,t.return,Hi)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,El=Math.ceil,Sl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Tl=0,jl=null,Dl=null,Al=0,Pl=0,Ol=_s(0),Rl=0,Ml=null,Ll=0,Fl=0,Ul=0,Vl=null,Bl=null,zl=0,Kl=1/0,ql=null,Hl=!1,Wl=null,Gl=null,Ql=!1,Yl=null,Xl=0,Jl=0,$l=null,Zl=-1,ec=0;function tc(){return 0!==(6&Tl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Al?Al&-Al:null!==mi.transition?(0===ec&&(ec=pt()),ec):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(i(185));gt(e,n,r),0!==(2&Tl)&&e===jl||(e===jl&&(0===(2&Tl)&&(Fl|=n),4===Rl&&lc(e,Al)),sc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Kl=Xe()+500,Fs&&Bs()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-it(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ht(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===jl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fs=!0,Vs(e)}(cc.bind(null,e)):Vs(cc.bind(null,e)),is(function(){0===(6&Tl)&&Bs()}),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=jc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,ec=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=dt(e,e===jl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var s=Tl;Tl|=2;var a=mc();for(jl===e&&Al===t||(ql=null,Kl=Xe()+500,fc(e,t));;)try{bc();break}catch(Ym){pc(e,Ym)}Si(),Sl.current=a,Tl=s,null!==Dl?t=0:(jl=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=ac(e,s))),1===t)throw n=Ml,fc(e,0),lc(e,r),sc(e,Xe()),n;if(6===t)lc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=yc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ml,fc(e,0),lc(e,r),sc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,Bl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(kc.bind(null,e,Bl,ql),t);break}kc(e,Bl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ns(kc.bind(null,e,Bl,ql),r);break}kc(e,Bl,ql);break;default:throw Error(i(329))}}}return sc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Tl))throw Error(i(327));_c();var t=dt(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),sc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Bl,ql),sc(e,Xe()),null}function uc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Kl=Xe()+500,Fs&&Bs())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Il.transition,r=vt;try{if(Il.transition=null,vt=1,e)return e()}finally{vt=r,Il.transition=n,0===(6&(Tl=t))&&Bs()}}function hc(){Pl=Ol.current,Ns(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rs(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ei(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&As();break;case 3:Ji(),Ns(Is),Ns(Cs),ra();break;case 5:Zi(r);break;case 4:Ji();break;case 13:case 19:Ns(ea);break;case 10:Ci(r.type._context);break;case 22:case 23:hc()}n=n.return}if(jl=e,Dl=e=Oc(e.current,null),Al=Pl=t,Rl=0,Ml=null,Ul=Fl=Ll=0,Bl=Vl=null,null!==Di){for(t=0;t<Di.length;t++)if(null!==(r=(n=Di[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Di=null}return e}function pc(e,t){for(;;){var n=Dl;try{if(Si(),sa.current=$a,ua){for(var r=oa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=oa=null,da=!1,ha=0,Cl.current=null,null===n||null===n.return){Rl=1,Ml=t,Dl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(i(426))}else if(ri&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),pi(co(c,l));break e}}a=c=co(c,l),4!==Rl&&(Rl=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=$a,null===e?$a:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===jl||0===(268435455&Ll)&&0===(268435455&Fl)||lc(jl,Al)}function yc(e,t){var n=Tl;Tl|=2;var r=mc();for(jl===e&&Al===t||(ql=null,fc(e,t));;)try{vc();break}catch(Fm){pc(e,Fm)}if(Si(),Tl=n,Sl.current=r,null!==Dl)throw Error(i(261));return jl=null,Al=0,Rl}function vc(){for(;null!==Dl;)wc(Dl)}function bc(){for(;null!==Dl&&!Qe();)wc(Dl)}function wc(e){var t=Nl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xc(e):Dl=t,Cl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Pl)))return void(Dl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Rl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Rl&&(Rl=5)}function kc(e,t,n){var r=vt,s=Il.transition;try{Il.transition=null,vt=1,function(e,t,n,r){do{_c()}while(null!==Yl);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===jl&&(Dl=jl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,jc(et,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=vt;vt=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(Zr=Kt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(di){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(es={focusedElem:e,selectionRange:n},Kt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(di){Ec(t,t.return,di)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),fr(es),Kt=!!Zr,es=Zr=null,e.current=n,bl(n,e,s),Ye(),Tl=l,vt=o,Il.transition=a}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=s),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Xl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Bs()}(e,t,n,r)}finally{Il.transition=s,vt=r}return null}function _c(){if(null!==Yl){var e=bt(Xl),t=Il.transition,n=vt;try{if(Il.transition=null,vt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Tl))throw Error(i(331));var s=Tl;for(Tl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(al(d),d===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(k){Ec(l,l.return,k)}if(l===o){Zo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zo=x;break e}Zo=l.return}}if(Tl=s,Bs(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(k){}r=!0}return r}finally{vt=n,Il.transition=t}}return!1}function Nc(e,t,n){e=Ui(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),sc(e,t))}function Ec(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ui(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Xe()-zl?fc(e,0):Ul|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tc();null!==(e=Oi(e,t))&&(gt(e,t,n),sc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function jc(e,t){return We(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Mc(n.children,s,a,t);case N:o=8,s|=8;break;case E:return(e=Ac(12,n,t,2|s)).elementType=E,e.lanes=a,e;case T:return(e=Ac(13,n,t,s)).elementType=T,e.lanes=a,e;case j:return(e=Ac(19,n,t,s)).elementType=j,e.lanes=a,e;case P:return Lc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case I:o=11;break e;case D:o=14;break e;case A:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,s,i,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function zc(e){if(!e)return Ss;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Os(e,n,t)}return t}function Kc(e,t,n,r,s,i,a,o,l){return(e=Bc(n,r,!0,e,0,i,0,o,l)).context=zc(null),n=e.current,(i=Fi(r=tc(),s=nc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,gt(e,s,r),sc(e,r),e}function qc(e,t,n,r){var s=t.current,i=tc(),a=nc(s);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(rc(e,s,a,i),Vi(e,s,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),fi();break;case 5:$i(t);break;case 1:Ds(t.type)&&Rs(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Es(ki,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Es(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Es(ea,1&ea.current),null!==(e=Ho(e,t,n))?e.sibling:null);Es(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ko(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,ri&&0!==(1048576&t.flags)&&$s(t,Hs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=js(t,Cs.current);Ti(t,n),s=ga(null,t,r,e,s,n);var a=ya();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Rs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Mi(t),s.updater=so,t.stateNode=s,s._reactInternals=t,lo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,ri&&a&&Zs(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=no(r,e),s){case 0:t=Co(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=_o(null,t,r,no(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:no(r,s),n);case 1:return r=t.type,s=t.pendingProps,Io(e,t,r,s=t.elementType===r?s:no(r,s),n);case 3:e:{if(jo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Li(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Do(e,t,r,n,s=co(Error(i(423)),t));break e}if(r!==s){t=Do(e,t,r,n,s=co(Error(i(424)),t));break e}for(ni=ls(t.stateNode.containerInfo.firstChild),ti=t,ri=!0,si=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Ho(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&li(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ts(r,s)?o=null:null!==a&&ts(r,a)&&(t.flags|=32),So(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&li(t),null;case 13:return Fo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,ko(e,t,r,s=t.elementType===r?s:no(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Es(ki,r._currentValue),r._currentValue=o,null!==a)if(ar(a.value,o)){if(a.children===s.children&&!Is.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ii(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ii(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ti(t,n),r=r(s=ji(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=no(r=t.type,t.pendingProps),_o(e,t,r,s=no(r.type,s),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:no(r,s),qo(e,t),t.tag=1,Ds(r)?(e=!0,Rs(t)):e=!1,Ti(t,n),ao(t,r,s),lo(t,r,s,n),To(null,t,r,!0,e,n);case 19:return Ko(e,t,n);case 22:return Eo(e,t,n)}throw Error(i(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Kc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fs]=a.current,Br(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fs]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));qc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[fs]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Xe()),0===(6&Tl)&&(Kl=Xe()+500,Bs()))}break;case 13:dc(function(){var t=Oi(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Oi(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},_t=function(){return vt},Nt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));G(r),$(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[vs,bs,ws,Ee,Se,uc]},nu={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{rt=su.inject(ru),st=su}catch(Hm){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(i(299));var n=!1,r="",s=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Kc(t,null,e,1,null!=n?n:null,s,0,a,o),e[fs]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Fm){if("object"===typeof window)return window}}();var r=n(43),s=n(391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h=["color","size","strokeWidth","absoluteStrokeWidth","children"];var f=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:f}=n,p=u(n,h);return(0,r.createElement)("svg",c(c({ref:s},d),{},{width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:"lucide lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(f)?f:[f])||[]]);var m});return n.displayName="".concat(e),n};const p=f("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),m=f("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),g=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),v=f("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),b=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(b(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new x;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class x extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k=function(e){return function(e){const t=b(e);return w.encodeByteArray(t,!0)}(e).replace(/\./g,"")},_=function(e){try{return w.decodeString(e,!0)}catch(Fm){console.error("base64Decode failed: ",Fm)}return null};function N(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const E=()=>{try{return N().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Fm){return}const t=e&&_(e[1]);return t&&JSON.parse(t)})()}catch(Fm){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Fm))}},S=e=>{var t;return null===(t=E())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},C=()=>{var e;return null===(e=E())||void 0===e?void 0:e.config},I=e=>{var t;return null===(t=E())||void 0===t?void 0:t["_".concat(e)]};class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function j(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function D(e){return(await fetch(e,{credentials:"include"})).ok}const A={};let P=!1;function O(e,t){if("undefined"===typeof window||"undefined"===typeof document||!j(window.location.host)||A[e]===t||A[e]||P)return;function n(e){return"__firebase__banner__".concat(e)}A[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(A))A[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{P=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function R(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){var e;const t=null===(e=E())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Fm){return!1}}function L(){return!M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){return!M()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function U(){try{return"object"===typeof indexedDB}catch(Fm){return!1}}class V extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(z,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new V(n,i,t)}}const z=/\{\$([^}]+)}/g;function K(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(q(n)&&q(i)){if(!K(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function q(e){return null!==e&&"object"===typeof e}function H(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function W(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function G(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Q{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Fm){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Fm){"undefined"!==typeof console&&console.error&&console.error(Fm)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y(){}function X(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $="[DEFAULT]";class Z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new T;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Fm){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Fm){if(r)return null;throw Fm}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$})}catch(Fm){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Fm){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===$?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;return this.component?this.component.multipleInstances?e:$:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const te=[];var ne;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ne||(ne={}));const re={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},se=ne.INFO,ie={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ae=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ie[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class oe{constructor(e){this.name=e,this._logLevel=se,this._logHandler=ae,this._userLogHandler=null,te.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?re[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...t),this._logHandler(this,ne.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...t),this._logHandler(this,ne.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.INFO,...t),this._logHandler(this,ne.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.WARN,...t),this._logHandler(this,ne.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...t),this._logHandler(this,ne.ERROR,...t)}}let le,ce;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,fe=new WeakMap,pe=new WeakMap;let me={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return de.get(e);if("objectStoreNames"===t)return e.objectStoreNames||he.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ve(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ge(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(be(this),n),ve(ue.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ve(e.apply(be(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(be(this),t,...r);return he.set(i,t.sort?t.sort():[t]),ve(i)}}function ye(e){return"function"===typeof e?ge(e):(e instanceof IDBTransaction&&function(e){if(de.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});de.set(e,t)}(e),t=e,(le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,me):e);var t}function ve(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ve(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&ue.set(t,e)}).catch(()=>{}),pe.set(t,e),t}(e);if(fe.has(e))return fe.get(e);const t=ye(e);return t!==e&&(fe.set(e,t),pe.set(t,e)),t}const be=e=>pe.get(e);const we=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],ke=new Map;function _e(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ke.get(t))return ke.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=xe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!we.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return ke.set(t,i),i}me=(e=>c(c({},e),{},{get:(t,n,r)=>_e(t,n)||e.get(t,n,r),has:(t,n)=>!!_e(t,n)||e.has(t,n)}))(me);class Ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ee="@firebase/app",Se="0.14.3",Ce=new oe("@firebase/app"),Ie="@firebase/app-compat",Te="@firebase/analytics-compat",je="@firebase/analytics",De="@firebase/app-check-compat",Ae="@firebase/app-check",Pe="@firebase/auth",Oe="@firebase/auth-compat",Re="@firebase/database",Me="@firebase/data-connect",Le="@firebase/database-compat",Fe="@firebase/functions",Ue="@firebase/functions-compat",Ve="@firebase/installations",Be="@firebase/installations-compat",ze="@firebase/messaging",Ke="@firebase/messaging-compat",qe="@firebase/performance",He="@firebase/performance-compat",We="@firebase/remote-config",Ge="@firebase/remote-config-compat",Qe="@firebase/storage",Ye="@firebase/storage-compat",Xe="@firebase/firestore",Je="@firebase/ai",$e="@firebase/firestore-compat",Ze="firebase",et="[DEFAULT]",tt={[Ee]:"fire-core",[Ie]:"fire-core-compat",[je]:"fire-analytics",[Te]:"fire-analytics-compat",[Ae]:"fire-app-check",[De]:"fire-app-check-compat",[Pe]:"fire-auth",[Oe]:"fire-auth-compat",[Re]:"fire-rtdb",[Me]:"fire-data-connect",[Le]:"fire-rtdb-compat",[Fe]:"fire-fn",[Ue]:"fire-fn-compat",[Ve]:"fire-iid",[Be]:"fire-iid-compat",[ze]:"fire-fcm",[Ke]:"fire-fcm-compat",[qe]:"fire-perf",[He]:"fire-perf-compat",[We]:"fire-rc",[Ge]:"fire-rc-compat",[Qe]:"fire-gcs",[Ye]:"fire-gcs-compat",[Xe]:"fire-fst",[$e]:"fire-fst-compat",[Je]:"fire-vertex","fire-js":"fire-js",[Ze]:"fire-js-all"},nt=new Map,rt=new Map,st=new Map;function it(e,t){try{e.container.addComponent(t)}catch(Fm){Ce.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Fm)}}function at(e){const t=e.name;if(st.has(t))return Ce.debug("There were multiple attempts to register component ".concat(t,".")),!1;st.set(t,e);for(const n of nt.values())it(n,e);for(const n of rt.values())it(n,e);return!0}function ot(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function lt(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ct=new B("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ut{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new J("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}const dt="12.3.0";function ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:et,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw ct.create("bad-app-name",{appName:String(s)});if(n||(n=C()),!n)throw ct.create("no-options");const i=nt.get(s);if(i){if(K(n,i.options)&&K(r,i.config))return i;throw ct.create("duplicate-app",{appName:s})}const a=new ee(s);for(const l of st.values())a.addComponent(l);const o=new ut(n,r,a);return nt.set(s,o),o}function ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;const t=nt.get(e);if(!t&&e===et&&C())return ht();if(!t)throw ct.create("no-app",{appName:e});return t}function pt(e,t,n){var r;let s=null!==(r=tt[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ce.warn(e.join(" "))}at(new J("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const mt="firebase-heartbeat-store";let gt=null;function yt(){return gt||(gt=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ve(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ve(a.result),e.oldVersion,e.newVersion,ve(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(mt)}catch(Fm){console.warn(Fm)}}}).catch(e=>{throw ct.create("idb-open",{originalErrorMessage:e.message})})),gt}async function vt(e,t){try{const n=(await yt()).transaction(mt,"readwrite"),r=n.objectStore(mt);await r.put(t,bt(e)),await n.done}catch(Fm){if(Fm instanceof V)Ce.warn(Fm.message);else{const t=ct.create("idb-set",{originalErrorMessage:null===Fm||void 0===Fm?void 0:Fm.message});Ce.warn(t.message)}}}function bt(e){return"".concat(e.name,"!").concat(e.options.appId)}class wt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Fm){Ce.warn(Fm)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),_t(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_t(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=k(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Fm){return Ce.warn(Fm),""}}}function xt(){return(new Date).toISOString().substring(0,10)}class kt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!U()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await yt()).transaction(mt),n=await t.objectStore(mt).get(bt(e));return await t.done,n}catch(Fm){if(Fm instanceof V)Ce.warn(Fm.message);else{const t=ct.create("idb-get",{originalErrorMessage:null===Fm||void 0===Fm?void 0:Fm.message});Ce.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _t(e){return k(JSON.stringify({version:2,heartbeats:e})).length}var Nt;Nt="",at(new J("platform-logger",e=>new Ne(e),"PRIVATE")),at(new J("heartbeat",e=>new wt(e),"PRIVATE")),pt(Ee,Se,Nt),pt(Ee,Se,"esm2020"),pt("fire-js","");const Et=["providerId"],St=["uid","auth","stsTokenManager"],Ct=["providerId","signInMethod"];function It(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tt=It,jt=new B("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dt=new oe("@firebase/auth");function At(e){if(Dt.logLevel<=ne.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Dt.error("Auth (".concat(dt,"): ").concat(e),...n)}}function Pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Lt(e,...n)}function Ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Lt(e,...n)}function Rt(e,t,n){const r=c(c({},Tt()),{},{[t]:n});return new B("auth","Firebase",r).create(t,{appName:e.name})}function Mt(e){return Rt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return jt.create(e,...n)}function Ft(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Lt(t,...r)}}function Ut(e){const t="INTERNAL ASSERTION FAILED: "+e;throw At(t),new Error(t)}function Vt(e,t){e||Ut(t)}function Bt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function zt(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function qt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(zt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ht{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return qt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wt(e,t){Vt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Gt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Xt=new Ht(3e4,6e4);function Jt(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function $t(e,t,n,r){return Zt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=H(c({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&j(e.emulatorConfig.host)&&(l.credentials="include"),Gt.fetch()(await tn(e,e.config.apiHost,n,a),l)})}async function Zt(e,t,n){e._canInitEmulator=!1;const r=c(c({},Qt),t);try{const t=new rn(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw sn(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sn(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw sn(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw sn(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Rt(e,o,a);Pt(e,o)}}catch(Fm){if(Fm instanceof V)throw Fm;Pt(e,"network-request-failed",{message:String(Fm)})}}async function en(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await $t(e,t,n,r,s);return"mfaPendingCredential"in i&&Pt(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function tn(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Wt(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Yt.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function nn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ot(this.auth,"network-request-failed")),Xt.get())})}}function sn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ot(e,t,r);return s.customData._tokenResponse=n,s}function an(e){return void 0!==e&&void 0!==e.enterprise}class on{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ln(e,t){return $t(e,"GET","/v2/recaptchaConfig",Jt(e,t))}async function cn(e,t){return $t(e,"POST","/v1/accounts:lookup",t)}function un(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Fm){}}function dn(e){return 1e3*Number(e)}function hn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return At("JWT malformed, contained fewer than 3 sections"),null;try{const e=_(n);return e?JSON.parse(e):(At("Failed to decode base64 JWT payload"),null)}catch(Fm){return At("Caught error parsing JWT payload as JSON",null===Fm||void 0===Fm?void 0:Fm.toString()),null}}function fn(e){const t=hn(e);return Ft(t,"internal-error"),Ft("undefined"!==typeof t.exp,"internal-error"),Ft("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function pn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Fm){throw Fm instanceof V&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Fm)&&e.auth.currentUser===e&&await e.auth.signOut(),Fm}}class mn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Fm){return void((null===Fm||void 0===Fm?void 0:Fm.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class gn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=un(this.lastLoginAt),this.creationTime=un(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yn(e){var t;const n=e.auth,r=await e.getIdToken(),s=await pn(e,cn(n,{idToken:r}));Ft(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?vn(i.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gn(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function vn(e){return e.map(e=>{let{providerId:t}=e,n=u(e,Et);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ft(e.idToken,"internal-error"),Ft("undefined"!==typeof e.idToken,"internal-error"),Ft("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):fn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ft(0!==e.length,"internal-error");const t=fn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Zt(e,{},async()=>{const n=H({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await tn(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&j(e.emulatorConfig.host)&&(o.credentials="include"),Gt.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new bn;return n&&(Ft("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Ft("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Ft("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bn,this.toJSON())}_performRefresh(){return Ut("not implemented")}}function wn(e,t){Ft("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class xn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=u(e,St);this.providerId="firebase",this.proactiveRefresh=new mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await pn(this,this.stsTokenManager.getToken(this.auth,e));return Ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=X(e),r=await n.getIdToken(t),s=hn(r);Ft(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:un(dn(s.auth_time)),issuedAtTime:un(dn(s.iat)),expirationTime:un(dn(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=X(e);await yn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xn(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await yn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lt(this.auth.app))return Promise.reject(Mt(this.auth));const e=await this.getIdToken();return await pn(this,async function(e,t){return $t(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:k,stsTokenManager:_}=t;Ft(b&&_,e,"internal-error");const N=bn.fromJSON(this.name,_);Ft("string"===typeof b,e,"internal-error"),wn(d,e.name),wn(h,e.name),Ft("boolean"===typeof w,e,"internal-error"),Ft("boolean"===typeof x,e,"internal-error"),wn(f,e.name),wn(p,e.name),wn(m,e.name),wn(g,e.name),wn(y,e.name),wn(v,e.name);const E=new xn({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:v});return k&&Array.isArray(k)&&(E.providerData=k.map(e=>c({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new bn;r.updateFromServerResponse(t);const s=new xn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await yn(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ft(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?vn(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),a=new bn;a.updateFromIdToken(n);const o=new xn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new gn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(o,l),o}}const kn=new Map;function _n(e){Vt(e instanceof Function,"Expected a class definition");let t=kn.get(e);return t?(Vt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kn.set(e,t),t)}class Nn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Nn.type="NONE";const En=Nn;function Sn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Cn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Sn(this.userKey,r.apiKey,s),this.fullPersistenceKey=Sn("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await cn(this.auth,{idToken:e}).catch(()=>{});return t?xn._fromGetAccountInfoResponse(this.auth,t,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Cn(_n(En),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||_n(En);const i=Sn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await cn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await xn._fromGetAccountInfoResponse(e,r,t)}else n=xn._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(t){}})),new Cn(s,e,n)):new Cn(s,e,n)}}function In(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(An(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Tn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(On(t))return"Blackberry";if(Rn(t))return"Webos";if(jn(t))return"Safari";if((t.includes("chrome/")||Dn(t))&&!t.includes("edge/"))return"Chrome";if(Pn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/firefox\//i.test(e)}function jn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:R()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/crios\//i.test(e)}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iemobile/i.test(e)}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/android/i.test(e)}function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/blackberry/i.test(e)}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/webos/i.test(e)}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ln(){return function(){const e=R();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return Mn(e)||Pn(e)||Rn(e)||On(e)||/windows phone/i.test(e)||An(e)}function Un(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=In(R());break;case"Worker":t="".concat(In(R()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(dt,"/").concat(r)}class Vn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Fm){r(Fm)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Fm){t.reverse();for(const n of t)try{n()}catch(sg){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Fm||void 0===Fm?void 0:Fm.message})}}}class Bn{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class zn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qn(this),this.idTokenSubscription=new qn(this),this.beforeStateQueue=new Vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_n(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await Cn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Fm){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await cn(this,{idToken:e}),n=await xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var s,i;await this.getOrInitRedirectPersistenceManager();const t=null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId,a=null===(i=n)||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(Fm){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Fm))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Fm){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yn(e)}catch(Fm){if((null===Fm||void 0===Fm?void 0:Fm.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lt(this.app))return Promise.reject(Mt(this));const t=e?X(e):null;return t&&Ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lt(this.app)?Promise.reject(Mt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lt(this.app)?Promise.reject(Mt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return $t(e,"GET","/v2/passwordPolicy",Jt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Bn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new B("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return $t(e,"POST","/v2/accounts:revokeToken",Jt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_n(e)||this._popupRedirectResolver;Ft(t,this,"argument-error"),this.redirectPersistenceManager=await Cn.create(this,[_n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ft(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Dt.logLevel<=ne.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Dt.warn("Auth (".concat(dt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Kn(e){return X(e)}class qn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Q(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wn(e){return Hn.loadJS(e)}function Gn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Qn{constructor(){this.enterprise=new Yn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Yn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Xn="NO_RECAPTCHA";class Jn{constructor(e){this.type="recaptcha-enterprise",this.auth=Kn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;an(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Xn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Qn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{ln(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new on(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&an(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Hn.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Wn(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function $n(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Jn(e);let a;if(s)a=Xn;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Zn(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await $n(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await $n(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const s=await $n(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await $n(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await $n(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function er(e){const t=Kn(e),n=await ln(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new on(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Jn(t).verify()}}function tr(e,t,n){const r=Kn(e);Ft(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),i=nr(t),{host:a,port:o}=function(e){const t=nr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:rr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:rr(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return Ft(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ft(K(c,r.config.emulator)&&K(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,j(a)?(D("".concat(i,"//").concat(a).concat(l)),O("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function nr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class sr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ut("not implemented")}_getIdTokenResponse(e){return Ut("not implemented")}_linkToIdToken(e,t){return Ut("not implemented")}_getReauthenticationResolver(e){return Ut("not implemented")}}async function ir(e,t){return $t(e,"POST","/v1/accounts:signUp",t)}async function ar(e,t){return en(e,"POST","/v1/accounts:signInWithPassword",Jt(e,t))}class or extends sr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new or(e,t,"password")}static _fromEmailAndCode(e,t){return new or(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Zn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ar,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return en(e,"POST","/v1/accounts:signInWithEmailLink",Jt(e,t))}(e,{email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ir,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return en(e,"POST","/v1/accounts:signInWithEmailLink",Jt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function lr(e,t){return en(e,"POST","/v1/accounts:signInWithIdp",Jt(e,t))}class cr extends sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=u(t,Ct);if(!n||!r)return null;const i=new cr(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return lr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,lr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}async function ur(e,t){return $t(e,"POST","/v1/accounts:sendVerificationCode",Jt(e,t))}const dr={USER_NOT_FOUND:"user-not-found"};class hr extends sr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new hr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new hr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return en(e,"POST","/v1/accounts:signInWithPhoneNumber",Jt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await en(e,"POST","/v1/accounts:signInWithPhoneNumber",Jt(e,t));if(n.temporaryProof)throw sn(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return en(e,"POST","/v1/accounts:signInWithPhoneNumber",Jt(e,c(c({},t),{},{operation:"REAUTH"})),dr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new hr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class fr{constructor(e){var t,n,r,s,i,a;const o=W(G(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ft(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=W(G(e)).link,n=t?W(G(t)).deep_link_id:null,r=W(G(e)).deep_link_id;return(r?W(G(r)).link:null)||r||n||t||e}(e);try{return new fr(t)}catch(n){return null}}}class pr{constructor(){this.providerId=pr.PROVIDER_ID}static credential(e,t){return or._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=fr.parseLink(t);return Ft(n,"argument-error"),or._fromEmailAndCode(e,n.code,n.tenantId)}}pr.PROVIDER_ID="password",pr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gr extends mr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yr extends gr{constructor(){super("facebook.com")}static credential(e){return cr._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yr.credential(t.oauthAccessToken)}catch(n){return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com",yr.PROVIDER_ID="facebook.com";class vr extends gr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cr._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return vr.credential(n,r)}catch(s){return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com",vr.PROVIDER_ID="google.com";class br extends gr{constructor(){super("github.com")}static credential(e){return cr._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return br.credential(t.oauthAccessToken)}catch(n){return null}}}br.GITHUB_SIGN_IN_METHOD="github.com",br.PROVIDER_ID="github.com";class wr extends gr{constructor(){super("twitter.com")}static credential(e,t){return cr._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return wr.credential(n,r)}catch(s){return null}}}async function xr(e,t){return en(e,"POST","/v1/accounts:signUp",Jt(e,t))}wr.TWITTER_SIGN_IN_METHOD="twitter.com",wr.PROVIDER_ID="twitter.com";class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await xn._fromIdTokenResponse(e,n,r),i=_r(n);return new kr({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=_r(n);return new kr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function _r(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Nr extends V{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Nr.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Nr(e,t,n,r)}}function Er(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Nr._fromErrorAndOperation(e,n,t,r);throw n})}async function Sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await pn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return kr._forOperation(e,"link",r)}async function Cr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(lt(r.app))return Promise.reject(Mt(r));const s="reauthenticate";try{const i=await pn(e,Er(r,s,t,e),n);Ft(i.idToken,r,"internal-error");const a=hn(i.idToken);Ft(a,r,"internal-error");const{sub:o}=a;return Ft(e.uid===o,r,"user-mismatch"),kr._forOperation(e,s,i)}catch(Fm){throw(null===Fm||void 0===Fm?void 0:Fm.code)==="auth/".concat("user-not-found")&&Pt(r,"user-mismatch"),Fm}}async function Ir(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(lt(e.app))return Promise.reject(Mt(e));const r="signIn",s=await Er(e,r,t),i=await kr._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Tr(e,t){return Ir(Kn(e),t)}async function jr(e){const t=Kn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Dr(e,t){return $t(e,"POST","/v2/accounts/mfaEnrollment:start",Jt(e,t))}new WeakMap;const Ar="__sak";class Pr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ar,"1"),this.storage.removeItem(Ar),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Or extends Pr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Ln()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Or.type="LOCAL";const Rr=Or;function Mr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Lr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Fr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Lr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Mr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Lr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Lr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Mr(n);const s=setInterval(()=>{const e=Mr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Fr.type="COOKIE";class Ur extends Pr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ur.type="SESSION";const Vr=Ur;class Br{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Br(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Br.receivers=[];class Kr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=zr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function qr(){return window}function Hr(){return"undefined"!==typeof qr().WorkerGlobalScope&&"function"===typeof qr().importScripts}const Wr="firebaseLocalStorageDb",Gr="firebaseLocalStorage",Qr="fbase_key";class Yr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xr(e,t){return e.transaction([Gr],t?"readwrite":"readonly").objectStore(Gr)}function Jr(){const e=indexedDB.open(Wr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Gr,{keyPath:Qr})}catch(Fm){n(Fm)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Gr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Wr);return new Yr(e).toPromise()}(),t(await Jr()))})})}async function $r(e,t,n){const r=Xr(e,!0).put({[Qr]:t,value:n});return new Yr(r).toPromise()}function Zr(e,t){const n=Xr(e,!0).delete(t);return new Yr(n).toPromise()}class es{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Jr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Fm){if(t++>3)throw Fm;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Br._getInstance(Hr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Kr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jr();return await $r(e,Ar,"1"),await Zr(e,Ar),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$r(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Xr(e,!1).get(t),r=await new Yr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Xr(e,!1).getAll();return new Yr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}es.type="LOCAL";const ts=es;function ns(e,t){return $t(e,"POST","/v2/accounts/mfaSignIn:start",Jt(e,t))}Gn("rcb"),new Ht(3e4,6e4);const rs="recaptcha";async function ss(e,t,n){if(!e._getRecaptchaConfig())try{await er(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ft("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Zn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Xn){Ft((null===n||void 0===n?void 0:n.type)===rs,e,"argument-error");return Dr(e,await is(e,t,n))}return Dr(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Ft("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ft(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Zn(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Xn){Ft((null===n||void 0===n?void 0:n.type)===rs,e,"argument-error");return ns(e,await is(e,t,n))}return ns(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Zn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Xn){Ft((null===n||void 0===n?void 0:n.type)===rs,e,"argument-error");return ur(e,await is(e,t,n))}return ur(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function is(e,t,n){Ft(n.type===rs,e,"argument-error");const r=await n.verify();Ft("string"===typeof r,e,"argument-error");const s=c({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class as{constructor(e){this.providerId=as.PROVIDER_ID,this.auth=Kn(e)}verifyPhoneNumber(e,t){return ss(this.auth,e,X(t))}static credential(e,t){return hr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return as.credentialFromTaggedObject(t)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?hr._fromTokenResponse(n,r):null}}function os(e,t){return t?_n(t):(Ft(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}as.PROVIDER_ID="phone",as.PHONE_SIGN_IN_METHOD="phone";class ls extends sr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cs(e){return Ir(e.auth,new ls(e),e.bypassAuthState)}function us(e){const{auth:t,user:n}=e;return Ft(n,t,"internal-error"),Cr(n,new ls(e),e.bypassAuthState)}async function ds(e){const{auth:t,user:n}=e;return Ft(n,t,"internal-error"),Sr(n,new ls(e),e.bypassAuthState)}class hs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Fm){this.reject(Fm)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Fm){this.reject(Fm)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cs;case"linkViaPopup":case"linkViaRedirect":return ds;case"reauthViaPopup":case"reauthViaRedirect":return us;default:Pt(this.auth,"internal-error")}}resolve(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fs=new Ht(2e3,1e4);class ps extends hs{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ft(e,this.auth,"internal-error"),e}async onExecution(){Vt(1===this.filter.length,"Popup operations only handle one event");const e=zr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,fs.get())};e()}}ps.currentPopupAction=null;const ms=new Map;class gs extends hs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ms.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=bs(t),r=vs(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Fm){e=()=>Promise.reject(Fm)}ms.set(this.auth._key(),e)}return this.bypassAuthState||ms.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ys(e,t){ms.set(e._key(),t)}function vs(e){return _n(e._redirectPersistence)}function bs(e){return Sn("pendingRedirect",e.config.apiKey,e.name)}async function ws(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(lt(e.app))return Promise.reject(Mt(e));const r=Kn(e),s=os(r,t),i=new gs(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class xs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _s(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!_s(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ot(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ks(e))}saveEventToCache(e){this.cachedEventUids.add(ks(e)),this.lastProcessedEventTime=Date.now()}}function ks(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function _s(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Es=/^https?/;async function Ss(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return $t(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Cs(r))return}catch(n){}Pt(e,"unauthorized-domain")}function Cs(e){const t=Bt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Es.test(n))return!1;if(Ns.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Is=new Ht(3e4,6e4);function Ts(){const e=qr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function js(e){return new Promise((t,n)=>{var r,s;function i(){Ts(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ts(),n(Ot(e,"network-request-failed"))},timeout:Is.get()})}if(null!==(r=qr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=qr().gapi)||void 0===s||!s.load){const t=Gn("iframefcb");return qr()[t]=()=>{gapi.load?i():n(Ot(e,"network-request-failed"))},Wn("".concat(Hn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Ds=null,e})}let Ds=null;const As=new Ht(5e3,15e3),Ps={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Os=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rs(e){const t=e.config;Ft(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Wt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:dt},s=Os.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(H(r).slice(1))}async function Ms(e){const t=await function(e){return Ds=Ds||js(e),Ds}(e),n=qr().gapi;return Ft(n,e,"internal-error"),t.open({where:document.body,url:Rs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ps,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Ot(e,"network-request-failed"),i=qr().setTimeout(()=>{r(s)},As.get());function a(){qr().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Ls={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Fm){}}}function Us(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=c(c({},Ls),{},{width:r.toString(),height:s.toString(),top:i,left:a}),u=R().toLowerCase();n&&(o=Dn(u)?"_blank":n),Tn(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:R())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Fs(null);const h=window.open(t||"",o,d);Ft(h,e,"popup-blocked");try{h.focus()}catch(Fm){}return new Fs(h)}const Vs="__/auth/handler",Bs="emulator/auth/handler",zs=encodeURIComponent("fac");async function Ks(e,t,n,r,s,i){Ft(e.config.authDomain,e,"auth-domain-config-required"),Ft(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:dt,eventId:s};if(t instanceof mr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof gr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(zs,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Vs);return Wt(t,Bs)}(e),"?").concat(H(o).slice(1)).concat(c)}const qs="webStorageSupport";const Hs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vr,this._completeRedirectFn=ws,this._overrideRedirectResult=ys}async _openPopup(e,t,n,r){var s;Vt(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Us(e,await Ks(e,t,n,Bt(),r),zr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){qr().location.href=e}(await Ks(e,t,n,Bt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Vt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ms(e),n=new xs(e);return t.register("authEvent",t=>{Ft(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qs,{type:qs},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[qs];void 0!==s&&t(!!s),Pt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ss(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fn()||jn()||Mn()}};var Ws="@firebase/auth",Gs="1.11.0";class Qs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ys=I("authIdTokenMaxAge")||300;let Xs=null;var Js;!function(e){Hn=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ot("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Js="Browser",at(new J("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ft(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Js,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(Js)},c=new zn(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_n);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),at(new J("auth-internal",e=>(e=>new Qs(e))(Kn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),pt(Ws,Gs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Js)),pt(Ws,Gs,"esm2020");pt("firebase","12.3.0","app");var $s,Zs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ei={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var s=0;s<16;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;s<16;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];let i,a=e.g[3];i=t+(a^n&(s^a))+r[0]+3614090360&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[1]+3905402710&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[2]+606105819&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[3]+3250441966&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[4]+4118548399&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[5]+1200080426&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[7]+4249261313&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[8]+1770035416&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[9]+2336552879&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[11]+2304563134&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[12]+1804603682&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[13]+4254626195&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[15]+1236535329&4294967295,i=t+(s^a&((n=s+(i<<22&4294967295|i>>>10))^s))+r[1]+4129170786&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[11]+643717713&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[0]+3921069994&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[5]+3593408605&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[15]+3634488961&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[4]+3889429448&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[9]+568446438&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[3]+4107603335&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[8]+1163531501&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[13]+2850285829&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[7]+1735328473&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[12]+2368359562&4294967295,i=t+((n=s+(i<<20&4294967295|i>>>12))^s^a)+r[5]+4294588738&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[8]+2272392833&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[11]+1839030562&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[14]+4259657740&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[1]+2763975236&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[4]+1272893353&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[7]+4139469664&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[10]+3200236656&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[13]+681279174&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[0]+3936430074&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[3]+3572445317&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[6]+76029189&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[9]+3654602809&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[12]+3873151461&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[15]+530742520&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[2]+3299628645&4294967295,i=t+(s^((n=s+(i<<23&4294967295|i>>>9))|~a))+r[0]+4096336452&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[7]+1126891415&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[14]+2878612391&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[12]+1700485571&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[3]+2399980690&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[10]+4293915773&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[8]+1873313359&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[15]+4264355552&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[6]+2734768916&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[4]+4149444226&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[11]+3174756917&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[2]+718787259&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let s=e.length-1;s>=0;s--){const i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,s=this.C;let i=this.h,a=0;for(;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var s={};function i(e){return-128<=e&&e<128?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);c.l(e)<=0&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||c.l(e)>0;)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const s=e.g.length-n,i=[];for(let r=0;r<s;r++)i[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const s=g(n,t).g;let i=(((n=f(n,s.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let s=0;for(let r=0;r<=t;r++){let t=s+(65535&this.i(r))+(65535&e.i(r)),i=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);s=i>>>16,t&=65535,i&=65535,n[r]=i<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(let t=0;t<e.g.length;t++){const r=this.i(s)>>>16,i=65535&this.i(s),a=e.i(t)>>>16,o=65535&e.i(t);n[2*s+2*t]+=i*o,p(n,2*s+2*t),n[2*s+2*t+1]+=r*o,p(n,2*s+2*t+1),n[2*s+2*t+1]+=i*a,p(n,2*s+2*t+1),n[2*s+2*t+2]+=r*a,p(n,2*s+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,ei.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let s=o;for(let o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+i),n);i<8?(i=a(Math.pow(n,i)),s=s.j(i).add(a(e))):(s=s.j(r),s=s.add(a(e)))}return s},$s=ei.Integer=r}).apply("undefined"!==typeof Zs?Zs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ti,ni,ri,si,ii,ai,oi,li,ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ui={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ci&&ci];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var s=s||{},i=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){i.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(Qm){p(Qm)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function _(){this.u=this.u,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(Qm){}return e}();function S(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,N),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),T=0;function j(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++T,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function A(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function L(e,t){const n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=i>=0)&&Array.prototype.splice.call(s,i,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let s=0;s<e.length;++s){const i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}M.prototype.add=function(e,t,n,r,s){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const a=F(e,t,r,s);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new j(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function B(e,t,n,r,s){if(r&&r.once)return K(e,t,n,r,s);if(Array.isArray(t)){for(let i=0;i<t.length;i++)B(e,t[i],n,r,s);return null}return n=X(n),e&&e[I]?e.J(t,n,a(r)?!!r.capture:!!r,s):z(e,t,n,!1,r,s)}function z(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");const o=a(s)?!!s.capture:!!s;let l=Q(e);if(l||(e[U]=l=new M(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,s){if(Array.isArray(t)){for(let i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=X(n),e&&e[I]?e.K(t,n,a(r)?!!r.capture:!!r,s):z(e,t,n,!0,r,s)}function q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[I]?(e=e.i,(i=String(t).toString())in e.g&&((n=F(t=e.g[i],n,r,s))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,s)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])L(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(L(n,e),0==n.h&&(n.src=null,t[U]=null)):D(e)}}}function W(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof M?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){_.call(this),this.i=new M(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var s=t;R(t=new N(r,e),s)}let i,a;if(s=!0,n)for(a=n.length-1;a>=0;a--)i=t.g=n[a],s=Z(i,r,!0,t)&&s;if(i=t.g=e,s=Z(i,r,!0,t)&&s,s=Z(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)i=t.g=n[a],s=Z(i,r,!1,t)&&s}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let s=!0;for(let i=0;i<t.length;++i){const a=t[i];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&L(e.i,a),s=!1!==t.call(n,r)&&s}}return s&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,_),J.prototype[I]=!0,J.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)D(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends _{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){_.call(this),this.h=e,this.g={}}u(ne,_);var re=[];function se(e){A(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),se(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=i.JSON.stringify,ae=i.JSON.parse,oe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){N.call(this,"d")}function he(){N.call(this,"c")}u(de,N),u(he,N);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){N.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){N.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function we(e,t){N.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function ke(){this.g=!0}function _e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(let e=1;e<r.length;e++)r[e]=""}}}return ie(i)}catch(Jm){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,N),fe.STAT_EVENT="statevent",u(ve,N),fe.Ja="timingevent",u(we,N),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var Ne,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Se={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ie(e){return encodeURIComponent(String(e))}function Te(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ne=new Ce;var Ae={},Pe={};function Oe(e,t,n){e.M=1,e.A=it(et(t)),e.u=n,e.R=!0,Re(e,null)}function Re(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var s="readystatechange";Array.isArray(s)||(s&&(re[0]=s.toString()),s=re);for(let i=0;i<s.length;i++){const e=B(n,s[i],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i){var a="",o=i.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Le(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?Ae:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function Be(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,se(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Ke(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(eg){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Kt(n)}Xt(n),be(18)}}else n.xa=s[1],0<n.xa-n.K&&s[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!S(t))for(s=n.Ba.g.parse(t),t=0;t<s.length;t++){let l=s[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const s=l[4];null!=s&&(n.za=s,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,st(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ve(o),Fe(o)),r.g=a}else Yt(r);n.i.length>0&&Ht(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(eg){}}je.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,s=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Be(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(s&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,s=this.g;if((r=s.g?s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),ze(this),Be(this);break e}_e(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ke(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Le(this,n),t==Pe){4==l&&(this.m=4,be(14),e=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ae){this.m=4,be(15),_e(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}_e(this.i,this.l,t,null),Ke(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(o),o.P=!0,be(11))}}else _e(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Be(this)}else _e(this.i,this.l,n,null),Ke(this,n);4==l&&ze(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(S(e[r]))continue;var n=Te(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ze(this),Be(this)}}}catch(Hi){}},je.prototype.cancel=function(){this.K=!0,ze(this)},je.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),ze(this),this.m=2,Be(this)):Ue(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}He.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new pt(t,e.l))}function st(e,t,n){e.i.set(t,n)}function it(e){return st(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");const e=[];for(let t=0;t<s.length;){const n=s[t++];"."==n?r&&t==s.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==s.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let s,i=null;r>=0?(s=e[n].substring(0,r),i=e[n].substring(r+1)):s=e[n],t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Jm){}}function _t(){this.g=new oe}function Nt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Et(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function St(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Tt(e){let t="";return A(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tt(n),"string"===typeof e?null!=n&&Ie(n):st(e,t,n))}function Dt(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const s=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=s;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(Nt,le),Nt.prototype.g=function(){return new Et(this.i,this.h)},u(Et,J),(e=Et.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;St(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):It(this),3==this.readyState&&St(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Dt,J);var At=/^https?$/i,Pt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Rt(e),Lt(e)}function Rt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof s)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const s=e.ca();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){let t=String(e.D).match($e)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),r=!At.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(ng){a=""}e.l=a+" ["+e.ca()+"]",Rt(e)}}finally{Lt(e)}}}function Lt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||$(e,"ready");try{n.onreadystatechange=null}catch(Xm){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(rg){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new _t,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(st(n,"SID",e.M),st(n,"RID",t),st(n,"TYPE","terminate"),Gt(e,n),(t=new je(e,e.j,t)).M=2,t.A=it(et(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(Xm){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Kt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function qt(e){Kt(e),e.v&&(i.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Ht(e){if(!We(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Wt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);st(r,"SID",e.M),st(r,"RID",n),st(r,"AID",e.K),Gt(e,r),e.u&&e.o&&jt(r,e.u,e.o),n=new je(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function Gt(e,t){e.H&&A(e.H,function(e,n){st(t,n,e)}),e.l&&A({},function(e,n){st(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var i=s[c].g;const n=s[c].map;if((i-=t)<0)t=Math.max(0,s[c].g-100),l=!1;else try{i="req"+i+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=ie(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(hi){throw e.push(i+"type="+encodeURIComponent("_badmap")),hi}}catch(hi){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);st(t,"RID","rpc"),st(t,"SID",e.M),st(t,"AID",e.K),st(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&st(t,"TO",e.ia),st(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&jt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=it(et(t)),n.u=null,n.R=!0,Re(n,e)}function Zt(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Jt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;$(r=me(),new we(r,n)),Ht(e)}else Yt(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),s){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||tt(r,"https"),it(r),t?function(e,t){const n=new ke;if(i.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),s&&nt(e,s),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&st(r,n,t),st(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Dt(new Nt({ab:n})):new Dt(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){J.call(this),this.g=new Bt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!S(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!S(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Dt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ne.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Jm){return void Ot(this,Jm)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Pt,t,void 0)>=0)||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(Jm){Ot(this,Jm)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Lt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),Dt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(Hm){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(Hm){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Bt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Ht(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new je(this,this.j,e);let i=this.o;if(this.U&&(i?(i=P(i),R(i,this.U)):i=this.U),null!==this.u||this.R||(s.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,s,t),st(n=et(this.J),"RID",e),st(n,"CVER",22),this.G&&st(n,"X-HTTP-Session-Id",this.G),Gt(this,n),i&&(this.R?t="headers="+Ie(Tt(i))+"&"+t:this.u&&jt(n,this.u,i)),Ye(this.h,s),this.Ra&&st(n,"TYPE","init"),this.S?(st(n,"$req",t),st(n,"SID","null"),s.U=!0,Oe(s,n,null)):Oe(s,n,t),this.I=2}}else 3==this.I&&(e?Wt(this,e):0==this.i.length||We(this.h)||Wt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Kt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Kt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,J),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){zt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ie(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Ht(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,on),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,li=ui.createWebChannelTransport=function(){return new ln},oi=ui.getStatEventTarget=function(){return me()},ai=ui.Event=fe,ii=ui.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,si=ui.ErrorCode=Ee,Se.COMPLETE="complete",ri=ui.EventType=Se,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,ni=ui.WebChannel=ce,ui.FetchXmlHttpFactory=Nt,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,ti=ui.XhrIo=Dt}).apply("undefined"!==typeof ci?ci:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const di="@firebase/firestore",hi="4.9.2";class fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");let pi="12.3.0";const mi=new oe("@firebase/firestore");function gi(){return mi.logLevel}function yi(e){if(mi.logLevel<=ne.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(wi);mi.debug("Firestore (".concat(pi,"): ").concat(e),...s)}}function vi(e){if(mi.logLevel<=ne.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(wi);mi.error("Firestore (".concat(pi,"): ").concat(e),...s)}}function bi(e){if(mi.logLevel<=ne.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(wi);mi.warn("Firestore (".concat(pi,"): ").concat(e),...s)}}function wi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Um){return e}}function xi(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ki(e,r,n)}function ki(e,t,n){let r="FIRESTORE (".concat(pi,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw vi(r),new Error(r)}function _i(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||ki(t,s,r)}function Ni(e,t){return e}const Ei={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Si extends V{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ii{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ti{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fi.UNAUTHENTICATED))}shutdown(){}}class ji{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Di{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_i(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ci,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{yi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(yi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ci)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(yi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_i("string"==typeof t.accessToken,31837,{l:t}),new Ii(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _i(null===e||"string"==typeof e,2055,{h:e}),new fi(e)}}class Ai{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Pi{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ai(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ri{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_i(void 0===this.o,3512);const n=e=>{null!=e.error&&yi("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,yi("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{yi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):yi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(_i("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Oi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Mi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Li{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Mi(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Fi(e,t){return e<t?-1:e>t?1:0}function Ui(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return zi(n)===zi(s)?Fi(n,s):zi(n)?1:-1}return Fi(e.length,t.length)}const Vi=55296,Bi=57343;function zi(e){const t=e.charCodeAt(0);return t>=Vi&&t<=Bi}function Ki(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function qi(e){return e+"\0"}const Hi="__name__";class Wi{constructor(e,t,n){void 0===t?t=0:t>e.length&&xi(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&xi(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Wi.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Fi(e.length,t.length)}static compareSegments(e,t){const n=Wi.isNumericId(e),r=Wi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Wi.extractNumericId(e).compare(Wi.extractNumericId(t)):Ui(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class Gi extends Wi{construct(e,t,n){return new Gi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Si(Ei.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Gi(e)}static emptyPath(){return new Gi([])}}const Qi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yi extends Wi{construct(e,t,n){return new Yi(e,t,n)}static isValidIdentifier(e){return Qi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Hi}static keyField(){return new Yi([Hi])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Si(Ei.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Si(Ei.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Si(Ei.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Si(Ei.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yi(t)}static emptyPath(){return new Yi([])}}class Xi{constructor(e){this.path=e}static fromPath(e){return new Xi(Gi.fromString(e))}static fromName(e){return new Xi(Gi.fromString(e).popFirst(5))}static empty(){return new Xi(Gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xi(new Gi(e.slice()))}}function Ji(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function $i(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":xi(12329,{type:typeof e})}function Zi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Si(Ei.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$i(e);throw new Si(Ei.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function ea(e,t){const n={typeString:e};return t&&(n.value=t),n}function ta(e,t){if(!Ji(e))throw new Si(Ei.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Si(Ei.INVALID_ARGUMENT,n);return!0}const na=-62135596800,ra=1e6;class sa{static now(){return sa.fromMillis(Date.now())}static fromDate(e){return sa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ra);return new sa(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Si(Ei.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Si(Ei.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<na)throw new Si(Ei.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Si(Ei.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ra}_compareTo(e){return this.seconds===e.seconds?Fi(this.nanoseconds,e.nanoseconds):Fi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,sa._jsonSchema))return new sa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-na;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sa._jsonSchemaVersion="firestore/timestamp/1.0",sa._jsonSchema={type:ea("string",sa._jsonSchemaVersion),seconds:ea("number"),nanoseconds:ea("number")};class ia{static fromTimestamp(e){return new ia(e)}static min(){return new ia(new sa(0,0))}static max(){return new ia(new sa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const aa=-1;class oa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function la(e){return e.fields.find(e=>2===e.kind)}function ca(e){return e.fields.filter(e=>2!==e.kind)}oa.UNKNOWN_ID=-1;class ua{constructor(e,t){this.fieldPath=e,this.kind=t}}class da{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new da(0,pa.min())}}function ha(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ia.fromTimestamp(1e9===r?new sa(n+1,0):new sa(n,r));return new pa(s,Xi.empty(),t)}function fa(e){return new pa(e.readTime,e.key,aa)}class pa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pa(ia.min(),Xi.empty(),aa)}static max(){return new pa(ia.max(),Xi.empty(),aa)}}function ma(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Xi.comparator(e.documentKey,t.documentKey),0!==n?n:Fi(e.largestBatchId,t.largestBatchId))}const ga="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ya{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function va(e){if(e.code!==Ei.FAILED_PRECONDITION||e.message!==ga)throw e;yi("LocalStore","Unexpectedly lost primary lease")}class ba{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ba((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ba?t:ba.resolve(t)}catch(e){return ba.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ba.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ba.reject(t)}static resolve(e){return new ba((t,n)=>{t(e)})}static reject(e){return new ba((t,n)=>{n(e)})}static waitFor(e){return new ba((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=ba.resolve(!1);for(const n of e)t=t.next(e=>e?ba.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ba((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new ba((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}const wa="SimpleDb";class xa{static open(e,t,n,r){try{return new xa(t,e.transaction(r,n))}catch(e){throw new Ea(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ci,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ea(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=ja(t.target.error);this.S.reject(new Ea(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(yi(wa,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ca(t)}}class ka{static delete(e){return yi(wa,"Removing database:",e),Ia(N().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!U())return!1;if(ka.F())return!0;const e=R(),t=ka.M(e),n=0<t&&t<10,r=_a(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===ka.M(R())&&vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(yi(wa,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ea(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Si(Ei.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Si(Ei.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ea(e,r))},r.onupgradeneeded=e=>{yi(wa,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{yi(wa,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.L(e);const t=xa.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),ba.reject(e))).toPromise();return i.catch(()=>{}),await t.D,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(yi(wa,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _a(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Na{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ia(this.U.delete())}}class Ea extends Si{constructor(e,t){super(Ei.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Sa(e){return"IndexedDbTransactionError"===e.name}class Ca{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(yi(wa,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(yi(wa,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ia(n)}add(e){return yi(wa,"ADD",this.store.name,e,e),Ia(this.store.add(e))}get(e){return Ia(this.store.get(e)).next(t=>(void 0===t&&(t=null),yi(wa,"GET",this.store.name,e,t),t))}delete(e){return yi(wa,"DELETE",this.store.name,e),Ia(this.store.delete(e))}count(){return yi(wa,"COUNT",this.store.name),Ia(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new ba((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.H(e,(e,n)=>{t.push(n)}).next(()=>t)}}Y(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ba((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Z(e,t){yi(wa,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}te(e){const t=this.cursor({});return new ba((n,r)=>{t.onerror=e=>{const t=ja(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}H(e,t){const n=[];return new ba((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new Na(s),a=t(s.primaryKey,s.value,i);if(a instanceof ba){const e=a.catch(e=>(i.done(),ba.reject(e)));n.push(e)}i.isDone?r():null===i.G?s.continue():s.continue(i.G)}}).next(()=>ba.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ia(e){return new ba((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ja(e.target.error);n(t)}})}let Ta=!1;function ja(e){const t=ka.M(R());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Si("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ta||(Ta=!0,setTimeout(()=>{throw e},0)),e}}return e}const Da="IndexBackfiller";class Aa{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){yi(Da,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();yi(Da,"Documents written: ".concat(e))}catch(e){Sa(e)?yi(Da,"Ignoring IndexedDB error during index backfill: ",e):await va(e)}await this.re(6e4)})}}class Pa{constructor(e,t){this.localStore=e,this.persistence=t}async ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,s=!0;return ba.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return yi(Da,"Processing collection: ".concat(t)),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(r,n)).next(n=>(yi(Da,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=fa(t);ma(r,n)>0&&(n=r)}),new pa(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Oa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oa.ce=-1;const Ra=-1;function Ma(e){return null==e}function La(e){return 0===e&&1/e==-1/0}const Fa="\x01";function Ua(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ba(t)),t=Va(e.get(n),t);return Ba(t)}function Va(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Fa:n+="\x01\x11";break;default:n+=t}}return n}function Ba(e){return e+Fa+"\x01"}function za(e){const t=e.length;if(_i(t>=2,64408,{path:e}),2===t)return _i(e.charAt(0)===Fa&&"\x01"===e.charAt(1),56145,{path:e}),Gi.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf(Fa,i);switch((t<0||t>n)&&xi(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:xi(61167,{path:e})}i=t+2}return new Gi(r)}const Ka="remoteDocuments",qa="owner",Ha="owner",Wa="mutationQueues",Ga="mutations",Qa="batchId",Ya="userMutationsIndex",Xa=["userId","batchId"];function Ja(e,t){return[e,Ua(t)]}function $a(e,t,n){return[e,Ua(t),n]}const Za={},eo="documentMutations",to="remoteDocumentsV14",no=["prefixPath","collectionGroup","readTime","documentId"],ro="documentKeyIndex",so=["prefixPath","collectionGroup","documentId"],io="collectionGroupIndex",ao=["collectionGroup","readTime","prefixPath","documentId"],oo="remoteDocumentGlobal",lo="remoteDocumentGlobalKey",co="targets",uo="queryTargetsIndex",ho=["canonicalId","targetId"],fo="targetDocuments",po=["targetId","path"],mo="documentTargetsIndex",go=["path","targetId"],yo="targetGlobalKey",vo="targetGlobal",bo="collectionParents",wo=["collectionId","parent"],xo="clientMetadata",ko="bundles",_o="namedQueries",No="indexConfiguration",Eo="collectionGroupIndex",So="indexState",Co=["indexId","uid"],Io="sequenceNumberIndex",To=["uid","sequenceNumber"],jo="indexEntries",Do=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ao="documentKeyIndex",Po=["indexId","uid","orderedDocumentKey"],Oo="documentOverlays",Ro=["userId","collectionPath","documentId"],Mo="collectionPathOverlayIndex",Lo=["userId","collectionPath","largestBatchId"],Fo="collectionGroupOverlayIndex",Uo=["userId","collectionGroup","largestBatchId"],Vo="globals",Bo=[Wa,Ga,eo,Ka,co,qa,vo,fo,xo,oo,bo,ko,_o],zo=[...Bo,Oo],Ko=[Wa,Ga,eo,to,co,qa,vo,fo,xo,oo,bo,ko,_o,Oo],qo=Ko,Ho=[...qo,No,So,jo],Wo=Ho,Go=[...Ho,Vo],Qo=Go;class Yo extends ya{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Xo(e,t){const n=Ni(e);return ka.O(n.le,t)}function Jo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $o(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Zo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class el{constructor(e,t){this.comparator=e,this.root=t||nl.EMPTY}insert(e,t){return new el(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nl.BLACK,null,null))}remove(e){return new el(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nl{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:nl.RED,this.left=null!=r?r:nl.EMPTY,this.right=null!=s?s:nl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new nl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return nl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xi(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xi(27949);return e+(this.isRed()?0:1)}}nl.EMPTY=null,nl.RED=!0,nl.BLACK=!1,nl.EMPTY=new class{constructor(){this.size=0}get key(){throw xi(57766)}get value(){throw xi(16141)}get color(){throw xi(16727)}get left(){throw xi(29726)}get right(){throw xi(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new nl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rl{constructor(e){this.comparator=e,this.data=new el(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sl(this.data.getIterator())}getIteratorFrom(e){return new sl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof rl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rl(this.comparator);return t.data=e,t}}class sl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function il(e){return e.hasNext()?e.getNext():void 0}class al{constructor(e){this.fields=e,e.sort(Yi.comparator)}static empty(){return new al([])}unionWith(e){let t=new rl(Yi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new al(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ki(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ol extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ll{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ol("Invalid base64 string: "+e):e}}(e);return new ll(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ll(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ll.EMPTY_BYTE_STRING=new ll("");const cl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(e){if(_i(!!e,39018),"string"==typeof e){let t=0;const n=cl.exec(e);if(_i(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:dl(e.seconds),nanos:dl(e.nanos)}}function dl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function hl(e){return"string"==typeof e?ll.fromBase64String(e):ll.fromUint8Array(e)}const fl="server_timestamp",pl="__type__",ml="__previous_value__",gl="__local_write_time__";function yl(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[pl])||void 0===t?void 0:t.stringValue)===fl}function vl(e){const t=e.mapValue.fields[ml];return yl(t)?vl(t):t}function bl(e){const t=ul(e.mapValue.fields[gl].timestampValue);return new sa(t.seconds,t.nanos)}class wl{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const xl="(default)";class kl{constructor(e,t){this.projectId=e,this.database=t||xl}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===xl}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}const _l="__type__",Nl="__max__",El={mapValue:{fields:{__type__:{stringValue:Nl}}}},Sl="__vector__",Cl="value",Il={nullValue:"NULL_VALUE"};function Tl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yl(e)?4:Hl(e)?9007199254740991:Kl(e)?10:11:xi(28295,{value:e})}function jl(e,t){if(e===t)return!0;const n=Tl(e);if(n!==Tl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bl(e).isEqual(bl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ul(e.timestampValue),r=ul(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return hl(e.bytesValue).isEqual(hl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return dl(e.geoPointValue.latitude)===dl(t.geoPointValue.latitude)&&dl(e.geoPointValue.longitude)===dl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return dl(e.integerValue)===dl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=dl(e.doubleValue),r=dl(t.doubleValue);return n===r?La(n)===La(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ki(e.arrayValue.values||[],t.arrayValue.values||[],jl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jo(n)!==Jo(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!jl(n[s],r[s])))return!1;return!0}(e,t);default:return xi(52216,{left:e})}}function Dl(e,t){return void 0!==(e.values||[]).find(e=>jl(e,t))}function Al(e,t){if(e===t)return 0;const n=Tl(e),r=Tl(t);if(n!==r)return Fi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=dl(e.integerValue||e.doubleValue),r=dl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pl(e.timestampValue,t.timestampValue);case 4:return Pl(bl(e),bl(t));case 5:return Ui(e.stringValue,t.stringValue);case 6:return function(e,t){const n=hl(e),r=hl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Fi(n[s],r[s]);if(0!==e)return e}return Fi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Fi(dl(e.latitude),dl(t.latitude));return 0!==n?n:Fi(dl(e.longitude),dl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ol(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,s,i){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Cl])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Cl])||void 0===r?void 0:r.arrayValue,u=Fi((null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ol(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===El.mapValue&&t===El.mapValue)return 0;if(e===El.mapValue)return 1;if(t===El.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Ui(r[a],i[a]);if(0!==e)return e;const t=Al(n[r[a]],s[i[a]]);if(0!==t)return t}return Fi(r.length,i.length)}(e.mapValue,t.mapValue);default:throw xi(23264,{he:n})}}function Pl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Fi(e,t);const n=ul(e),r=ul(t),s=Fi(n.seconds,r.seconds);return 0!==s?s:Fi(n.nanos,r.nanos)}function Ol(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Al(n[s],r[s]);if(e)return e}return Fi(n.length,r.length)}function Rl(e){return Ml(e)}function Ml(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ul(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return hl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Xi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ml(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Ml(e.fields[s]));return n+"}"}(e.mapValue):xi(61005,{value:e})}function Ll(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Fl(e){return!!e&&"integerValue"in e}function Ul(e){return!!e&&"arrayValue"in e}function Vl(e){return!!e&&"nullValue"in e}function Bl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zl(e){return!!e&&"mapValue"in e}function Kl(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[_l])||void 0===t?void 0:t.stringValue)===Sl}function ql(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $o(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ql(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ql(e.arrayValue.values[n]);return t}return c({},e)}function Hl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Nl}const Wl={mapValue:{fields:{[_l]:{stringValue:Sl},[Cl]:{arrayValue:{}}}}};function Gl(e){return"nullValue"in e?Il:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ll(kl.empty(),Xi.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Kl(e)?Wl:{mapValue:{}}:xi(35942,{value:e})}function Ql(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ll(kl.empty(),Xi.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Wl:"mapValue"in e?Kl(e)?{mapValue:{}}:El:xi(61959,{value:e})}function Yl(e,t){const n=Al(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Xl(e,t){const n=Al(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Jl{constructor(e){this.value=e}static empty(){return new Jl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ql(t)}setAll(e){let t=Yi.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=ql(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){$o(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Jl(ql(this.value))}}class $l{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new $l(e,0,ia.min(),ia.min(),ia.min(),Jl.empty(),0)}static newFoundDocument(e,t,n,r){return new $l(e,1,t,ia.min(),n,r,0)}static newNoDocument(e,t){return new $l(e,2,t,ia.min(),ia.min(),Jl.empty(),0)}static newUnknownDocument(e,t){return new $l(e,3,t,ia.min(),ia.min(),Jl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ia.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ia.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $l&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $l(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Zl{constructor(e,t){this.position=e,this.inclusive=t}}function ec(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Xi.comparator(Xi.fromName(a.referenceValue),n.key):Al(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function tc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!jl(e.position[n],t.position[n]))return!1;return!0}class nc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function rc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class sc{}class ic extends sc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new mc(e,t,n):"array-contains"===t?new bc(e,n):"in"===t?new wc(e,n):"not-in"===t?new xc(e,n):"array-contains-any"===t?new kc(e,n):new ic(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new gc(e,n):new yc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Al(t,this.value)):null!==t&&Tl(this.value)===Tl(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ac extends sc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ac(e,t)}matches(e){return oc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oc(e){return"and"===e.op}function lc(e){return"or"===e.op}function cc(e){return uc(e)&&oc(e)}function uc(e){for(const t of e.filters)if(t instanceof ac)return!1;return!0}function dc(e){if(e instanceof ic)return e.field.canonicalString()+e.op.toString()+Rl(e.value);if(cc(e))return e.filters.map(e=>dc(e)).join(",");{const t=e.filters.map(e=>dc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function hc(e,t){return e instanceof ic?function(e,t){return t instanceof ic&&e.op===t.op&&e.field.isEqual(t.field)&&jl(e.value,t.value)}(e,t):e instanceof ac?function(e,t){return t instanceof ac&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&hc(n,t.filters[r]),!0)}(e,t):void xi(19439)}function fc(e,t){const n=e.filters.concat(t);return ac.create(n,e.op)}function pc(e){return e instanceof ic?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rl(e.value))}(e):e instanceof ac?function(e){return e.op.toString()+" {"+e.getFilters().map(pc).join(" ,")+"}"}(e):"Filter"}class mc extends ic{constructor(e,t,n){super(e,t,n),this.key=Xi.fromName(n.referenceValue)}matches(e){const t=Xi.comparator(e.key,this.key);return this.matchesComparison(t)}}class gc extends ic{constructor(e,t){super(e,"in",t),this.keys=vc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yc extends ic{constructor(e,t){super(e,"not-in",t),this.keys=vc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Xi.fromName(e.referenceValue))}class bc extends ic{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ul(t)&&Dl(t.arrayValue,this.value)}}class wc extends ic{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dl(this.value.arrayValue,t)}}class xc extends ic{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Dl(this.value.arrayValue,t)}}class kc extends ic{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Dl(this.value.arrayValue,e))}}class _c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function Nc(e){return new _c(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ec(e){const t=Ni(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>dc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ma(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Rl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Rl(e)).join(",")),t.Te=e}return t.Te}function Sc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tc(e.startAt,t.startAt)&&tc(e.endAt,t.endAt)}function Cc(e){return Xi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ic(e,t){return e.filters.filter(e=>e instanceof ic&&e.field.isEqual(t))}function Tc(e,t,n){let r=Il,s=!0;for(const i of Ic(e,t)){let e=Il,t=!0;switch(i.op){case"<":case"<=":e=Gl(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=Il}Yl({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Yl({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function jc(e,t,n){let r=El,s=!0;for(const i of Ic(e,t)){let e=El,t=!0;switch(i.op){case">=":case">":e=Ql(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=El}Xl({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Xl({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class Dc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ac(e,t,n,r,s,i,a,o){return new Dc(e,t,n,r,s,i,a,o)}function Pc(e){return new Dc(e)}function Oc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Rc(e){return null!==e.collectionGroup}function Mc(e){const t=Ni(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new rl(Yi.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new nc(r,n))}),e.has(Yi.keyField().canonicalString())||t.Ie.push(new nc(Yi.keyField(),n))}return t.Ie}function Lc(e){const t=Ni(e);return t.Ee||(t.Ee=Fc(t,Mc(e))),t.Ee}function Fc(e,t){if("F"===e.limitType)return Nc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new nc(e.field,t)});const n=e.endAt?new Zl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Zl(e.startAt.position,e.startAt.inclusive):null;return Nc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Uc(e,t,n){return new Dc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vc(e,t){return Sc(Lc(e),Lc(t))&&e.limitType===t.limitType}function Bc(e){return"".concat(Ec(Lc(e)),"|lt:").concat(e.limitType)}function zc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>pc(e)).join(", "),"]")),Ma(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Rl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Rl(e)).join(",")),"Target(".concat(t,")")}(Lc(e)),"; limitType=").concat(e.limitType,")")}function Kc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Mc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ec(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Mc(e),t))&&!(e.endAt&&!function(e,t,n){const r=ec(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Mc(e),t))}(e,t)}function qc(e){return(t,n)=>{let r=!1;for(const s of Mc(e)){const e=Hc(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Hc(e,t,n){const r=e.field.isKeyField()?Xi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Al(r,s):xi(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xi(19790,{direction:e.dir})}}class Wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Zo(this.inner)}size(){return this.innerSize}}const Gc=new el(Xi.comparator);function Qc(){return Gc}const Yc=new el(Xi.comparator);function Xc(){let e=Yc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Jc(e){let t=Yc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function $c(){return eu()}function Zc(){return eu()}function eu(){return new Wc(e=>e.toString(),(e,t)=>e.isEqual(t))}const tu=new el(Xi.comparator),nu=new rl(Xi.comparator);function ru(){let e=nu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const su=new rl(Fi);function iu(){return su}function au(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:La(t)?"-0":t}}function ou(e){return{integerValue:""+e}}class lu{constructor(){this._=void 0}}function cu(e,t,n){return e instanceof hu?function(e,t){const n={fields:{[pl]:{stringValue:fl},[gl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yl(t)&&(t=vl(t)),t&&(n.fields[ml]=t),{mapValue:n}}(n,t):e instanceof fu?pu(e,t):e instanceof mu?gu(e,t):function(e,t){const n=du(e,t),r=vu(n)+vu(e.Ae);return Fl(n)&&Fl(e.Ae)?ou(r):au(e.serializer,r)}(e,t)}function uu(e,t,n){return e instanceof fu?pu(e,t):e instanceof mu?gu(e,t):n}function du(e,t){return e instanceof yu?function(e){return Fl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class hu extends lu{}class fu extends lu{constructor(e){super(),this.elements=e}}function pu(e,t){const n=bu(t);for(const r of e.elements)n.some(e=>jl(e,r))||n.push(r);return{arrayValue:{values:n}}}class mu extends lu{constructor(e){super(),this.elements=e}}function gu(e,t){let n=bu(t);for(const r of e.elements)n=n.filter(e=>!jl(e,r));return{arrayValue:{values:n}}}class yu extends lu{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vu(e){return dl(e.integerValue||e.doubleValue)}function bu(e){return Ul(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wu{constructor(e,t){this.field=e,this.transform=t}}class xu{constructor(e,t){this.version=e,this.transformResults=t}}class ku{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ku}static exists(e){return new ku(void 0,e)}static updateTime(e){return new ku(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Nu{}function Eu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ou(e.key,ku.none()):new Tu(e.key,e.data,ku.none());{const n=e.data,r=Jl.empty();let s=new rl(Yi.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ju(e.key,r,new al(s.toArray()),ku.none())}}function Su(e,t,n){e instanceof Tu?function(e,t,n){const r=e.value.clone(),s=Au(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ju?function(e,t,n){if(!_u(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Au(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Du(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cu(e,t,n,r){return e instanceof Tu?function(e,t,n,r){if(!_u(e.precondition,t))return n;const s=e.value.clone(),i=Pu(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ju?function(e,t,n,r){if(!_u(e.precondition,t))return n;const s=Pu(e.fieldTransforms,r,t),i=t.data;return i.setAll(Du(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return _u(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Iu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ki(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fu&&t instanceof fu||e instanceof mu&&t instanceof mu?Ki(e.elements,t.elements,jl):e instanceof yu&&t instanceof yu?jl(e.Ae,t.Ae):e instanceof hu&&t instanceof hu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Tu extends Nu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ju extends Nu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Du(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Au(e,t,n){const r=new Map;_i(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,uu(a,o,n[s]))}return r}function Pu(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,cu(e,i,t))}return r}class Ou extends Nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ru extends Nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Su(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Cu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Cu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zc();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Eu(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(ia.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ru())}isEqual(e){return this.batchId===e.batchId&&Ki(this.mutations,e.mutations,(e,t)=>Iu(e,t))&&Ki(this.baseMutations,e.baseMutations,(e,t)=>Iu(e,t))}}class Lu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_i(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=tu;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Lu(e,t,n,r)}}class Fu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var Uu,Vu;function Bu(e){switch(e){case Ei.OK:return xi(64938);case Ei.CANCELLED:case Ei.UNKNOWN:case Ei.DEADLINE_EXCEEDED:case Ei.RESOURCE_EXHAUSTED:case Ei.INTERNAL:case Ei.UNAVAILABLE:case Ei.UNAUTHENTICATED:return!1;case Ei.INVALID_ARGUMENT:case Ei.NOT_FOUND:case Ei.ALREADY_EXISTS:case Ei.PERMISSION_DENIED:case Ei.FAILED_PRECONDITION:case Ei.ABORTED:case Ei.OUT_OF_RANGE:case Ei.UNIMPLEMENTED:case Ei.DATA_LOSS:return!0;default:return xi(15467,{code:e})}}function zu(e){if(void 0===e)return vi("GRPC error has no .code"),Ei.UNKNOWN;switch(e){case Uu.OK:return Ei.OK;case Uu.CANCELLED:return Ei.CANCELLED;case Uu.UNKNOWN:return Ei.UNKNOWN;case Uu.DEADLINE_EXCEEDED:return Ei.DEADLINE_EXCEEDED;case Uu.RESOURCE_EXHAUSTED:return Ei.RESOURCE_EXHAUSTED;case Uu.INTERNAL:return Ei.INTERNAL;case Uu.UNAVAILABLE:return Ei.UNAVAILABLE;case Uu.UNAUTHENTICATED:return Ei.UNAUTHENTICATED;case Uu.INVALID_ARGUMENT:return Ei.INVALID_ARGUMENT;case Uu.NOT_FOUND:return Ei.NOT_FOUND;case Uu.ALREADY_EXISTS:return Ei.ALREADY_EXISTS;case Uu.PERMISSION_DENIED:return Ei.PERMISSION_DENIED;case Uu.FAILED_PRECONDITION:return Ei.FAILED_PRECONDITION;case Uu.ABORTED:return Ei.ABORTED;case Uu.OUT_OF_RANGE:return Ei.OUT_OF_RANGE;case Uu.UNIMPLEMENTED:return Ei.UNIMPLEMENTED;case Uu.DATA_LOSS:return Ei.DATA_LOSS;default:return xi(39323,{code:e})}}(Vu=Uu||(Uu={}))[Vu.OK=0]="OK",Vu[Vu.CANCELLED=1]="CANCELLED",Vu[Vu.UNKNOWN=2]="UNKNOWN",Vu[Vu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vu[Vu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vu[Vu.NOT_FOUND=5]="NOT_FOUND",Vu[Vu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vu[Vu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vu[Vu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vu[Vu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vu[Vu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vu[Vu.ABORTED=10]="ABORTED",Vu[Vu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vu[Vu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vu[Vu.INTERNAL=13]="INTERNAL",Vu[Vu.UNAVAILABLE=14]="UNAVAILABLE",Vu[Vu.DATA_LOSS=15]="DATA_LOSS";new $s([4294967295,4294967295],0);Error;const Ku={asc:"ASCENDING",desc:"DESCENDING"},qu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hu={and:"AND",or:"OR"};class Wu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gu(e,t){return e.useProto3Json||Ma(t)?t:{value:t}}function Qu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Yu(e,t){return Qu(e,t.toTimestamp())}function Xu(e){return _i(!!e,49232),ia.fromTimestamp(function(e){const t=ul(e);return new sa(t.seconds,t.nanos)}(e))}function Ju(e,t){return $u(e,t).canonicalString()}function $u(e,t){const n=function(e){return new Gi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Zu(e){const t=Gi.fromString(e);return _i(xd(t),10190,{key:t.toString()}),t}function ed(e,t){return Ju(e.databaseId,t.path)}function td(e,t){const n=Zu(t);if(n.get(1)!==e.databaseId.projectId)throw new Si(Ei.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Si(Ei.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xi(id(n))}function nd(e,t){return Ju(e.databaseId,t)}function rd(e){const t=Zu(e);return 4===t.length?Gi.emptyPath():id(t)}function sd(e){return new Gi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function id(e){return _i(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ad(e,t,n){return{name:ed(e,t),fields:n.value.mapValue.fields}}function od(e,t,n){const r=td(e,t.name),s=Xu(t.updateTime),i=t.createTime?Xu(t.createTime):ia.min(),a=new Jl({mapValue:{fields:t.fields}}),o=$l.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ld(e,t){let n;if(t instanceof Tu)n={update:ad(e,t.key,t.value)};else if(t instanceof Ou)n={delete:ed(e,t.key)};else if(t instanceof ju)n={update:ad(e,t.key,t.data),updateMask:wd(t.fieldMask)};else{if(!(t instanceof Ru))return xi(16599,{Vt:t.type});n={verify:ed(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof hu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yu)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw xi(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xi(27497)}(e,t.precondition)),n}function cd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?ku.updateTime(Xu(e.updateTime)):void 0!==e.exists?ku.exists(e.exists):ku.none()}(t.currentDocument):ku.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)_i("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new hu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new fu(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new mu(e)}else"increment"in t?n=new yu(e,t.increment):xi(16584,{proto:t});const r=Yi.fromServerFormat(t.fieldPath);return new wu(r,n)}(e,t)):[];if(t.update){t.update.name;const s=td(e,t.update.name),i=new Jl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new al(t.map(e=>Yi.fromServerFormat(e)))}(t.updateMask);return new ju(s,i,e,n,r)}return new Tu(s,i,n,r)}if(t.delete){const r=td(e,t.delete);return new Ou(r,n)}if(t.verify){const r=td(e,t.verify);return new Ru(r,n)}return xi(1463,{proto:t})}function ud(e,t){return{documents:[nd(e,t.path)]}}function dd(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nd(e,s);const i=function(e){if(0!==e.length)return bd(ac.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:yd(e.field),direction:pd(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Gu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function hd(e){let t=rd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_i(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=fd(e);return t instanceof ac&&cc(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new nc(vd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ma(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Zl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Zl(n,t)}(n.endAt)),Ac(t,s,a,i,o,"F",l,c)}function fd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=vd(e.unaryFilter.field);return ic.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=vd(e.unaryFilter.field);return ic.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=vd(e.unaryFilter.field);return ic.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=vd(e.unaryFilter.field);return ic.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xi(61313);default:return xi(60726)}}(e):void 0!==e.fieldFilter?function(e){return ic.create(vd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xi(58110);default:return xi(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ac.create(e.compositeFilter.filters.map(e=>fd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xi(1026)}}(e.compositeFilter.op))}(e):xi(30097,{filter:e})}function pd(e){return Ku[e]}function md(e){return qu[e]}function gd(e){return Hu[e]}function yd(e){return{fieldPath:e.canonicalString()}}function vd(e){return Yi.fromServerFormat(e.fieldPath)}function bd(e){return e instanceof ic?function(e){if("=="===e.op){if(Bl(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NAN"}};if(Vl(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bl(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NAN"}};if(Vl(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yd(e.field),op:md(e.op),value:e.value}}}(e):e instanceof ac?function(e){const t=e.getFilters().map(e=>bd(e));return 1===t.length?t[0]:{compositeFilter:{op:gd(e.op),filters:t}}}(e):xi(54877,{filter:e})}function wd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function xd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class kd{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ia.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ia.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ll.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _d{constructor(e){this.yt=e}}function Nd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ed(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ed(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Qu(e,t.version.toTimestamp()),createTime:Qu(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sd(t.version)};else{if(!t.isUnknownDocument())return xi(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:Sd(t.version)}}return r}function Ed(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Sd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cd(e){const t=new sa(e.seconds,e.nanoseconds);return ia.fromTimestamp(t)}function Id(e,t){const n=(t.baseMutations||[]).map(t=>cd(e.yt,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>cd(e.yt,t)),s=sa.fromMillis(t.localWriteTimeMs);return new Mu(t.batchId,s,n,r)}function Td(e){const t=Cd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Cd(e.lastLimboFreeSnapshotVersion):ia.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return _i(1===t,1966,{count:t}),Lc(Pc(rd(e.documents[0])))}(e.query):function(e){return Lc(hd(e))}(e.query),new kd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ll.fromBase64String(e.resumeToken))}function jd(e,t){const n=Sd(t.snapshotVersion),r=Sd(t.lastLimboFreeSnapshotVersion);let s;s=Cc(t.target)?ud(e.yt,t.target):dd(e.yt,t.target).ft;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ec(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Dd(e){const t=hd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Uc(t,t.limit,"L"):t}function Ad(e,t){return new Fu(t.largestBatchId,cd(e.yt,t.overlayMutation))}function Pd(e,t){const n=t.path.lastSegment();return[e,Ua(t.path.popLast()),n]}function Od(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Sd(r.readTime),documentKey:Ua(r.documentKey.path),largestBatchId:r.largestBatchId}}class Rd{getBundleMetadata(e,t){return Md(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:Cd(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return Md(e).put(function(e){return{bundleId:e.id,createTime:Sd(Xu(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Ld(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:Dd(e.bundledQuery),readTime:Cd(e.readTime)}}(e)})}saveNamedQuery(e,t){return Ld(e).put(function(e){return{name:e.name,readTime:Sd(Xu(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Md(e){return Xo(e,ko)}function Ld(e){return Xo(e,_o)}class Fd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Fd(e,n)}getOverlay(e,t){return Ud(e).get(Pd(this.userId,t)).next(e=>e?Ad(this.serializer,e):null)}getOverlays(e,t){const n=$c();return ba.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new Fu(t,s);r.push(this.St(e,i))}),ba.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Ua(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(Ud(e).Z(Mo,r))}),ba.waitFor(s)}getOverlaysForCollection(e,t,n){const r=$c(),s=Ua(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ud(e).J(Mo,i).next(e=>{for(const t of e){const e=Ad(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=$c();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ud(e).ee({index:Fo,range:a},(e,t,n)=>{const a=Ad(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}St(e,t){return Ud(e).put(function(e,t,n){const[r,s,i]=Pd(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ld(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function Ud(e){return Xo(e,Oo)}class Vd{bt(e){return Xo(e,Vo)}getSessionToken(e){return this.bt(e).get("sessionToken").next(e=>{const t=null===e||void 0===e?void 0:e.value;return t?ll.fromUint8Array(t):ll.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Bd{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(dl(e.integerValue));else if("doubleValue"in e){const n=dl(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),La(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=ul(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(hl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Hl(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Kl(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xi(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=Cl,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(dl(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Xi.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Bd.Kt=new Bd;const zd=255;function Kd(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function qd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Kd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Hd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){const t=this.en(e),n=qd(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),n=qd(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(zd),this.sn(255)}_n(){this.an(zd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===zd?(this.sn(zd),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===zd?(this.an(zd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Wd{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Gd{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Qd{constructor(){this.cn=new Hd,this.ln=new Wd(this.cn),this.hn=new Gd(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return 0===e?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Yd{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Yd(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:$d(this.En),directionalValue:$d(this.dn),orderedDocumentKey:$d(t),documentKey:n.path.toArray()}}Vn(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Xd(e,t){let n=e.Tn-t.Tn;return 0!==n?n:(n=Jd(e.En,t.En),0!==n?n:(n=Jd(e.dn,t.dn),0!==n?n:Xi.comparator(e.In,t.In)))}function Jd(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function $d(e){return F()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Zd(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class eh{constructor(e){this.mn=new rl((e,t)=>Yi.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(_i(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=la(e);if(void 0!==t&&!this.wn(t))return!1;const n=ca(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.wn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.Sn(e,t)||!this.bn(this.fn[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.fn.length||!this.bn(this.fn[i++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new rl(Yi.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ua(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ua(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ua(n.field,"asc"===n.dir?0:1)));return new oa(oa.UNKNOWN_ID,this.collectionId,t,da.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function th(e){if(_i(e instanceof ic||e instanceof ac,20012),e instanceof ic){if(e instanceof wc){var t;const n=(null===(t=e.value.arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(t=>ic.create(e.field,"==",t)))||[];return ac.create(n,"or")}return e}const n=e.filters.map(e=>th(e));return ac.create(n,e.op)}function nh(e){if(0===e.getFilters().length)return[];const t=ah(th(e));return _i(ih(t),7391),rh(t)||sh(t)?[t]:t.getFilters()}function rh(e){return e instanceof ic}function sh(e){return e instanceof ac&&cc(e)}function ih(e){return rh(e)||sh(e)||function(e){if(e instanceof ac&&lc(e)){for(const t of e.getFilters())if(!rh(t)&&!sh(t))return!1;return!0}return!1}(e)}function ah(e){if(_i(e instanceof ic||e instanceof ac,34018),e instanceof ic)return e;if(1===e.filters.length)return ah(e.filters[0]);const t=e.filters.map(e=>ah(e));let n=ac.create(t,e.op);return n=ch(n),ih(n)?n:(_i(n instanceof ac,64498),_i(oc(n),40251),_i(n.filters.length>1,57927),n.filters.reduce((e,t)=>oh(e,t)))}function oh(e,t){let n;return _i(e instanceof ic||e instanceof ac,38388),_i(t instanceof ic||t instanceof ac,25473),n=e instanceof ic?t instanceof ic?function(e,t){return ac.create([e,t],"and")}(e,t):lh(e,t):t instanceof ic?lh(t,e):function(e,t){if(_i(e.filters.length>0&&t.filters.length>0,48005),oc(e)&&oc(t))return fc(e,t.getFilters());const n=lc(e)?e:t,r=lc(e)?t:e,s=n.filters.map(e=>oh(e,r));return ac.create(s,"or")}(e,t),ch(n)}function lh(e,t){if(oc(t))return fc(t,e.getFilters());{const n=t.filters.map(t=>oh(e,t));return ac.create(n,"or")}}function ch(e){if(_i(e instanceof ic||e instanceof ac,11850),e instanceof ic)return e;const t=e.getFilters();if(1===t.length)return ch(t[0]);if(uc(e))return e;const n=t.map(e=>ch(e)),r=[];return n.forEach(t=>{t instanceof ic?r.push(t):t instanceof ac&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:ac.create(r,e.op)}class uh{constructor(){this.Cn=new dh}addToCollectionParentIndex(e,t){return this.Cn.add(t),ba.resolve()}getCollectionParents(e,t){return ba.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ba.resolve()}deleteFieldIndex(e,t){return ba.resolve()}deleteAllFieldIndexes(e){return ba.resolve()}createTargetIndexes(e,t){return ba.resolve()}getDocumentsMatchingTarget(e,t){return ba.resolve(null)}getIndexType(e,t){return ba.resolve(0)}getFieldIndexes(e,t){return ba.resolve([])}getNextCollectionGroupToUpdate(e){return ba.resolve(null)}getMinOffset(e,t){return ba.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,t){return ba.resolve(pa.min())}updateCollectionGroup(e,t,n){return ba.resolve()}updateIndexEntries(e,t){return ba.resolve()}}class dh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rl(Gi.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new rl(Gi.comparator)).toArray()}}const hh="IndexedDbIndexManager",fh=new Uint8Array(0);class ph{constructor(e,t){this.databaseId=t,this.vn=new dh,this.Fn=new Wc(e=>Ec(e),(e,t)=>Sc(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const s={collectionId:n,parent:Ua(r)};return mh(e).put(s)}return ba.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[qi(t),""],!1,!0);return mh(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(za(r.parent))}return n})}addFieldIndex(e,t){const n=yh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=vh(e);return s.next(e=>{n.put(Od(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=yh(e),r=vh(e),s=gh(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=yh(e),n=gh(e),r=vh(e);return t.Z().next(()=>n.Z()).next(()=>r.Z())}createTargetIndexes(e,t){return ba.forEach(this.Mn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new eh(t).Dn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=gh(e);let r=!0;const s=new Map;return ba.forEach(this.Mn(t),t=>this.xn(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=ru();const r=[];return ba.forEach(s,(s,i)=>{yi(hh,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(s)," to execute ").concat(Ec(t)));const a=function(e,t){const n=la(t);if(void 0===n)return null;for(const r of Ic(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),o=function(e,t){const n=new Map;for(const r of ca(t))for(const t of Ic(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of ca(t)){const t=0===s.kind?Tc(e,s.fieldPath,e.startAt):jc(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Zl(n,r)}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of ca(t)){const t=0===s.kind?jc(e,s.fieldPath,e.endAt):Tc(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Zl(n,r)}(i,s),u=this.On(s,i,l),d=this.On(s,i,c),h=this.Nn(s,i,o),f=this.Bn(s.indexId,a,u,l.inclusive,d,c.inclusive,h);return ba.forEach(f,s=>n.Y(s,t.limit).next(t=>{t.forEach(t=>{const n=Xi.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return ba.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(t=0===e.filters.length?[e]:nh(ac.create(e.filters,"and")).map(t=>Nc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.Ln(t[u/l]):fh,d=this.kn(e,o,n[u%l],r),h=this.qn(e,o,s[u%l],i),f=a.map(t=>this.kn(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}kn(e,t,n,r){const s=new Yd(e,Xi.empty(),t,n);return r?s:s.An()}qn(e,t,n,r){const s=new Yd(e,Xi.empty(),t,n);return r?s.An():s}xn(e,t){const n=new eh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Mn(t);return ba.forEach(r,t=>this.xn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new rl(Yi.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Qn(e,t){const n=new Qd;for(const r of ca(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Pn(r.kind);Bd.Kt.Dt(e,s)}return n.un()}Ln(e){const t=new Qd;return Bd.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Qd;return Bd.Kt.Dt(Ll(this.databaseId,t),n.Pn(function(e){const t=ca(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(null===n)return[];let r=[];r.push(new Qd);let s=0;for(const i of ca(e)){const e=n[s++];for(const n of r)if(this.Un(t,i.fieldPath)&&Ul(e))r=this.Kn(r,i,e);else{const t=n.Pn(i.kind);Bd.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new Qd;n.seed(e.un()),Bd.Kt.Dt(i,n.Pn(t.kind)),s.push(n)}return s}Un(e,t){return!!e.filters.find(e=>e instanceof ic&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=yh(e),r=vh(e);return(t?n.J(Eo,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return ba.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new da(t.sequenceNumber,new pa(Cd(t.readTime),new Xi(za(t.documentKey)),t.largestBatchId)):da.empty(),r=e.fields.map(e=>{let[t,n]=e;return new ua(Yi.fromServerFormat(t),n)});return new oa(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Fi(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=yh(e),s=vh(e);return this.Gn(e).next(e=>r.J(Eo,IDBKeyRange.bound(t,t)).next(t=>ba.forEach(t,t=>s.put(Od(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return ba.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?ba.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),ba.forEach(s,n=>this.zn(e,t,n).next(t=>{const s=this.jn(r,n);return t.isEqual(s)?ba.resolve():this.Jn(e,r,n,t,s)}))))})}Hn(e,t,n,r){return gh(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return gh(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const r=gh(e);let s=new rl(Xd);return r.ee({index:Ao,range:IDBKeyRange.only([n.indexId,this.uid,$d(this.$n(n,t))])},(e,r)=>{s=s.add(new Yd(n.indexId,t,Zd(r.arrayValue),Zd(r.directionalValue)))}).next(()=>s)}jn(e,t){let n=new rl(Xd);const r=this.Qn(t,e);if(null==r)return n;const s=la(t);if(null!=s){const i=e.data.field(s.fieldPath);if(Ul(i))for(const s of i.arrayValue.values||[])n=n.add(new Yd(t.indexId,e.key,this.Ln(s),r))}else n=n.add(new Yd(t.indexId,e.key,fh,r));return n}Jn(e,t,n,r,s){yi(hh,"Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=il(i),l=il(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=il(a)):t?(s(o),o=il(i)):(o=il(i),l=il(a))}}(r,s,Xd,r=>{i.push(this.Hn(e,t,n,r))},r=>{i.push(this.Yn(e,t,n,r))}),ba.waitFor(i)}Gn(e){let t=1;return vh(e).ee({index:Io,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Xd(e,t)).filter((e,t,n)=>!t||0!==Xd(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=Xd(i,e),s=Xd(i,t);if(0===n)r[0]=e.An();else if(n>0&&s<0)r.push(i),r.push(i.An());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.Zn(r[i],r[i+1]))return[];const e=r[i].Vn(this.uid,fh,Xi.empty()),t=r[i+1].Vn(this.uid,fh,Xi.empty());s.push(IDBKeyRange.bound(e,t))}return s}Zn(e,t){return Xd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bh)}getMinOffset(e,t){return ba.mapArray(this.Mn(t),t=>this.xn(e,t).next(e=>e||xi(44426))).next(bh)}}function mh(e){return Xo(e,bo)}function gh(e){return Xo(e,jo)}function yh(e){return Xo(e,No)}function vh(e){return Xo(e,So)}function bh(e){_i(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;ma(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new pa(t.readTime,t.documentKey,n)}const wh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xh=41943040;class kh{static withCacheSize(e){return new kh(e,kh.DEFAULT_COLLECTION_PERCENTILE,kh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function _h(e,t,n){const r=e.store(Ga),s=e.store(eo),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.ee({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{_i(1===o,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const e=$a(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return ba.waitFor(i).next(()=>c)}function Nh(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xi(14731);t=e.noDocument}return JSON.stringify(t).length}kh.DEFAULT_COLLECTION_PERCENTILE=10,kh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kh.DEFAULT=new kh(xh,kh.DEFAULT_COLLECTION_PERCENTILE,kh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kh.DISABLED=new kh(-1,0,0);class Eh{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(e,t,n,r){_i(""!==e.uid,64387);const s=e.isAuthenticated()?e.uid:"";return new Eh(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ch(e).ee({index:Ya,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=Ih(e),i=Ch(e);return i.add({}).next(a=>{_i("number"==typeof a,49019);const o=new Mu(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>ld(e.yt,t)),s=n.mutations.map(t=>ld(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new rl((e,t)=>Fi(e.canonicalString(),t.canonicalString()));for(const e of r){const t=$a(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,Za))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Xn[a]=o.keys()}),ba.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return Ch(e).get(t).next(e=>e?(_i(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),Id(this.serializer,e)):null)}er(e,t){return this.Xn[t]?ba.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Ch(e).ee({index:Ya,range:r},(e,t,r)=>{t.userId===this.userId&&(_i(t.batchId>=n,47524,{tr:n}),s=Id(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Ra;return Ch(e).ee({index:Ya,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ra],[this.userId,Number.POSITIVE_INFINITY]);return Ch(e).J(Ya,t).next(e=>e.map(e=>Id(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ja(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Ih(e).ee({range:r},(n,r,i)=>{const[a,o,l]=n,c=za(o);if(a===this.userId&&t.path.isEqual(c))return Ch(e).get(l).next(e=>{if(!e)throw xi(61480,{nr:n,batchId:l});_i(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),s.push(Id(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rl(Fi);const r=[];return t.forEach(t=>{const s=Ja(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=Ih(e).ee({range:i},(e,r,s)=>{const[i,a,o]=e,l=za(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),ba.waitFor(r).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Ja(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new rl(Fi);return Ih(e).ee({range:i},(e,t,s)=>{const[i,o,l]=e,c=za(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.rr(e,a))}rr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Ch(e).get(t).next(e=>{if(null===e)throw xi(35274,{batchId:t});_i(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(Id(this.serializer,e))}))}),ba.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return _h(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),ba.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ba.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Ih(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=za(e[1]);r.push(t)}else n.done()}).next(()=>{_i(0===r.length,56720,{sr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return Sh(e,this.userId,t)}_r(e){return Th(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ra,lastStreamToken:""})}}function Sh(e,t,n){const r=Ja(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return Ih(e).ee({range:i,X:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function Ch(e){return Xo(e,Ga)}function Ih(e){return Xo(e,eo)}function Th(e){return Xo(e,Wa)}class jh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jh(0)}static cr(){return new jh(-1)}}class Dh{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new jh(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(e=>ia.fromTimestamp(new sa(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ah(e).delete(t.targetId)).next(()=>this.lr(e)).next(t=>(_i(t.targetCount>0,8065),t.targetCount-=1,this.hr(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return Ah(e).ee((i,a)=>{const o=Td(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>ba.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Ah(e).ee((e,n)=>{const r=Td(n);t(r)})}lr(e){return Ph(e).get(yo).next(e=>(_i(null!==e,2888),e))}hr(e,t){return Ph(e).put(yo,t)}Pr(e,t){return Ah(e).put(jd(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Ec(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Ah(e).ee({range:r,index:uo},(e,n,r)=>{const i=Td(n);Sc(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Oh(e);return t.forEach(t=>{const i=Ua(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),ba.waitFor(r)}removeMatchingKeys(e,t,n){const r=Oh(e);return ba.forEach(t,t=>{const s=Ua(t.path);return ba.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Oh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Oh(e);let s=ru();return r.ee({range:n,X:!0},(e,t,n)=>{const r=za(e[1]),i=new Xi(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=Ua(t.path),r=IDBKeyRange.bound([n],[qi(n)],!1,!0);let s=0;return Oh(e).ee({index:mo,X:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}At(e,t){return Ah(e).get(t).next(e=>e?Td(e):null)}}function Ah(e){return Xo(e,co)}function Ph(e){return Xo(e,vo)}function Oh(e){return Xo(e,fo)}const Rh="LruGarbageCollector",Mh=1048576;function Lh(e,t){let[n,r]=e,[s,i]=t;const a=Fi(n,s);return 0===a?Fi(r,i):a}class Fh{constructor(e){this.Ir=e,this.buffer=new rl(Lh),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Lh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){yi(Rh,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Sa(e)?yi(Rh,"Ignoring IndexedDB error during garbage collection: ",e):await va(e)}await this.Vr(3e5)})}}class Vh{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ba.resolve(Oa.ce);const n=new Fh(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(yi("LruGarbageCollector","Garbage collection skipped; disabled"),ba.resolve(wh)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(yi("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),wh):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(yi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),gi()<=ne.DEBUG&&yi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ba.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Bh(e,t){return new Vh(e,t)}class zh{constructor(e,t){this.db=e,this.garbageCollector=Bh(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return Kh(e,n)}removeReference(e,t,n){return Kh(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Kh(e,t)}br(e,t){return function(e,t){let n=!1;return Th(e).te(r=>Sh(e,r,t).next(e=>(e&&(n=!0),ba.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(i,a)=>{if(a<=t){const t=this.br(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,ia.min()),Oh(e).delete(function(e){return[0,Ua(e.path)]}(i))))});r.push(t)}}).next(()=>ba.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Kh(e,t)}Sr(e,t){const n=Oh(e);let r,s=Oa.ce;return n.ee({index:mo},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==Oa.ce&&t(new Xi(za(r)),s),s=l,r=o):s=Oa.ce}).next(()=>{s!==Oa.ce&&t(new Xi(za(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kh(e,t){return Oh(e).put(function(e,t){return{targetId:0,path:Ua(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class qh{constructor(){this.changes=new Wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$l.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ba.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Yh(e).put(n)}removeEntry(e,t,n){return Yh(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ed(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=$l.newInvalidDocument(t);return Yh(e).ee({index:ro,range:IDBKeyRange.only(Xh(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:$l.newInvalidDocument(t)};return Yh(e).ee({index:ro,range:IDBKeyRange.only(Xh(t))},(e,r)=>{n={document:this.Cr(t,r),size:Nh(r)}}).next(()=>n)}getEntries(e,t){let n=Qc();return this.Fr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Mr(e,t){let n=Qc(),r=new el(Xi.comparator);return this.Fr(e,t,(e,t)=>{const s=this.Cr(e,t);n=n.insert(e,s),r=r.insert(e,Nh(t))}).next(()=>({documents:n,Or:r}))}Fr(e,t,n){if(t.isEmpty())return ba.resolve();let r=new rl($h);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Xh(r.first()),Xh(r.last())),i=r.getIterator();let a=i.getNext();return Yh(e).ee({index:ro,range:s},(e,t,r)=>{const s=Xi.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&$h(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.j(Xh(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,a=[i.popLast().toArray(),i.lastSegment(),Ed(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yh(e).J(IDBKeyRange.bound(a,o,!0)).next(e=>{null===s||void 0===s||s.incrementDocumentReadCount(e.length);let n=Qc();for(const s of e){const e=this.Cr(Xi.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(Kc(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=Qc();const i=Jh(t,n),a=Jh(t,pa.max());return Yh(e).ee({index:io,range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.Cr(Xi.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Gh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Qh(e).get(lo).next(e=>(_i(!!e,20021),e))}Dr(e,t){return Qh(e).put(lo,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=od(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Xi.fromSegments(t.noDocument.path),r=Cd(t.noDocument.readTime);n=$l.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xi(56709);{const e=Xi.fromSegments(t.unknownDocument.path),r=Cd(t.unknownDocument.version);n=$l.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new sa(e[0],e[1]);return ia.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ia.min()))return e}return $l.newInvalidDocument(e)}}function Wh(e){return new Hh(e)}class Gh extends qh{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Wc(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new rl((e,t)=>Fi(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=Nd(this.Nr.serializer,i);r=r.add(s.path.popLast());const l=Nh(o);n+=l-a.size,t.push(this.Nr.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=Nd(this.Nr.serializer,i.convertToNoDocument(ia.min()));t.push(this.Nr.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Nr.updateMetadata(e,n)),ba.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(e=>{let{documents:t,Or:n}=e;return n.forEach((e,n)=>{this.Br.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Qh(e){return Xo(e,oo)}function Yh(e){return Xo(e,to)}function Xh(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Jh(e,t){const n=t.documentKey.path.toArray();return[e,Ed(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $h(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Fi(n[i],r[i]),s)return s;return s=Fi(n.length,r.length),s||(s=Fi(n[n.length-2],r[r.length-2]),s||Fi(n[n.length-1],r[r.length-1]))}class Zh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ef{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Cu(n.mutation,e,al.empty(),sa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ru()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ru();const r=$c();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Xc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=$c();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ru()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Qc();const i=eu(),a=eu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ju)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Cu(a.mutation,t,a.mutation.getFieldMask(),sa.now())):i.set(t.key,al.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Zh(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=eu();let r=new el((e,t)=>e-t),s=ru();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||al.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||ru()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Zc();l.forEach(e=>{if(!s.has(e)){const r=Eu(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ba.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Xi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ba.resolve($c());let a=aa,o=s;return i.next(t=>ba.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?ba.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,ru())).next(e=>({batchId:a,changes:Jc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xi(t)).next(e=>{let t=Xc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Xc();return this.indexManager.getCollectionParents(e,s).next(a=>ba.forEach(a,a=>{const o=function(e,t){return new Dc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,$l.newInvalidDocument(r)))});let n=Xc();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Cu(i.mutation,r,al.empty(),sa.now()),Kc(t,r)&&(n=n.insert(e,r))}),n})}}class tf{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ba.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Xu(e.createTime)}}(t)),ba.resolve()}getNamedQuery(e,t){return ba.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Dd(e.bundledQuery),readTime:Xu(e.readTime)}}(t)),ba.resolve()}}class nf{constructor(){this.overlays=new el(Xi.comparator),this.qr=new Map}getOverlay(e,t){return ba.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$c();return ba.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ba.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ba.resolve()}getOverlaysForCollection(e,t,n){const r=$c(),s=t.length+1,i=new Xi(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ba.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new el((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=$c(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=$c(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ba.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fu(t,n));let s=this.qr.get(t);void 0===s&&(s=ru(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class rf{constructor(){this.sessionToken=ll.EMPTY_BYTE_STRING}getSessionToken(e){return ba.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ba.resolve()}}class sf{constructor(){this.Qr=new rl(af.$r),this.Ur=new rl(af.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new af(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new af(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Xi(new Gi([])),n=new af(t,e),r=new af(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Xi(new Gi([])),n=new af(t,e),r=new af(t,e+1);let s=ru();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new af(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class af{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Xi.comparator(e.key,t.key)||Fi(e.Yr,t.Yr)}static Kr(e,t){return Fi(e.Yr,t.Yr)||Xi.comparator(e.key,t.key)}}class of{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new rl(af.$r)}checkEmpty(e){return ba.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Mu(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new af(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ba.resolve(i)}lookupMutationBatch(e,t){return ba.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return ba.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ba.resolve(0===this.mutationQueue.length?Ra:this.tr-1)}getAllMutationBatches(e){return ba.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new af(t,0),r=new af(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),ba.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rl(Fi);return t.forEach(e=>{const t=new af(e,0),r=new af(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ba.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Xi.isDocumentKey(s)||(s=s.child(""));const i=new af(new Xi(s),0);let a=new rl(Fi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),ba.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){_i(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ba.forEach(t.mutations,r=>{const s=new af(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new af(t,0),r=this.Zr.firstAfterOrEqual(n);return ba.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ba.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lf{constructor(e){this.ri=e,this.docs=new el(Xi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ba.resolve(n?n.document.mutableCopy():$l.newInvalidDocument(t))}getEntries(e,t){let n=Qc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():$l.newInvalidDocument(e))}),ba.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Qc();const i=t.path,a=new Xi(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ma(fa(a),n)<=0||(r.has(a.key)||Kc(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return ba.resolve(s)}getAllFromCollectionGroup(e,t,n,r){xi(9500)}ii(e,t){return ba.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new cf(this)}getSize(e){return ba.resolve(this.size)}}class cf extends qh{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ba.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class uf{constructor(e){this.persistence=e,this.si=new Wc(e=>Ec(e),Sc),this.lastRemoteSnapshotVersion=ia.min(),this.highestTargetId=0,this.oi=0,this._i=new sf,this.targetCount=0,this.ai=jh.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ba.resolve()}getLastRemoteSnapshotVersion(e){return ba.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ba.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ba.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ba.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ba.resolve()}updateTargetData(e,t){return this.Pr(t),ba.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ba.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ba.waitFor(s).next(()=>r)}getTargetCount(e){return ba.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ba.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ba.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),ba.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ba.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ba.resolve(n)}containsKey(e,t){return ba.resolve(this._i.containsKey(t))}}class df{constructor(e,t){this.ui={},this.overlays={},this.ci=new Oa(0),this.li=!1,this.li=!0,this.hi=new rf,this.referenceDelegate=e(this),this.Pi=new uf(this),this.indexManager=new uh,this.remoteDocumentCache=function(e){return new lf(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new _d(t),this.Ii=new tf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new of(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){yi("MemoryPersistence","Starting transaction:",e);const r=new hf(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ba.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class hf extends ya{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Ri=new sf,this.Vi=null}static mi(e){return new ff(e)}get fi(){if(this.Vi)return this.Vi;throw xi(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ba.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ba.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ba.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ba.forEach(this.fi,n=>{const r=Xi.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ia.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ba.or([()=>ba.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pf{constructor(e){this.serializer=e}k(e,t,n,r){const s=new xa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(qa)}(e),function(e){e.createObjectStore(Wa,{keyPath:"userId"});e.createObjectStore(Ga,{keyPath:Qa,autoIncrement:!0}).createIndex(Ya,Xa,{unique:!0}),e.createObjectStore(eo)}(e),mf(e),function(e){e.createObjectStore(Ka)}(e));let i=ba.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(fo),e.deleteObjectStore(co),e.deleteObjectStore(vo)}(e),mf(e)),i=i.next(()=>function(e){const t=e.store(vo),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ia.min().toTimestamp(),targetCount:0};return t.put(yo,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(Ga).J().next(n=>{e.deleteObjectStore(Ga),e.createObjectStore(Ga,{keyPath:Qa,autoIncrement:!0}).createIndex(Ya,Xa,{unique:!0});const r=t.store(Ga),s=n.map(e=>r.put(e));return ba.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(xo,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.yi(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(oo)}(e),this.wi(s)))),n<7&&r>=7&&(i=i.next(()=>this.Si(s))),n<8&&r>=8&&(i=i.next(()=>this.bi(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.Di(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(ko,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(_o,{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore(Oo,{keyPath:Ro});t.createIndex(Mo,Lo,{unique:!1}),t.createIndex(Fo,Uo,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore(to,{keyPath:no});t.createIndex(ro,so),t.createIndex(io,ao)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ka))),n<14&&r>=14&&(i=i.next(()=>this.Fi(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore(No,{keyPath:"indexId",autoIncrement:!0}).createIndex(Eo,"collectionGroup",{unique:!1});e.createObjectStore(So,{keyPath:Co}).createIndex(Io,To,{unique:!1});e.createObjectStore(jo,{keyPath:Do}).createIndex(Ao,Po,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore(So).clear()}).next(()=>{t.objectStore(jo).clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore(Vo,{keyPath:"name"})}(e)})),n<18&&r>=18&&F()&&(i=i.next(()=>{t.objectStore(So).clear()}).next(()=>{t.objectStore(jo).clear()})),i}wi(e){let t=0;return e.store(Ka).ee((e,n)=>{t+=Nh(n)}).next(()=>{const n={byteSize:t};return e.store(oo).put(lo,n)})}yi(e){const t=e.store(Wa),n=e.store(Ga);return t.J().next(t=>ba.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,Ra],[t.userId,t.lastAcknowledgedBatchId]);return n.J(Ya,r).next(n=>ba.forEach(n,n=>{_i(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=Id(this.serializer,n);return _h(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(fo),n=e.store(Ka);return e.store(vo).get(yo).next(e=>{const r=[];return n.ee((n,s)=>{const i=new Gi(n),a=function(e){return[0,Ua(e)]}(i);r.push(t.get(a).next(n=>n?ba.resolve():(n=>t.put({targetId:0,path:Ua(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>ba.waitFor(r))})}bi(e,t){e.createObjectStore(bo,{keyPath:wo});const n=t.store(bo),r=new dh,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ua(r)})}};return t.store(Ka).ee({X:!0},(e,t)=>{const n=new Gi(e);return s(n.popLast())}).next(()=>t.store(eo).ee({X:!0},(e,t)=>{let[n,r,i]=e;const a=za(r);return s(a.popLast())}))}Di(e){const t=e.store(co);return t.ee((e,n)=>{const r=Td(n),s=jd(this.serializer,r);return t.put(s)})}Ci(e,t){const n=t.store(Ka),r=[];return n.ee((e,n)=>{const s=t.store(to),i=function(e){return e.document?new Xi(Gi.fromString(e.document.name).popFirst(5)):e.noDocument?Xi.fromSegments(e.noDocument.path):e.unknownDocument?Xi.fromSegments(e.unknownDocument.path):xi(36783)}(n).path.toArray(),a={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(a))}).next(()=>ba.waitFor(r))}Fi(e,t){const n=t.store(Ga),r=Wh(this.serializer),s=new df(ff.mi,this.serializer.yt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ru();Id(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),ba.forEach(n,(e,n)=>{const i=new fi(n),a=Fd.wt(this.serializer,i),o=s.getIndexManager(i),l=Eh.wt(i,this.serializer,o,s.referenceDelegate);return new ef(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new Yo(t,Oa.ce),e).next()})})}}function mf(e){e.createObjectStore(fo,{keyPath:po}).createIndex(mo,go,{unique:!0}),e.createObjectStore(co,{keyPath:"targetId"}).createIndex(uo,ho,{unique:!0}),e.createObjectStore(vo)}const gf="IndexedDbPersistence",yf=18e5,vf=5e3,bf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wf="main";class xf{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=s,this.window=i,this.document=a,this.xi=l,this.Oi=c,this.Ni=u,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=e=>Promise.resolve(),!xf.v())throw new Si(Ei.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zh(this,r),this.$i=t+wf,this.serializer=new _d(o),this.Ui=new ka(this.$i,this.Ni,new pf(this.serializer)),this.hi=new Vd,this.Pi=new Dh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wh(this.serializer),this.Ii=new Rd,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===c&&vi(gf,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Si(Ei.FAILED_PRECONDITION,bf);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Oa(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Sa(e))return yi(gf,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yi(gf,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return kf(e).get(Ha).next(e=>ba.resolve(this.es(e)))}ts(e){return _f(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,yf)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Xo(e,xo);return t.J().next(e=>{const n=this.ss(e,yf),r=e.filter(e=>-1===n.indexOf(e));return ba.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ba.resolve(!0):kf(e).get(Ha).next(t=>{if(null!==t&&this.rs(t.leaseTimestampMs,vf)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Si(Ei.FAILED_PRECONDITION,bf);return!1}}return!(!this.networkEnabled||!this.inForeground)||_f(e).J().next(e=>void 0===this.ss(e,vf).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&yi(gf,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[qa,xo],e=>{const t=new Yo(e,Oa.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>_f(e).J().next(e=>this.ss(e,yf).map(e=>e.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Eh.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ph(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Fd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){yi(gf,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=function(e){return 18===e?Qo:17===e?Go:16===e?Wo:15===e?Ho:14===e?qo:13===e?Ko:12===e?zo:11===e?Bo:void xi(60245)}(this.Ni);let i;return this.Ui.runTransaction(e,r,s,r=>(i=new Yo(r,this.ci?this.ci.next():Oa.ce),"readwrite-primary"===t?this.Hi(i).next(e=>!!e||this.Yi(i)).next(t=>{if(!t)throw vi("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Si(Ei.FAILED_PRECONDITION,ga);return n(i)}).next(e=>this.Xi(i).next(()=>e)):this.Is(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Is(e){return kf(e).get(Ha).next(e=>{if(null!==e&&this.rs(e.leaseTimestampMs,vf)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Si(Ei.FAILED_PRECONDITION,bf)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kf(e).put(Ha,t)}static v(){return ka.v()}Zi(e){const t=kf(e);return t.get(Ha).next(e=>this.es(e)?(yi(gf,"Releasing primary lease."),t.delete(Ha)):ba.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(vi("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground="visible"===this.document.visibilityState)}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;L()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{var t;const n=null!==(null===(t=this.Ki)||void 0===t?void 0:t.getItem(this._s(e)));return yi(gf,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return vi(gf,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(Fm){vi("Failed to set zombie client id.",Fm)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(Fm){}}_s(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function kf(e){return Xo(e,qa)}function _f(e){return Xo(e,xo)}function Nf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ef{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ru(),r=ru();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ef(e,t.fromCache,n,r)}}class Sf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Cf{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=L()?8:_a(R())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Sf;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(gi()<=ne.DEBUG&&yi("QueryEngine","SDK will not create cache indexes for query:",zc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ba.resolve()):(gi()<=ne.DEBUG&&yi("QueryEngine","Query:",zc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(gi()<=ne.DEBUG&&yi("QueryEngine","The SDK decides to create cache indexes for query:",zc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lc(t))):ba.resolve())}ys(e,t){if(Oc(t))return ba.resolve(null);let n=Lc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Uc(t,null,"F"),n=Lc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ru(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Uc(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Oc(t)||r.isEqual(ia.min())?ba.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?ba.resolve(null):(gi()<=ne.DEBUG&&yi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zc(t)),this.vs(e,i,t,ha(r,aa)).next(e=>e))})}Ds(e,t){let n=new rl(qc(e));return t.forEach((t,r)=>{Kc(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return gi()<=ne.DEBUG&&yi("QueryEngine","Using full collection scan to execute query:",zc(t)),this.ps.getDocumentsMatchingQuery(e,t,pa.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const If="LocalStore";class Tf{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new el(Fi),this.xs=new Wc(e=>Ec(e),Sc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ef(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function jf(e,t,n,r){return new Tf(e,t,n,r)}async function Df(e,t){const n=Ni(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=ru();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function Af(e){const t=Ni(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Pf(e,t){const n=Ni(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ra),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}class Of{constructor(){this.activeTargetIds=iu()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rf{constructor(){this.Mo=new Of,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Of,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mf{Oo(e){}shutdown(){}}const Lf="ConnectivityMonitor";class Ff{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yi(Lf,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){yi(Lf,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uf=null;function Vf(){return null===Uf?Uf=268435456+Math.round(2147483648*Math.random()):Uf++,"0x"+Uf.toString(16)}const Bf="RestConnection",zf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kf{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===xl?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=Vf(),a=this.zo(e,t.toUriEncodedString());yi(Bf,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),c=j(l);return this.Jo(e,a,o,n,c).then(t=>(yi(Bf,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw bi(Bf,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+pi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=zf[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class qf{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Hf="WebChannelConnection";class Wf extends Kf{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=Vf();return new Promise((s,a)=>{const o=new ti;o.setWithCredentials(!0),o.listenOnce(ri.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case si.NO_ERROR:const n=o.getResponseJson();yi(Hf,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case si.TIMEOUT:yi(Hf,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Si(Ei.DEADLINE_EXCEEDED,"Request time out"));break;case si.HTTP_ERROR:const r=o.getStatus();if(yi(Hf,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ei).indexOf(t)>=0?t:Ei.UNKNOWN}(n.status);a(new Si(e,n.message))}else a(new Si(Ei.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Si(Ei.UNAVAILABLE,"Connection failed."));break;default:xi(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{yi(Hf,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);yi(Hf,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Vf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=li(),a=oi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");yi(Hf,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new qf({Yo:t=>{h?yi(Hf,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(yi(Hf,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),yi(Hf,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ni.EventType.OPEN,()=>{h||(yi(Hf,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,ni.EventType.CLOSE,()=>{h||(h=!0,yi(Hf,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,ni.EventType.ERROR,t=>{h||(h=!0,bi(Hf,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Si(Ei.UNAVAILABLE,"The operation could not be completed")))}),p(u,ni.EventType.MESSAGE,t=>{if(!h){var n;const s=t.data[0];_i(!!s,16349);const i=s,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){yi(Hf,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Uu[e];if(void 0!==t)return zu(t)}(t),s=a.message;void 0===n&&(n=Ei.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Si(n,s)),u.close()}else yi(Hf,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.u_(s)}}),p(a,ai.STAT_EVENT,t=>{t.stat===ii.PROXY?yi(Hf,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ii.NOPROXY&&yi(Hf,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Gf(){return"undefined"!=typeof window?window:null}function Qf(){return"undefined"!=typeof document?document:null}function Yf(e){return new Wu(e,!0)}class Xf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&yi("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jf="PersistentStream";class $f{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xf(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Ei.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ei.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Si(Ei.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return yi(Jf,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(yi(Jf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zf extends $f{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _i(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_i(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){_i(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(_i(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Xu(e.updateTime):Xu(t);return n.isEqual(ia.min())&&(n=Xu(t)),new xu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Xu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=sd(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ld(this.serializer,e))};this.q_(t)}}class ep{}class tp extends ep{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Si(Ei.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,$u(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ei.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Si(Ei.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,$u(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ei.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Si(Ei.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class np{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(vi(t),this.aa=!1):yi("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const rp="RemoteStore";class sp{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{op(this)&&(yi(rp,"Restarting streams for network reachability change."),await async function(e){const t=Ni(e);t.Ea.add(4),await ap(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ip(t)}(this))})}),this.Ra=new np(n,r)}}async function ip(e){if(op(e))for(const t of e.da)await t(!0)}async function ap(e){for(const t of e.da)await t(!1)}function op(e){return 0===Ni(e).Ea.size}async function lp(e,t,n){if(!Sa(t))throw t;e.Ea.add(1),await ap(e),e.Ra.set("Offline"),n||(n=()=>Af(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{yi(rp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ip(e)})}function cp(e,t){return t().catch(n=>lp(e,n,t))}async function up(e){const t=Ni(e),n=wp(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ra;for(;dp(t);)try{const e=await Pf(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,hp(t,e)}catch(e){await lp(t,e)}fp(t)&&pp(t)}function dp(e){return op(e)&&e.Ta.length<10}function hp(e,t){e.Ta.push(t);const n=wp(e);n.O_()&&n.X_&&n.ea(t.mutations)}function fp(e){return op(e)&&!wp(e).x_()&&e.Ta.length>0}function pp(e){wp(e).start()}async function mp(e){wp(e).ra()}async function gp(e){const t=wp(e);for(const n of e.Ta)t.ea(n.mutations)}async function yp(e,t,n){const r=e.Ta.shift(),s=Lu.from(r,t,n);await cp(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await up(e)}async function vp(e,t){t&&wp(e).X_&&await async function(e,t){if(function(e){return Bu(e)&&e!==Ei.ABORTED}(t.code)){const n=e.Ta.shift();wp(e).B_(),await cp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await up(e)}}(e,t),fp(e)&&pp(e)}async function bp(e,t){const n=Ni(e);t?(n.Ea.delete(2),await ip(n)):t||(n.Ea.add(2),await ap(n),n.Ra.set("Unknown"))}function wp(e){return e.fa||(e.fa=function(e,t,n){const r=Ni(e);return r.sa(),new Zf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:mp.bind(null,e),r_:vp.bind(null,e),ta:gp.bind(null,e),na:yp.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await up(e)):(await e.fa.stop(),e.Ta.length>0&&(yi(rp,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class xp{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new xp(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Si(Ei.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(e,t){if(vi("AsyncQueue","".concat(t,": ").concat(e)),Sa(e))return new Si(Ei.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class _p{constructor(){this.queries=Np(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Ni(e),r=n.queries;n.queries=Np(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Si(Ei.ABORTED,"Firestore shutting down"))}}function Np(){return new Wc(e=>Bc(e),Vc)}function Ep(e){e.Ca.forEach(e=>{e.next()})}var Sp,Cp;(Cp=Sp||(Sp={})).Ma="default",Cp.Cache="cache";const Ip="SyncEngine";class Tp{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Wc(e=>Bc(e),Vc),this.Iu=new Map,this.Eu=new Set,this.du=new el(Xi.comparator),this.Au=new Map,this.Ru=new sf,this.Vu={},this.mu=new Map,this.fu=jh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function jp(e,t,n){const r=Ni(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Ni(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Ep(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dp(e,t){const n=Ni(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ni(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=ba.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);_i(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ru();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Op(n,r,null),Pp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rp(n,e)}catch(e){await va(e)}}async function Ap(e,t,n){const r=Ni(e);try{const e=await function(e,t){const n=Ni(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(_i(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Op(r,t,n),Pp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Rp(r,e)}catch(n){await va(n)}}function Pp(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Op(e,t,n){const r=Ni(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}async function Rp(e,t,n){const r=Ni(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ef.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=Ni(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ba.forEach(t,t=>ba.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ba.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Sa(e))throw e;yi(If,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Mp(e,t){const n=Ni(e);if(!n.currentUser.isEqual(t)){yi(Ip,"User change. New user:",t.toKey());const e=await Df(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Si(Ei.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Rp(n,e.Ls)}}function Lp(e){const t=Ni(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ap.bind(null,t),t}class Fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return jf(this.persistence,new Cf,e.initialUser,this.serializer)}Cu(e){return new df(ff.mi,this.serializer)}Du(e){return new Rf}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fp.provider={build:()=>new Fp};class Up extends Fp{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Lp(this.xu.syncEngine),await up(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return jf(this.persistence,new Cf,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Uh(n,e.asyncQueue,t)}Mu(e,t){const n=new Pa(t,this.persistence);return new Aa(e.asyncQueue,n)}Cu(e){const t=Nf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?kh.withCacheSize(this.cacheSizeBytes):kh.DEFAULT;return new xf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Gf(),Qf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Rf}}class Vp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>jp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mp.bind(null,this.syncEngine),await bp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new _p}createDatastore(e){const t=Yf(e.databaseInfo.databaseId),n=function(e){return new Wf(e)}(e.databaseInfo);return function(e,t,n,r){return new tp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new sp(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>jp(this.syncEngine,e,0),Ff.v()?new Ff:new Mf)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Tp(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ni(e);yi(rp,"RemoteStore shutting down."),t.Ea.add(5),await ap(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Vp.provider={build:()=>new Vp};const Bp="FirestoreClient";class zp{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=fi.UNAUTHENTICATED,this.clientId=Li.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{yi(Bp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(yi(Bp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Um){const n=kp(Um,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}function Kp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const qp=new Map,Hp="firestore.googleapis.com",Wp=!0;class Gp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Si(Ei.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hp,this.ssl=Wp}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Wp;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=xh;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Mh)throw new Si(Ei.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Si(Ei.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Si(Ei.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Si(Ei.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Si(Ei.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Si(Ei.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Si(Ei.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gp(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ti;switch(e.type){case"firstParty":return new Pi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Si(Ei.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qp.get(e);t&&(yi("ComponentProvider","Removing Datastore"),qp.delete(e),t.terminate())}(this),Promise.resolve()}}function Yp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Zi(e,Qp);const s=j(t),i=e._getSettings(),a=c(c({},i),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);s&&(D("https://".concat(o)),O("Firestore",!0)),i.host!==Hp&&i.host!==o&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},i),{},{host:o,ssl:s,emulatorOptions:r});if(!K(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=fi.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[k(JSON.stringify({alg:"none",type:"JWT"})),k(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Si(Ei.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new fi(s)}e._authCredentials=new ji(new Ii(t,n))}}class Xp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xp(this.firestore,e,this._query)}}class Jp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $p(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jp(this.firestore,e,this._key)}toJSON(){return{type:Jp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ta(t,Jp._jsonSchema))return new Jp(e,n||null,new Xi(Gi.fromString(t.referencePath)))}}Jp._jsonSchemaVersion="firestore/documentReference/1.0",Jp._jsonSchema={type:ea("string",Jp._jsonSchemaVersion),referencePath:ea("string")};class $p extends Xp{constructor(e,t,n){super(e,t,Pc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jp(this.firestore,null,new Xi(e))}withConverter(e){return new $p(this.firestore,e,this._path)}}const Zp="AsyncQueue";class em{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xf(this,"async_queue_retry"),this._c=()=>{const e=Qf();e&&yi(Zp,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Qf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ci;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(Fm){if(!Sa(Fm))throw Fm;yi(Zp,"Operation failed with retryable error: "+Fm)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,vi("INTERNAL UNHANDLED ERROR: ",tm(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=xp.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&xi(47125,{Pc:tm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function tm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class nm extends Qp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new em,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new em(e),this._firestoreClient=void 0,await e}}}function rm(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new wl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Kp(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new zp(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function sm(e,t,n){if((e=Zi(e,nm))._firestoreClient||e._terminated)throw new Si(Ei.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Si(Ei.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},rm(e)}class im{constructor(e){this._byteString=e}static fromBase64String(e){try{return new im(ll.fromBase64String(e))}catch(e){throw new Si(Ei.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new im(ll.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:im._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,im._jsonSchema))return im.fromBase64String(e.bytes)}}im._jsonSchemaVersion="firestore/bytes/1.0",im._jsonSchema={type:ea("string",im._jsonSchemaVersion),bytes:ea("string")};class am{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Si(Ei.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yi(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class om{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Si(Ei.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Si(Ei.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fi(this._lat,e._lat)||Fi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:om._jsonSchemaVersion}}static fromJSON(e){if(ta(e,om._jsonSchema))return new om(e.latitude,e.longitude)}}om._jsonSchemaVersion="firestore/geoPoint/1.0",om._jsonSchema={type:ea("string",om._jsonSchemaVersion),latitude:ea("number"),longitude:ea("number")};class lm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:lm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,lm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new lm(e.vectorValues);throw new Si(Ei.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lm._jsonSchemaVersion="firestore/vectorValue/1.0",lm._jsonSchema={type:ea("string",lm._jsonSchemaVersion),vectorValues:ea("object")};const cm=new RegExp("[~\\*/\\[\\]]");function um(e,t,n){if(t.search(cm)>=0)throw dm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new am(...t.split("."))._internalPath}catch(Bm){throw dm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dm(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Si(Ei.INVALID_ARGUMENT,o+e+l)}class hm{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fm extends hm{data(){return super.data()}}function pm(e,t){return"string"==typeof t?um(e,t):t instanceof am?t._internalPath:t._delegate._internalPath}class mm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gm extends hm{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Si(Ei.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=gm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}gm._jsonSchemaVersion="firestore/documentSnapshot/1.0",gm._jsonSchema={type:ea("string",gm._jsonSchemaVersion),bundleSource:ea("string","DocumentSnapshot"),bundleName:ea("string"),bundle:ea("string")};class ym extends gm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class vm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new mm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ym(this._firestore,this._userDataWriter,n.key,n,new mm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Si(Ei.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ym(e._firestore,e._userDataWriter,n.doc.key,n.doc,new mm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ym(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:bm(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Si(Ei.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Li.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xi(61501,{type:e})}}vm._jsonSchemaVersion="firestore/querySnapshot/1.0",vm._jsonSchema={type:ea("string",vm._jsonSchemaVersion),bundleSource:ea("string","QuerySnapshot"),bundleName:ea("string"),bundle:ea("string")};new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){pi=e}(dt),at(new J("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new nm(new Di(e.getProvider("auth-internal")),new Ri(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Si(Ei.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(e.options.projectId,t)}(i,r),i);return s=c({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),pt(di,hi,e),pt(di,hi,"esm2020")}();const wm=ht({apiKey:"AIzaSyDlMArNXkKcGi9kCMPDfunPe2PP-16lviI",authDomain:"taskmanager-pro-7429a.firebaseapp.com",projectId:"taskmanager-pro-7429a",storageBucket:"taskmanager-pro-7429a.firebasestorage.app",messagingSenderId:"1076300762409",appId:"1:1076300762409:web:d0707ffd551b104d5f3b38",measurementId:"G-5D293KHZ03"}),xm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();const t=ot(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ot(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(K(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Pt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Hs,persistence:[ts,Rr,Vr]}),r=I("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ys)return;const r=null===t||void 0===t?void 0:t.token;Xs!==r&&(Xs=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){X(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){X(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=S("auth");return i&&tr(n,"http://".concat(i)),n}(wm),km=function(e,t){const n="object"==typeof e?e:ft(),r="string"==typeof e?e:t||xl,s=ot(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=S(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Yp(s,...e)}return s}(wm);(function(e,t){bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return sm(e,Vp.provider,{build:e=>new Up(e,n.cacheSizeBytes,null===t||void 0===t?void 0:t.forceOwnership)}),Promise.resolve()})(km).catch(e=>{"failed-precondition"===e.code?console.warn("\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u044b, \u043f\u0435\u0440\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430"):"unimplemented"===e.code&&console.warn("\u0411\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0444\u043b\u0430\u0439\u043d \u0440\u0435\u0436\u0438\u043c")});const _m=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return X(e).onAuthStateChanged(t,n,r)}(xm,e=>{t(e),s(!1)});return e},[]);return{user:e,loading:n,logout:async()=>{try{await function(e){return X(e).signOut()}(xm)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0445\u043e\u0434\u0430:",e)}},loginWithEmail:async(e,t)=>{try{const n=await function(e,t,n){return lt(e.app)?Promise.reject(Mt(e)):Tr(X(e),pr.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&jr(e),t})}(xm,e,t);return{success:!0,user:n.user}}catch(n){return{success:!1,error:n.message}}},registerWithEmail:async(e,t)=>{try{const n=await async function(e,t,n){if(lt(e.app))return Promise.reject(Mt(e));const r=Kn(e),s=Zn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xr,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&jr(e),t}),a=await kr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(xm,e,t);return{success:!0,user:n.user}}catch(n){return{success:!1,error:n.message}}},isAuthenticated:!!e}};var Nm=n(579);const Em=e=>{let{onMenuClick:t,title:n}=e;const{logout:r}=_m();return(0,Nm.jsxs)("header",{className:"shadow-sm border-b px-4 py-3 flex items-center justify-between sticky top-0 z-40 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.95), rgba(35, 39, 41, 0.95))",borderColor:"rgba(120, 120, 120, 0.3)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nm.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-all duration-300 hover:scale-110",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",border:"1px solid rgba(120, 120, 120, 0.3)"},children:(0,Nm.jsx)(p,{className:"w-5 h-5",style:{color:"#c0c0c0"}})}),(0,Nm.jsx)("h1",{className:"text-xl font-heading",style:{color:"#c0c0c0"},children:n})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsxs)("button",{className:"p-2 rounded-lg transition-all duration-300 hover:scale-110 relative",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",border:"1px solid rgba(120, 120, 120, 0.3)"},children:[(0,Nm.jsx)(m,{className:"w-5 h-5",style:{color:"#c0c0c0"}}),(0,Nm.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full",style:{backgroundColor:"#c08080"}})]}),(0,Nm.jsx)("button",{className:"p-2 rounded-lg transition-all duration-300 hover:scale-110",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",border:"1px solid rgba(120, 120, 120, 0.3)"},children:(0,Nm.jsx)(g,{className:"w-5 h-5",style:{color:"#c0c0c0"}})}),(0,Nm.jsx)("button",{className:"p-2 rounded-lg transition-all duration-300 hover:scale-110",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",border:"1px solid rgba(120, 120, 120, 0.3)"},children:(0,Nm.jsx)(y,{className:"w-5 h-5",style:{color:"#c0c0c0"}})}),(0,Nm.jsx)("button",{onClick:r,className:"p-2 rounded-lg transition-all duration-300 hover:scale-110",style:{backgroundColor:"rgba(200, 80, 80, 0.2)",border:"1px solid rgba(200, 100, 100, 0.3)"},title:"\u0412\u044b\u0439\u0442\u0438",children:(0,Nm.jsx)(v,{className:"w-5 h-5",style:{color:"#c08080"}})})]})]})},Sm=f("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Cm=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Im=f("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Tm=f("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),jm=f("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Dm=f("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Am=f("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Pm=f("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),Om=f("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Rm=f("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Mm=[{id:"dashboard",label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",icon:Sm},{id:"add-task",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443",icon:Cm},{id:"add-project",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",icon:Cm},{id:"tasks",label:"\u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438",icon:Im},{id:"projects",label:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",icon:Tm},{id:"clients",label:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",icon:jm},{id:"calendar",label:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",icon:Dm},{id:"notes",label:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438",icon:Am},{id:"archive",label:"\u0410\u0440\u0445\u0438\u0432",icon:Pm},{id:"files",label:"\u0424\u0430\u0439\u043b\u044b",icon:Om},{id:"analytics",label:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430",icon:Rm},{id:"settings",label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",icon:g}],Lm=e=>{let{isOpen:t,onClose:n,currentPage:r,onNavigate:s}=e;return(0,Nm.jsxs)(Nm.Fragment,{children:[t&&(0,Nm.jsx)("div",{className:"fixed inset-0 z-40 lg:hidden backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:n}),(0,Nm.jsx)("div",{className:"\n          fixed top-0 left-0 h-full w-80 shadow-lg transform transition-transform duration-300 ease-in-out z-50 backdrop-blur-xl\n          ".concat(t?"translate-x-0":"-translate-x-full","\n          lg:translate-x-0 lg:static lg:shadow-none lg:w-64\n        "),style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.95), rgba(35, 39, 41, 0.95))",borderRight:"1px solid rgba(120, 120, 120, 0.3)"},children:(0,Nm.jsxs)("div",{className:"p-6",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 mb-8",children:[(0,Nm.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center backdrop-blur-sm shadow-lg",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))",border:"2px solid rgba(120, 120, 120, 0.4)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:(0,Nm.jsx)(Im,{className:"w-7 h-7",style:{color:"#d0d0d0"}})}),(0,Nm.jsx)("h2",{className:"text-xl font-display",style:{color:"#c0c0c0"},children:"TaskManager Pro"})]}),(0,Nm.jsx)("nav",{className:"space-y-2",children:Mm.map(e=>{const t=e.icon,i=r===e.id;return(0,Nm.jsxs)("button",{onClick:()=>{s(e.id),n()},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all duration-300 hover:scale-105",style:{backgroundColor:i?"rgba(80, 80, 80, 0.3)":"transparent",borderRight:i?"3px solid #c0c0c0":"none",color:i?"#d0d0d0":"#b0b0b0"},onMouseEnter:e=>{i||(e.currentTarget.style.backgroundColor="rgba(80, 80, 80, 0.1)",e.currentTarget.style.color="#c0c0c0")},onMouseLeave:e=>{i||(e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="#b0b0b0")},children:[(0,Nm.jsx)(t,{className:"w-5 h-5"}),(0,Nm.jsx)("span",{className:"font-accent font-medium",children:e.label})]},e.id)})})]})})]})},Fm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Um=Object.keys,Vm=Array.isArray;function Bm(e,t){return"object"!=typeof t||Um(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||Fm.Promise||(Fm.Promise=Promise);const zm=Object.getPrototypeOf,Km={}.hasOwnProperty;function qm(e,t){return Km.call(e,t)}function Hm(e,t){"function"==typeof t&&(t=t(zm(e))),("undefined"==typeof Reflect?Um:Reflect.ownKeys)(t).forEach(n=>{Gm(e,n,t[n])})}const Wm=Object.defineProperty;function Gm(e,t,n,r){Wm(e,t,Bm(n&&qm(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Qm(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Gm(e.prototype,"constructor",e),{extend:Hm.bind(null,e.prototype)}}}}const Ym=Object.getOwnPropertyDescriptor;function Xm(e,t){let n;return Ym(e,t)||(n=zm(e))&&Xm(n,t)}const Jm=[].slice;function $m(e,t,n){return Jm.call(e,t,n)}function Zm(e,t){return t(e)}function eg(e){if(!e)throw new Error("Assertion Failed")}function tg(e){Fm.setImmediate?setImmediate(e):setTimeout(e,0)}function ng(e,t){return e.reduce((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e},{})}function rg(e,t){if("string"==typeof t&&qm(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=rg(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return null==o?void 0:rg(o,t.substr(a+1))}}function sg(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){eg("string"!=typeof n&&"length"in n);for(var r=0,s=t.length;r<s;++r)sg(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var a=t.substr(0,i),o=t.substr(i+1);if(""===o)void 0===n?Vm(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var l=e[a];l&&qm(e,a)||(l=e[a]={}),sg(l,o,n)}}else void 0===n?Vm(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ig(e){var t={};for(var n in e)qm(e,n)&&(t[n]=e[n]);return t}const ag=[].concat;function og(e){return ag.apply([],e)}const lg="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(og([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Fm[e]),cg=lg.map(e=>Fm[e]);ng(lg,e=>[e,!0]);let ug=null;function dg(e){ug="undefined"!=typeof WeakMap&&new WeakMap;const t=hg(e);return ug=null,t}function hg(e){if(!e||"object"!=typeof e)return e;let t=ug&&ug.get(e);if(t)return t;if(Vm(e)){t=[],ug&&ug.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(hg(e[n]))}else if(cg.indexOf(e.constructor)>=0)t=e;else{const n=zm(e);for(var s in t=n===Object.prototype?{}:Object.create(n),ug&&ug.set(e,t),e)qm(e,s)&&(t[s]=hg(e[s]))}return t}const{toString:fg}={};function pg(e){return fg.call(e).slice(8,-1)}const mg="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",gg="symbol"==typeof mg?function(e){var t;return null!=e&&(t=e[mg])&&t.apply(e)}:function(){return null},yg={};function vg(e){var t,n,r,s;if(1===arguments.length){if(Vm(e))return e.slice();if(this===yg&&"string"==typeof e)return[e];if(s=gg(e)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const bg="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var wg="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xg(e,t){wg=e,kg=t}var kg=()=>!0;const _g=!new Error("").stack;function Ng(){if(_g)try{throw Ng.arguments,new Error}catch(Fm){return Fm}return new Error}function Eg(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(kg).map(e=>"\n"+e).join("")):""}var Sg=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Cg=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Sg),Ig={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Tg(e,t){this._e=Ng(),this.name=e,this.message=t}function jg(e,t){return e+". Errors: "+Object.keys(t).map(e=>t[e].toString()).filter((e,t,n)=>n.indexOf(e)===t).join("\n")}function Dg(e,t,n,r){this._e=Ng(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=jg(e,t)}function Ag(e,t){this._e=Ng(),this.name="BulkError",this.failures=Object.keys(t).map(e=>t[e]),this.failuresByPos=t,this.message=jg(e,t)}Qm(Tg).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Eg(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Qm(Dg).from(Tg),Qm(Ag).from(Tg);var Pg=Cg.reduce((e,t)=>(e[t]=t+"Error",e),{});const Og=Tg;var Rg=Cg.reduce((e,t)=>{var n=t+"Error";function r(e,r){this._e=Ng(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=Ig[t]||n,this.inner=null)}return Qm(r).from(Og),e[t]=r,e},{});Rg.Syntax=SyntaxError,Rg.Type=TypeError,Rg.Range=RangeError;var Mg=Sg.reduce((e,t)=>(e[t+"Error"]=Rg[t],e),{}),Lg=Cg.reduce((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Rg[t]),e),{});function Fg(){}function Ug(e){return e}function Vg(e,t){return null==e||e===Ug?t:function(n){return t(e(n))}}function Bg(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function zg(e,t){return e===Fg?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Bg(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Bg(s,this.onerror):s),void 0!==i?i:n}}function Kg(e,t){return e===Fg?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Bg(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Bg(r,this.onerror):r)}}function qg(e,t){return e===Fg?t:function(n){var r=e.apply(this,arguments);Bm(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Bg(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Bg(i,this.onerror):i),void 0===r?void 0===a?void 0:a:Bm(r,a)}}function Hg(e,t){return e===Fg?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Wg(e,t){return e===Fg?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}Lg.ModifyError=Dg,Lg.DexieError=Tg,Lg.BulkError=Ag;var Gg={};const[Qg,Yg,Xg]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,zm(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,zm(t),e]})(),Jg=Yg&&Yg.then,$g=Qg&&Qg.constructor,Zg=!!Xg;var ey=!1,ty=Xg?()=>{Xg.then(Ny)}:Fm.setImmediate?setImmediate.bind(null,Ny):Fm.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Ny(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Ny,0)},ny=function(e,t){dy.push([e,t]),sy&&(ty(),sy=!1)},ry=!0,sy=!0,iy=[],ay=[],oy=null,ly=Ug,cy={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Yy,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Yy(e[0],e[1])}catch(e){}})}},uy=cy,dy=[],hy=0,fy=[];function py(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Fg,this._lib=!1;var t=this._PSD=uy;if(wg&&(this._stackHolder=Ng(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Gg)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&vy(this,this._value))}this._state=null,this._value=null,++t.ref,yy(this,e)}const my={get:function(){var e=uy,t=Oy;function n(n,r){var s=!e.global&&(e!==uy||t!==Oy);const i=s&&!Fy();var a=new py((t,a)=>{wy(this,new gy(Wy(n,e,s,i),Wy(r,e,s,i),t,a,e))});return wg&&_y(a,this),a}return n.prototype=Gg,n},set:function(e){Gm(this,"then",e&&e.prototype===Gg?my:{get:function(){return e},set:my.set})}};function gy(e,t,n,r,s){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function yy(e,t){try{t(t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ey();t&&"function"==typeof t.then?yy(e,(e,n)=>{t instanceof py?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,by(e)),n&&Sy()}},vy.bind(null,e))}catch(t){vy(e,t)}}function vy(e,t){if(ay.push(t),null===e._state){var n=e._lib&&Ey();t=ly(t),e._state=!1,e._value=t,wg&&null!==t&&"object"==typeof t&&!t._promise&&function(e){try{e.apply(null,void 0)}catch(e){}}(()=>{var n=Xm(t,"stack");t._promise=e,Gm(t,"stack",{get:()=>ey?n&&(n.get?n.get.apply(t):n.value):e.stack})}),function(e){iy.some(t=>t._value===e._value)||iy.push(e)}(e),by(e),n&&Sy()}}function by(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)wy(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===hy&&(++hy,ny(()=>{0==--hy&&Cy()},[]))}function wy(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++hy,ny(xy,[n,e,t])}else e._listeners.push(t)}function xy(e,t,n){try{oy=t;var r,s=t._value;t._state?r=e(s):(ay.length&&(ay=[]),r=e(s),-1===ay.indexOf(s)&&function(e){for(var t=iy.length;t;)if(iy[--t]._value===e._value)return void iy.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{oy=null,0==--hy&&Cy(),--n.psd.ref||n.psd.finalize()}}function ky(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var s,i,a=e._value;null!=a?(s=a.name||"Error",i=a.message||a,r=Eg(a,0)):(s=a,i=""),t.push(s+(i?": "+i:"")+r)}return wg&&((r=Eg(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&ky(e._prev,t,n)),t}function _y(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ny(){Ey()&&Sy()}function Ey(){var e=ry;return ry=!1,sy=!1,e}function Sy(){var e,t,n;do{for(;dy.length>0;)for(e=dy,dy=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(dy.length>0);ry=!0,sy=!0}function Cy(){var e=iy;iy=[],e.forEach(e=>{e._PSD.onunhandled.call(null,e._value,e)});for(var t=fy.slice(0),n=t.length;n;)t[--n]()}function Iy(e){return new py(Gg,!1,e)}function Ty(e,t){var n=uy;return function(){var r=Ey(),s=uy;try{return zy(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{zy(s,!1),r&&Sy()}}}Hm(py.prototype,{then:my,_then:function(e,t){wy(this,new gy(null,null,e,t,uy))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,e=>e instanceof t?n(e):Iy(e)):this.then(null,e=>e&&e.name===t?n(e):Iy(e))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Iy(t)))},stack:{get:function(){if(this._stack)return this._stack;try{ey=!0;var e=ky(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ey=!1}}},timeout:function(e,t){return e<1/0?new py((n,r)=>{var s=setTimeout(()=>r(new Rg.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Gm(py.prototype,Symbol.toStringTag,"Dexie.Promise"),cy.env=Ky(),Hm(py,{all:function(){var e=vg.apply(null,arguments).map(Uy);return new py(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((s,i)=>py.resolve(s).then(n=>{e[i]=n,--r||t(e)},n))})},resolve:e=>{if(e instanceof py)return e;if(e&&"function"==typeof e.then)return new py((t,n)=>{e.then(t,n)});var t=new py(Gg,!0,e);return _y(t,oy),t},reject:Iy,race:function(){var e=vg.apply(null,arguments).map(Uy);return new py((t,n)=>{e.map(e=>py.resolve(e).then(t,n))})},PSD:{get:()=>uy,set:e=>uy=e},totalEchoes:{get:()=>Oy},newPSD:My,usePSD:qy,scheduler:{get:()=>ny,set:e=>{ny=e}},rejectionMapper:{get:()=>ly,set:e=>{ly=e}},follow:(e,t)=>new py((n,r)=>My((t,n)=>{var r=uy;r.unhandleds=[],r.onunhandled=n,r.finalize=Bg(function(){!function(e){fy.push(function t(){e(),fy.splice(fy.indexOf(t),1)}),++hy,ny(()=>{0==--hy&&Cy()},[])}(()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])})},r.finalize),e()},t,n,r))}),$g&&($g.allSettled&&Gm(py,"allSettled",function(){const e=vg.apply(null,arguments).map(Uy);return new py(t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach((e,s)=>py.resolve(e).then(e=>r[s]={status:"fulfilled",value:e},e=>r[s]={status:"rejected",reason:e}).then(()=>--n||t(r)))})}),$g.any&&"undefined"!=typeof AggregateError&&Gm(py,"any",function(){const e=vg.apply(null,arguments).map(Uy);return new py((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach((e,i)=>py.resolve(e).then(e=>t(e),e=>{s[i]=e,--r||n(new AggregateError(s))}))})}));const jy={awaits:0,echoes:0,id:0};var Dy=0,Ay=[],Py=0,Oy=0,Ry=0;function My(e,t,n,r){var s=uy,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++Ry;var a=cy.env;i.env=Zg?{Promise:py,PromiseProp:{value:py,configurable:!0,writable:!0},all:py.all,race:py.race,allSettled:py.allSettled,any:py.any,resolve:py.resolve,reject:py.reject,nthen:Gy(a.nthen,i),gthen:Gy(a.gthen,i)}:{},t&&Bm(i,t),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=qy(i,e,n,r);return 0===i.ref&&i.finalize(),o}function Ly(){return jy.id||(jy.id=++Dy),++jy.awaits,jy.echoes+=100,jy.id}function Fy(){return!!jy.awaits&&(0==--jy.awaits&&(jy.id=0),jy.echoes=100*jy.awaits,!0)}function Uy(e){return jy.echoes&&e&&e.constructor===$g?(Ly(),e.then(e=>(Fy(),e),e=>(Fy(),Xy(e)))):e}function Vy(e){++Oy,jy.echoes&&0!=--jy.echoes||(jy.echoes=jy.id=0),Ay.push(uy),zy(e,!0)}function By(){var e=Ay[Ay.length-1];Ay.pop(),zy(e,!1)}function zy(e,t){var n=uy;if((t?!jy.echoes||Py++&&e===uy:!Py||--Py&&e===uy)||Hy(t?Vy.bind(null,e):By),e!==uy&&(uy=e,n===cy&&(cy.env=Ky()),Zg)){var r=cy.env.Promise,s=e.env;Yg.then=s.nthen,r.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(Fm,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function Ky(){var e=Fm.Promise;return Zg?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Fm,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Yg.then,gthen:e.prototype.then}:{}}function qy(e,t,n,r,s){var i=uy;try{return zy(e,!0),t(n,r,s)}finally{zy(i,!1)}}function Hy(e){Jg.call(Qg,e)}function Wy(e,t,n,r){return"function"!=typeof e?e:function(){var s=uy;n&&Ly(),zy(t,!0);try{return e.apply(this,arguments)}finally{zy(s,!1),r&&Hy(Fy)}}}function Gy(e,t){return function(n,r){return e.call(this,Wy(n,t),Wy(r,t))}}-1===(""+Jg).indexOf("[native code]")&&(Ly=Fy=Fg);const Qy="unhandledrejection";function Yy(e,t){var n;try{n=t.onuncatched(e)}catch(Fm){}if(!1!==n)try{var r,s={promise:t,reason:e};if(Fm.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Qy,!0,!0),Bm(r,s)):Fm.CustomEvent&&Bm(r=new CustomEvent(Qy,{detail:s}),s),r&&Fm.dispatchEvent&&(dispatchEvent(r),!Fm.PromiseRejectionEvent&&Fm.onunhandledrejection))try{Fm.onunhandledrejection(r)}catch(Fm){}wg&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(Fm){}}var Xy=py.reject;function Jy(e,t,n,r){if(e.idbdb&&(e._state.openComplete||uy.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Pg.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Jy(e,t,n,r))):Xy(s)}return s._promise(t,(e,t)=>My(()=>(uy.trans=s,r(e,t,s)))).then(e=>s._completion.then(()=>e))}if(e._state.openComplete)return Xy(new Rg.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Xy(new Rg.DatabaseClosed);e.open().catch(Fg)}return e._state.dbReadyPromise.then(()=>Jy(e,t,n,r))}const $y="3.2.7",Zy=String.fromCharCode(65535),ev=-1/0,tv="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",nv="String expected.",rv=[],sv="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),iv=sv,av=sv,ov=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),lv="__dbnames",cv="readonly",uv="readwrite";function dv(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const hv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function fv(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=dg(t))[e],t)}class pv{_trans(e,t,n){const r=this._tx||uy.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new Rg.NotFound("Table "+s+" not part of transaction");return t(r.idbtrans,r)}const a=Ey();try{return r&&r.db===this.db?r===uy.trans?r._promise(e,i,n):My(()=>r._promise(e,i,n),{trans:r,transless:uy.transless||uy}):Jy(this.db,e,[this.name],i)}finally{a&&Sy()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",t=>this.core.get({trans:t,key:e}).then(e=>this.hook.reading.fire(e))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Vm(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));const t=Um(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(e=>{if(e.compound&&t.every(t=>e.keyPath.indexOf(t)>=0)){for(let n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort((e,t)=>e.keyPath.length-t.keyPath.length)[0];if(n&&this.db._maxKey!==Zy){const r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(t=>e[t]))}!n&&wg&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));const{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function i(e,t){try{return 0===s.cmp(e,t)}catch(e){return!1}}const[a,o]=t.reduce((t,n)=>{let[s,a]=t;const o=r[n],l=e[n];return[s||o,s||!o?dv(a,o&&o.multi?e=>{const t=rg(e,n);return Vm(t)&&t.some(e=>i(l,e))}:e=>i(l,rg(e,n))):a]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(o):n?this.filter(o):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Vm(e)?"[".concat(e.join("+"),"]"):e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(qm(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass(function(e){Bm(this,e)})}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=fv(r)(e)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})).then(e=>e.numFailures?py.reject(e.failures[0]):e.lastResult).then(t=>{if(r)try{sg(e,r,t)}catch(e){}return t})}update(e,t){if("object"!=typeof e||Vm(e))return this.where(":id").equals(e).modify(t);{const n=rg(e,this.schema.primKey.keyPath);if(void 0===n)return Xy(new Rg.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?Um(t).forEach(n=>{sg(e,n,t[n])}):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=fv(r)(e)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})).then(e=>e.numFailures?py.reject(e.failures[0]):e.lastResult).then(t=>{if(r)try{sg(e,r,t)}catch(e){}return t})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]})).then(e=>e.numFailures?py.reject(e.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:hv})).then(e=>e.numFailures?py.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(e=>e.map(e=>this.hook.reading.fire(e))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new Rg.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new Rg.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let o=i&&n?e.map(fv(i)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:o,wantResults:s}).then(e=>{let{numFailures:t,results:n,lastResult:r,failures:i}=e;if(0===t)return s?n:r;throw new Ag("".concat(this.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),i)})})}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new Rg.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new Rg.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let o=i&&n?e.map(fv(i)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:o,wantResults:s}).then(e=>{let{numFailures:t,results:n,lastResult:r,failures:i}=e;if(0===t)return s?n:r;throw new Ag("".concat(this.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),i)})})}bulkDelete(e){const t=e.length;return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:e})).then(e=>{let{numFailures:n,lastResult:r,failures:s}=e;if(0===n)return r;throw new Ag("".concat(this.name,".bulkDelete(): ").concat(n," of ").concat(t," operations failed"),s)})}}function mv(e){var t={},n=function(n,r){if(r){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(e,r,s){if("object"!=typeof e){var a;r||(r=Hg),s||(s=Fg);var o={subscribers:[],fire:s,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter(function(t){return t!==e}),o.fire=o.subscribers.reduce(r,s)}};return t[e]=n[e]=o,o}Um(a=e).forEach(function(e){var t=a[e];if(Vm(t))i(e,a[e][0],a[e][1]);else{if("asap"!==t)throw new Rg.InvalidArgument("Invalid event config");var n=i(e,Ug,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){tg(function(){e.apply(null,t)})})})}})}}function gv(e,t){return Qm(t).from({prototype:e}),t}function yv(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vv(e,t){e.filter=dv(e.filter,t)}function bv(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>dv(r(),t()):t,e.justLimit=n&&!r}function wv(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Rg.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function xv(e,t,n){const r=wv(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function kv(e,t,n,r){const s=e.replayFilter?dv(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,e=>n.stop(e),e=>n.fail(e))){var a=n.primaryKey,o=""+a;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(a)),qm(i,o)||(i[o]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),_v(xv(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return _v(xv(e,r,n),dv(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function _v(e,t,n,r){var s=Ty(r?(e,t,s)=>n(r(e),t,s):n);return e.then(e=>{if(e)return e.start(()=>{var n=()=>e.continue();t&&!t(e,e=>n=e,t=>{e.stop(t),n=Fg},t=>{e.fail(t),n=Fg})||s(e.value,e,e=>n=e),n()})})}function Nv(e,t){try{const n=Ev(e),r=Ev(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let i=0;i<s;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}(Sv(e),Sv(t));case"Array":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let i=0;i<s;++i){const n=Nv(e[i],t[i]);if(0!==n)return n}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Ev(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=pg(e);return"ArrayBuffer"===n?"binary":n}function Sv(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Cv{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,Xy.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,Xy.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=dv(t.algorithm,e)}_iterate(e,t){return kv(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&Bm(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(n=>kv(t,e,n,t.table.core))}count(e){return this._read(e=>{const t=this._ctx,n=t.table.core;if(yv(t,!0))return n.count({trans:e,query:{index:wv(t,n.schema),range:t.range}}).then(e=>Math.min(e,t.limit));var r=0;return kv(t,()=>(++r,!1),e,n).then(()=>r)}).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function o(e,t){var n=i(e,s),r=i(t,s);return n<r?-a:n>r?a:0}return this.toArray(function(e){return e.sort(o)}).then(t)}toArray(e){return this._read(e=>{var t=this._ctx;if("next"===t.dir&&yv(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=wv(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then(e=>{let{result:t}=e;return n?t.map(n):t})}{const n=[];return kv(t,e=>n.push(e),e,t.table.core).then(()=>n)}},e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,yv(t)?bv(t,()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n(()=>{e.advance(t),t=0}),!1))}):bv(t,()=>{var t=e;return()=>--t<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),bv(this._ctx,()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this}until(e,t){return vv(this._ctx,function(n,r,s){return!e(n.value)||(r(s),t)}),this}first(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return vv(this._ctx,function(t){return e(t.value)}),t=this._ctx,n=e,t.isMatch=dv(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&yv(t,!0)&&t.limit>0)return this._read(e=>{var n=wv(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(e=>{let{result:t}=e;return t}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(e){return e[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return vv(this._ctx,function(e){var t=e.primaryKey.toString(),r=qm(n,t);return n[t]=!0,!r}),this}modify(e){var t=this._ctx;return this._write(n=>{var r;if("function"==typeof e)r=e;else{var s=Um(e),i=s.length;r=function(t){for(var n=!1,r=0;r<i;++r){var a=s[r],o=e[a];rg(t,a)!==o&&(sg(t,a,o),n=!0)}return n}}const a=t.table.core,{outbound:o,extractKey:l}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,u=[];let d=0;const h=[],f=(e,t)=>{const{failures:n,numFailures:r}=t;d+=e-r;for(let s of Um(n))u.push(n[s])};return this.clone().primaryKeys().then(s=>{const i=u=>{const d=Math.min(c,s.length-u);return a.getMany({trans:n,keys:s.slice(u,u+d),cache:"immutable"}).then(h=>{const p=[],m=[],g=o?[]:null,y=[];for(let e=0;e<d;++e){const t=h[e],n={value:dg(t),primKey:s[u+e]};!1!==r.call(n,n.value,n)&&(null==n.value?y.push(s[u+e]):o||0===Nv(l(t),l(n.value))?(m.push(n.value),o&&g.push(s[u+e])):(y.push(s[u+e]),p.push(n.value)))}const v=yv(t)&&t.limit===1/0&&("function"!=typeof e||e===Iv)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&a.mutate({trans:n,type:"add",values:p}).then(e=>{for(let t in e.failures)y.splice(parseInt(t),1);f(p.length,e)})).then(()=>(m.length>0||v&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:g,values:m,criteria:v,changeSpec:"function"!=typeof e&&e}).then(e=>f(m.length,e))).then(()=>(y.length>0||v&&e===Iv)&&a.mutate({trans:n,type:"delete",keys:y,criteria:v}).then(e=>f(y.length,e))).then(()=>s.length>u+d&&i(u+c))})};return i(0).then(()=>{if(u.length>0)throw new Dg("Error modifying one or more objects",u,d,h);return s.length})})})}delete(){var e=this._ctx,t=e.range;return yv(e)&&(e.isPrimKey&&!av||3===t.type)?this._write(n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then(t=>e.table.core.mutate({trans:n,type:"deleteRange",range:s}).then(e=>{let{failures:n,lastResult:r,results:s,numFailures:i}=e;if(i)throw new Dg("Could not delete some values",Object.keys(n).map(e=>n[e]),t-i);return t-i}))}):this.modify(Iv)}}const Iv=(e,t)=>t.value=null;function Tv(e,t){return e<t?-1:e===t?0:1}function jv(e,t){return e>t?-1:e===t?0:1}function Dv(e,t,n){var r=e instanceof Lv?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Av(e){return new e.Collection(e,()=>Mv("")).limit(0)}function Pv(e,t,n,r,s,i){for(var a=Math.min(e.length,r.length),o=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return s(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):s(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;s(e[l],c)<0&&(o=l)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function Ov(e,t,n,r){var s,i,a,o,l,c,u,d=n.length;if(!n.every(e=>"string"==typeof e))return Dv(e,nv);function h(e){s=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),a="next"===e?Tv:jv;var t=n.map(function(e){return{lower:i(e),upper:s(e)}}).sort(function(e,t){return a(e.lower,t.lower)});o=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),c=e,u="next"===e?"":r}h("next");var f=new e.Collection(e,()=>Rv(o[0],l[d-1]+r));f._ondirectionchange=function(e){h(e)};var p=0;return f._addAlgorithm(function(e,n,r){var s=e.key;if("string"!=typeof s)return!1;var h=i(s);if(t(h,l,p))return!0;for(var f=null,m=p;m<d;++m){var g=Pv(s,h,o[m],l[m],a,c);null===g&&null===f?p=m+1:(null===f||a(f,g)>0)&&(f=g)}return n(null!==f?function(){e.continue(f+u)}:r),!1}),f}function Rv(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Mv(e){return{type:1,lower:e,upper:e}}class Lv{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Av(this):new this.Collection(this,()=>Rv(e,t,!n,!r))}catch(e){return Dv(this,tv)}}equals(e){return null==e?Dv(this,tv):new this.Collection(this,()=>Mv(e))}above(e){return null==e?Dv(this,tv):new this.Collection(this,()=>Rv(e,void 0,!0))}aboveOrEqual(e){return null==e?Dv(this,tv):new this.Collection(this,()=>Rv(e,void 0,!1))}below(e){return null==e?Dv(this,tv):new this.Collection(this,()=>Rv(void 0,e,!1,!0))}belowOrEqual(e){return null==e?Dv(this,tv):new this.Collection(this,()=>Rv(void 0,e))}startsWith(e){return"string"!=typeof e?Dv(this,nv):this.between(e,e+Zy,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Ov(this,(e,t)=>0===e.indexOf(t[0]),[e],Zy)}equalsIgnoreCase(e){return Ov(this,(e,t)=>e===t[0],[e],"")}anyOfIgnoreCase(){var e=vg.apply(yg,arguments);return 0===e.length?Av(this):Ov(this,(e,t)=>-1!==t.indexOf(e),e,"")}startsWithAnyOfIgnoreCase(){var e=vg.apply(yg,arguments);return 0===e.length?Av(this):Ov(this,(e,t)=>t.some(t=>0===e.indexOf(t)),e,Zy)}anyOf(){const e=vg.apply(yg,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Dv(this,tv)}if(0===e.length)return Av(this);const n=new this.Collection(this,()=>Rv(e[0],e[e.length-1]));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm((n,s,i)=>{const a=n.key;for(;t(a,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(a,e[r])||(s(()=>{n.continue(e[r])}),!1)}),n}notEqual(e){return this.inAnyRange([[ev,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=vg.apply(yg,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Dv(this,tv)}const t=e.reduce((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[ev,t]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,a=this._max;if(0===e.length)return Av(this);if(!e.every(e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0))return Dv(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Rg.InvalidArgument);const o=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let c,u=r;function d(e,t){return u(e[0],t[0])}try{c=e.reduce(function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=a(s[1],t[1]);break}}return r===s&&e.push(t),e},[]),c.sort(d)}catch(e){return Dv(this,tv)}let h=0;const f=l?e=>r(e,c[h][1])>0:e=>r(e,c[h][1])>=0,p=o?e=>s(e,c[h][0])>0:e=>s(e,c[h][0])>=0;let m=f;const g=new this.Collection(this,()=>Rv(c[0][0],c[c.length-1][1],!o,!l));return g._ondirectionchange=e=>{"next"===e?(m=f,u=r):(m=p,u=s),c.sort(d)},g._addAlgorithm((e,t,n)=>{for(var s=e.key;m(s);)if(++h,h===c.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(s)||(0===this._cmp(s,c[h][1])||0===this._cmp(s,c[h][0])||t(()=>{u===r?e.continue(c[h][0]):e.continue(c[h][1])}),!1)}),g}startsWithAnyOf(){const e=vg.apply(yg,arguments);return e.every(e=>"string"==typeof e)?0===e.length?Av(this):this.inAnyRange(e.map(e=>[e,e+Zy])):Dv(this,"startsWithAnyOf() only works with strings")}}function Fv(e){return Ty(function(t){return Uv(t),e(t.target.error),!1})}function Uv(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Vv="storagemutated",Bv="x-storagemutated-1",zv=mv(null,Vv);class Kv{_lock(){return eg(!uy.global),++this._reculock,1!==this._reculock||uy.global||(uy.lockOwnerFor=this),this}_unlock(){if(eg(!uy.global),0==--this._reculock)for(uy.global||(uy.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{qy(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&uy.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(eg(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Rg.DatabaseClosed(n);case"MissingAPIError":throw new Rg.MissingAPI(n.message,n);default:throw new Rg.OpenFailed(n)}if(!this.active)throw new Rg.TransactionInactive;return eg(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ty(t=>{Uv(t),this._reject(e.error)}),e.onabort=Ty(t=>{Uv(t),this.active&&this._reject(new Rg.Abort(e.error)),this.active=!1,this.on("abort").fire(t)}),e.oncomplete=Ty(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&zv.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return Xy(new Rg.ReadOnly("Transaction is readonly"));if(!this.active)return Xy(new Rg.TransactionInactive);if(this._locked())return new py((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},uy])});if(n)return My(()=>{var e=new py((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)});return e.finally(()=>this._unlock()),e._lib=!0,e});var r=new py((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=py.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new py((e,r)=>{n.then(n=>t._waitingQueue.push(Ty(e.bind(null,n))),e=>t._waitingQueue.push(Ty(r.bind(null,e)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Rg.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(qm(t,e))return t[e];const n=this.schema[e];if(!n)throw new Rg.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function qv(e,t,n,r,s,i,a){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(s?"++":"")+Hv(t)}}function Hv(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Wv(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ng(n,e=>[e.name,e])}}let Gv=e=>{try{return e.only([[]]),Gv=()=>[[]],[[]]}catch(e){return Gv=()=>Zy,Zy}};function Qv(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>rg(t,e)}(e):t=>rg(t,e)}function Yv(e){return[].slice.call(e)}let Xv=0;function Jv(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function $v(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:s,hasGetAll:i}=function(e,t){const n=Yv(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(e=>t.objectStore(e)).map(e=>{const{keyPath:t,autoIncrement:n}=e,r=Vm(t),s=null==t,i={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:s,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Qv(t)},indexes:Yv(e.indexNames).map(t=>e.index(t)).map(e=>{const{name:t,unique:n,multiEntry:r,keyPath:s}=e,a={name:t,compound:Vm(s),keyPath:s,unique:n,multiEntry:r,extractKey:Qv(s)};return i[Jv(s)]=a,a}),getIndexByKeyPath:e=>i[Jv(e)]};return i[":id"]=a.primaryKey,null!=t&&(i[Jv(t)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=s.tables.map(e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function(e){let{trans:n,type:s,keys:i,values:a,range:o}=e;return new Promise((e,l)=>{e=Ty(e);const c=n.objectStore(t),u=null==c.keyPath,d="put"===s||"add"===s;if(!d&&"delete"!==s&&"deleteRange"!==s)throw new Error("Invalid operation type: "+s);const{length:h}=i||a||{length:1};if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],m=[];let g=0;const y=e=>{++g,Uv(e)};if("deleteRange"===s){if(4===o.type)return e({numFailures:g,failures:m,results:[],lastResult:void 0});3===o.type?p.push(f=c.clear()):p.push(f=c.delete(r(o)))}else{const[e,t]=d?u?[a,i]:[a,null]:[i,null];if(d)for(let n=0;n<h;++n)p.push(f=t&&void 0!==t[n]?c[s](e[n],t[n]):c[s](e[n])),f.onerror=y;else for(let n=0;n<h;++n)p.push(f=c[s](e[n])),f.onerror=y}const v=t=>{const n=t.target.result;p.forEach((e,t)=>null!=e.error&&(m[t]=e.error)),e({numFailures:g,failures:m,results:"delete"===s?i:p.map(e=>e.result),lastResult:n})};f.onerror=e=>{y(e),v(e)},f.onsuccess=v})},getMany:e=>{let{trans:n,keys:r}=e;return new Promise((e,s)=>{e=Ty(e);const i=n.objectStore(t),a=r.length,o=new Array(a);let l,c=0,u=0;const d=t=>{const n=t.target;o[n._pos]=n.result,++u===c&&e(o)},h=Fv(s);for(let t=0;t<a;++t)null!=r[t]&&(l=i.get(r[t]),l._pos=t,l.onsuccess=d,l.onerror=h,++c);0===c&&e(o)})},get:e=>{let{trans:n,key:r}=e;return new Promise((e,s)=>{e=Ty(e);const i=n.objectStore(t).get(r);i.onsuccess=t=>e(t.target.result),i.onerror=Fv(s)})},query:function(e){return n=>new Promise((s,i)=>{s=Ty(s);const{trans:a,values:o,limit:l,query:c}=n,u=l===1/0?void 0:l,{index:d,range:h}=c,f=a.objectStore(t),p=d.isPrimaryKey?f:f.index(d.name),m=r(h);if(0===l)return s({result:[]});if(e){const e=o?p.getAll(m,u):p.getAllKeys(m,u);e.onsuccess=e=>s({result:e.target.result}),e.onerror=Fv(i)}else{let e=0;const t=o||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),n=[];t.onsuccess=r=>{const i=t.result;return i?(n.push(o?i.value:i.primaryKey),++e===l?s({result:n}):void i.continue()):s({result:n})},t.onerror=Fv(i)}})}(i),openCursor:function(e){let{trans:n,values:s,query:i,reverse:a,unique:o}=e;return new Promise((e,l)=>{e=Ty(e);const{index:c,range:u}=i,d=n.objectStore(t),h=c.isPrimaryKey?d:d.index(c.name),f=a?o?"prevunique":"prev":o?"nextunique":"next",p=s||!("openKeyCursor"in h)?h.openCursor(r(u),f):h.openKeyCursor(r(u),f);p.onerror=Fv(l),p.onsuccess=Ty(t=>{const r=p.result;if(!r)return void e(null);r.___id=++Xv,r.done=!1;const s=r.continue.bind(r);let i=r.continuePrimaryKey;i&&(i=i.bind(r));const a=r.advance.bind(r),o=()=>{throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=Ty(l),r.next=function(){let e=1;return this.start(()=>e--?this.continue():this.stop()).then(()=>this)},r.start=e=>{const t=new Promise((e,t)=>{e=Ty(e),p.onerror=Fv(t),r.fail=t,r.stop=t=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=o,e(t)}}),n=()=>{if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Ty(e=>{p.onsuccess=n,n()}),r.continue=s,r.continuePrimaryKey=i,r.advance=a,n(),t},e(r)},l)})},count(e){let{query:n,trans:s}=e;const{index:i,range:a}=n;return new Promise((e,n)=>{const o=s.objectStore(t),l=i.isPrimaryKey?o:o.index(i.name),c=r(a),u=c?l.count(c):l.count();u.onsuccess=Ty(t=>e(t.target.result)),u.onerror=Fv(n)})}}}(e)),o={};return a.forEach(e=>o[e.name]=e),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!o[e])throw new Error("Table '".concat(e,"' not found"));return o[e]},MIN_KEY:-1/0,MAX_KEY:Gv(t),schema:s}}function Zv(e,t){let{_novip:n}=e;const r=t.db,s=function(e,t,n,r){let{IDBKeyRange:s,indexedDB:i}=n;const a=function(e,t){return t.reduce((e,t)=>{let{create:n}=t;return c(c({},e),n(e))},e)}($v(t,s,r),e.dbcore);return{dbcore:a}}(n._middlewares,r,n._deps,t);n.core=s.dbcore,n.tables.forEach(e=>{const t=e.name;n.core.schema.tables.some(e=>e.name===t)&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))})}function eb(e,t,n,r){let{_novip:s}=e;n.forEach(e=>{const n=r[e];t.forEach(t=>{const r=Xm(t,e);(!r||"value"in r&&void 0===r.value)&&(t===s.Transaction.prototype||t instanceof s.Transaction?Gm(t,e,{get(){return this.table(e)},set(t){Wm(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new s.Table(e,n))})})}function tb(e,t){let{_novip:n}=e;t.forEach(e=>{for(let t in e)e[t]instanceof n.Table&&delete e[t]})}function nb(e,t){return e._cfg.version-t._cfg.version}function rb(e,t,n,r){const s=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,s);i.create(n),i._completion.catch(r);const a=i._reject.bind(i),o=uy.transless||uy;My(()=>{uy.trans=i,uy.transless=o,0===t?(Um(s).forEach(e=>{ib(n,e,s[e].primKey,s[e].indexes)}),Zv(e,n),py.follow(()=>e.on.populate.fire(i)).catch(a)):function(e,t,n,r){let{_novip:s}=e;const i=[],a=s._versions;let o=s._dbSchema=ob(s,s.idbdb,r),l=!1;const c=a.filter(e=>e._cfg.version>=t);return c.forEach(e=>{i.push(()=>{const i=o,a=e._cfg.dbschema;lb(s,i,r),lb(s,a,r),o=s._dbSchema=a;const c=sb(i,a);c.add.forEach(e=>{ib(r,e[0],e[1].primKey,e[1].indexes)}),c.change.forEach(e=>{if(e.recreate)throw new Rg.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach(e=>ab(t,e)),e.change.forEach(e=>{t.deleteIndex(e.name),ab(t,e)}),e.del.forEach(e=>t.deleteIndex(e))}});const u=e._cfg.contentUpgrade;if(u&&e._cfg.version>t){Zv(s,r),n._memoizedTables={},l=!0;let e=ig(a);c.del.forEach(t=>{e[t]=i[t]}),tb(s,[s.Transaction.prototype]),eb(s,[s.Transaction.prototype],Um(e),e),n.schema=e;const t=bg(u);let o;t&&Ly();const d=py.follow(()=>{if(o=u(n),o&&t){var e=Fy.bind(null,null);o.then(e,e)}});return o&&"function"==typeof o.then?py.resolve(o):d.then(()=>o)}}),i.push(t=>{l&&iv||function(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>null==e[n]&&t.db.deleteObjectStore(n))}(e._cfg.dbschema,t),tb(s,[s.Transaction.prototype]),eb(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),n.schema=s._dbSchema})}),function e(){return i.length?py.resolve(i.shift()(n.idbtrans)).then(e):py.resolve()}().then(()=>{var e,t;t=r,Um(e=o).forEach(n=>{t.db.objectStoreNames.contains(n)||ib(t,n,e[n].primKey,e[n].indexes)})})}(e,t,i,n).catch(a)})}function sb(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!sv)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let a;for(a in t)r[a]||e.del.push(a);for(a in r){const n=t[a],s=r[a];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function ib(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(e=>ab(s,e)),s}function ab(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ob(e,t,n){const r={};return $m(t.objectStoreNames,0).forEach(e=>{const t=n.objectStore(e);let s=t.keyPath;const i=qv(Hv(s),s||"",!1,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),a=[];for(let n=0;n<t.indexNames.length;++n){const e=t.index(t.indexNames[n]);s=e.keyPath;var o=qv(e.name,s,!!e.unique,!!e.multiEntry,!1,s&&"string"!=typeof s,!1);a.push(o)}r[e]=Wv(e,i,a)}),r}function lb(e,t,n){let{_novip:r}=e;const s=n.db.objectStoreNames;for(let i=0;i<s.length;++i){const e=s[i],a=n.objectStore(e);r._hasGetAll="getAll"in a;for(let n=0;n<a.indexNames.length;++n){const r=a.indexNames[n],s=a.index(r).keyPath,i="string"==typeof s?s:"["+$m(s).join("+")+"]";if(t[e]){const n=t[e].idxByName[i];n&&(n.name=r,delete t[e].idxByName[i],t[e].idxByName[r]=n)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Fm.WorkerGlobalScope&&Fm instanceof Fm.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}class cb{_parseStoresSpec(e,t){Um(e).forEach(n=>{if(null!==e[n]){var r=e[n].split(",").map((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return qv(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Vm(r),0===t)}),s=r.shift();if(s.multi)throw new Rg.Schema("Primary key cannot be multi-valued");r.forEach(e=>{if(e.auto)throw new Rg.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Rg.Schema("Index must have a name and cannot be an empty string")}),t[n]=Wv(n,s,r)}})}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?Bm(this._cfg.storesSource,e):e;const n=t._versions,r={};let s={};return n.forEach(e=>{Bm(r,e._cfg.storesSource),s=e._cfg.dbschema={},e._parseStoresSpec(r,s)}),t._dbSchema=s,tb(t,[t._allTables,t,t.Transaction.prototype]),eb(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Um(s),s),t._storeNames=Um(s),this}upgrade(e){return this._cfg.contentUpgrade=Wg(this._cfg.contentUpgrade||Fg,e),this}}function ub(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Db(lv,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function db(e){return e&&"function"==typeof e.databases}function hb(e){return My(function(){return uy.letThrough=!0,e()})}function fb(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function pb(e){var t=t=>e.next(t),n=s(t),r=s(t=>e.throw(t));function s(e){return t=>{var s=e(t),i=s.value;return s.done?i:i&&"function"==typeof i.then?i.then(n,r):Vm(i)?Promise.all(i).then(n,r):n(i)}}return s(t)()}function mb(e,t,n){var r=arguments.length;if(r<2)throw new Rg.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[e,og(s),n]}function gb(e,t,n,r,s){return py.resolve().then(()=>{const i=uy.transless||uy,a=e._createTransaction(t,n,e._dbSchema,r),o={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===Pg.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>gb(e,t,n,null,s))):Xy(r)}const l=bg(s);let c;l&&Ly();const u=py.follow(()=>{if(c=s.call(a,a),c)if(l){var e=Fy.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=pb(c))},o);return(c&&"function"==typeof c.then?py.resolve(c).then(e=>a.active?e:Xy(new Rg.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(e=>(r&&a._resolve(),a._completion.then(()=>e))).catch(e=>(a._reject(e),Xy(e)))})}function yb(e,t,n){const r=Vm(e)?e.slice():[e];for(let s=0;s<n;++s)r.push(t);return r}const vb={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return c(c({},e),{},{table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function a(e,t,n){const r=Jv(e),o=s[r]=s[r]||[],l=null==e?0:"string"==typeof e?1:e.length,u=t>0,d=c(c({},n),{},{isVirtual:u,keyTail:t,keyLength:l,extractKey:Qv(e),unique:!u&&n.unique});return o.push(d),d.isPrimaryKey||i.push(d),l>1&&a(2===l?e[0]:e.slice(0,l-1),t+1,n),o.sort((e,t)=>e.keyTail-t.keyTail),d}const o=a(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[o];for(const e of r.indexes)a(e.keyPath,0,e);function l(t){const n=t.query.index;return n.isVirtual?c(c({},t),{},{query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:yb(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:yb(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}):t;var r,s}const u=c(c({},n),{},{schema:c(c({},r),{},{primaryKey:o,indexes:i,getIndexByKeyPath:function(e){const t=s[Jv(e)];return t&&t[0]}}),count:e=>n.count(l(e)),query:e=>n.query(l(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;return s?n.openCursor(l(t)).then(n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(yb(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(yb(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n)):n.openCursor(t)}});return u}})}};function bb(e,t,n,r){return n=n||{},r=r||"",Um(e).forEach(s=>{if(qm(t,s)){var i=e[s],a=t[s];if("object"==typeof i&&"object"==typeof a&&i&&a){const e=pg(i);e!==pg(a)?n[r+s]=t[s]:"Object"===e?bb(i,a,n,r+s+"."):i!==a&&(n[r+s]=t[s])}else i!==a&&(n[r+s]=t[s])}else n[r+s]=void 0}),Um(t).forEach(s=>{qm(e,s)||(n[r+s]=t[s])}),n}const wb={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>c(c({},e),{},{table(t){const n=e.table(t),{primaryKey:r}=n.schema,s=c(c({},n),{},{mutate(e){const s=uy.trans,{deleting:i,creating:a,updating:o}=s.table(t).hook;switch(e.type){case"add":if(a.fire===Fg)break;return s._promise("readwrite",()=>l(e),!0);case"put":if(a.fire===Fg&&o.fire===Fg)break;return s._promise("readwrite",()=>l(e),!0);case"delete":if(i.fire===Fg)break;return s._promise("readwrite",()=>l(e),!0);case"deleteRange":if(i.fire===Fg)break;return s._promise("readwrite",()=>function(e){return u(e.trans,e.range,1e4)}(e),!0)}return n.mutate(e);function l(e){const t=uy.trans,s=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?c(c({},e),{},{keys:s}):c({},e)).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,s).then(l=>{const c=s.map((n,s)=>{const c=l[s],u={onerror:null,onsuccess:null};if("delete"===e.type)i.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){const i=a.fire.call(u,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||sg(e.values[s],r.keyPath,n))}else{const r=bb(c,e.values[s]),i=o.fire.call(u,r,n,c,t);if(i){const t=e.values[s];Object.keys(i).forEach(e=>{qm(t,e)?t[e]=i[e]:sg(t,e,i[e])})}}return u});return n.mutate(e).then(t=>{let{failures:n,results:r,numFailures:i,lastResult:a}=t;for(let o=0;o<s.length;++o){const t=r?r[o]:s[o],i=c[o];null==t?i.onerror&&i.onerror(n[o]):i.onsuccess&&i.onsuccess("put"===e.type&&l[o]?e.values[o]:t)}return{failures:n,results:r,numFailures:i,lastResult:a}}).catch(e=>(c.forEach(t=>t.onerror&&t.onerror(e)),Promise.reject(e)))})}function u(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then(n=>{let{result:r}=n;return l({type:"delete",keys:r,trans:e}).then(n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<s?{failures:[],numFailures:0,lastResult:void 0}:u(e,c(c({},t),{},{lower:r[r.length-1],lowerOpen:!0}),s))})}}});return s}})};function xb(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===Nv(t.keys[s],e[i])&&(r.push(n?dg(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const kb={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return c(c({},n),{},{getMany:e=>{if(!e.cache)return n.getMany(e);const t=xb(e.keys,e.trans._cache,"clone"===e.cache);return t?py.resolve(t):n.getMany(e).then(t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?dg(t):t},t))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))})}})};function _b(e){return!("from"in e)}const Nb=function(e,t){if(!this){const t=new Nb;return e&&"d"in e&&Bm(t,e),t}Bm(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Eb(e,t,n){const r=Nv(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(_b(e))return Bm(e,{from:t,to:n,d:1});const s=e.l,i=e.r;if(Nv(n,e.from)<0)return s?Eb(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ib(e);if(Nv(t,e.to)>0)return i?Eb(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ib(e);Nv(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),Nv(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;s&&!e.l&&Sb(e,s),i&&a&&Sb(e,i)}function Sb(e,t){_b(t)||function e(t,n){let{from:r,to:s,l:i,r:a}=n;Eb(t,r,s),i&&e(t,i),a&&e(t,a)}(e,t)}function Cb(e){let t=_b(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Nv(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Nv(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ib(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const t="r"===s?"l":"r",n=c({},e),r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=Tb(n)}e.d=Tb(e)}function Tb(e){let{r:t,l:n}=e;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}Hm(Nb.prototype,{add(e){return Sb(this,e),this},addKey(e){return Eb(this,e,e),this},addKeys(e){return e.forEach(e=>Eb(this,e,e)),this},[mg](){return Cb(this)}});const jb={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Nb(e.MIN_KEY,e.MAX_KEY);return c(c({},e),{},{table:r=>{const s=e.table(r),{schema:i}=s,{primaryKey:a}=i,{extractKey:o,outbound:l}=a,u=c(c({},s),{},{mutate:e=>{const a=e.trans,o=a.mutatedParts||(a.mutatedParts={}),l=e=>{const n="idb://".concat(t,"/").concat(r,"/").concat(e);return o[n]||(o[n]=new Nb)},c=l(""),u=l(":dels"),{type:d}=e;let[h,f]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const p=e.trans._cache;return s.mutate(e).then(e=>{if(Vm(h)){"delete"!==d&&(h=e.results),c.addKeys(h);const t=xb(h,p);t||"add"===d||u.addKeys(h),(t||f)&&function(e,t,n,r){t.indexes.forEach(function(t){const s=e(t.name||"");function i(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&Vm(e)?e.forEach(e=>s.addKey(e)):s.addKey(e);(n||r).forEach((e,t)=>{const s=n&&i(n[t]),o=r&&i(r[t]);0!==Nv(s,o)&&(null!=s&&a(s),null!=o&&a(o))})})}(l,i,t,f)}else if(h){const e={from:h.lower,to:h.upper};u.add(e),c.add(e)}else c.add(n),u.add(n),i.indexes.forEach(e=>l(e.name).add(n));return e})}}),d=t=>{let{query:{index:n,range:r}}=t;var s,i;return[n,new Nb(null!==(s=r.lower)&&void 0!==s?s:e.MIN_KEY,null!==(i=r.upper)&&void 0!==i?i:e.MAX_KEY)]},h={get:e=>[a,new Nb(e.key)],getMany:e=>[a,(new Nb).addKeys(e.keys)],count:d,query:d,openCursor:d};return Um(h).forEach(e=>{u[e]=function(i){const{subscr:a}=uy;if(a){const u=e=>{const n="idb://".concat(t,"/").concat(r,"/").concat(e);return a[n]||(a[n]=new Nb)},d=u(""),f=u(":dels"),[p,m]=h[e](i);if(u(p.name||"").add(m),!p.isPrimaryKey){if("count"!==e){const t="query"===e&&l&&i.values&&s.query(c(c({},i),{},{values:!1}));return s[e].apply(this,arguments).then(n=>{if("query"===e){if(l&&i.values)return t.then(e=>{let{result:t}=e;return d.addKeys(t),n});const e=i.values?n.result.map(o):n.result;i.values?d.addKeys(e):f.addKeys(e)}else if("openCursor"===e){const e=n,t=i.values;return e&&Object.create(e,{key:{get:()=>(f.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return f.addKey(t),t}},value:{get:()=>(t&&d.addKey(e.primaryKey),e.value)}})}return n})}f.add(n)}}return s[e].apply(this,arguments)}}),u}})}};class Db{constructor(e,t){this._middlewares={},this.verno=0;const n=Db.dependencies;this._options=t=c({addons:Db.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fg,dbReadyPromise:null,cancelOpen:Fg,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new py(e=>{s.dbReadyResolve=e}),s.openCanceller=new py((e,t)=>{s.cancelOpen=t}),this._state=s,this.name=e,this.on=mv(this,"populate","blocked","versionchange","close",{ready:[Wg,Fg]}),this.on.ready.subscribe=Zm(this.on.ready.subscribe,e=>(t,n)=>{Db.vip(()=>{const r=this._state;if(r.openComplete)r.dbOpenError||py.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e(function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)})}})}),this.Collection=(i=this,gv(Cv.prototype,function(e,t){this.db=i;let n=hv,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,a=s.table,o=a.hook.reading.fire;this._ctx={table:a,index:s.index,isPrimKey:!s.index||a.schema.primKey.keyPath&&s.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:o!==Ug?o:null}})),this.Table=function(e){return gv(pv.prototype,function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:mv(null,{creating:[zg,Fg],reading:[Vg,Ug],updating:[qg,Fg],deleting:[Kg,Fg]})})}(this),this.Transaction=function(e){return gv(Kv.prototype,function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=mv(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new py((e,t)=>{this._resolve=e,this._reject=t}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),Xy(e)})})}(this),this.Version=function(e){return gv(cb.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(e){return gv(Lv.prototype,function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new Rg.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange})}(this),this.on("versionchange",e=>{e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(this.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(this.name,"'. Closing db now to resume the delete request.")),this.close()}),this.on("blocked",e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(this.name,"') was blocked")):console.warn("Upgrade '".concat(this.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Gv(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),rv.filter(e=>e.name===this.name&&e!==this&&!e._state.vcFired).map(t=>t.on("versionchange").fire(e))},this.use(vb),this.use(wb),this.use(jb),this.use(kb),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(e=>e(this))}version(e){if(isNaN(e)||e<.1)throw new Rg.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Rg.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter(t=>t._cfg.version===e)[0];return n||(n=new this.Version(e),t.push(n),t.sort(nb),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||uy.letThrough||this._vip)?e():new py((e,t)=>{if(this._state.openComplete)return t(new Rg.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new Rg.DatabaseClosed);this.open().catch(Fg)}this._state.dbReadyPromise.then(e,t)}).then(e)}use(e){let{stack:t,create:n,level:r,name:s}=e;s&&this.unuse({stack:t,name:s});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:null==r?10:r,name:s}),i.sort((e,t)=>e.level-t.level),this}unuse(e){let{stack:t,name:n,create:r}=e;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(e=>r?e.create!==r:!!n&&e.name!==n)),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Xy(t.dbOpenError):e);wg&&(t.openCanceller._stackHolder=Ng()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function s(){if(t.openCanceller!==r)throw new Rg.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,a=null,o=!1;const l=()=>new py((r,i)=>{if(s(),!n)throw new Rg.MissingAPI;const l=e.name,c=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!c)throw new Rg.MissingAPI;c.onerror=Fv(i),c.onblocked=Ty(e._fireOnBlocked),c.onupgradeneeded=Ty(r=>{if(a=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=Uv,a.abort(),c.result.close();const e=n.deleteDatabase(l);e.onsuccess=e.onerror=Ty(()=>{i(new Rg.NoSuchDatabase("Database ".concat(l," doesnt exist")))})}else{a.onerror=Fv(i);var s=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;o=s<1,e._novip.idbdb=c.result,rb(e,s/10,a,i)}},i),c.onsuccess=Ty(()=>{a=null;const n=e._novip.idbdb=c.result,s=$m(n.objectStoreNames);if(s.length>0)try{const r=n.transaction(1===(i=s).length?i[0]:i,"readonly");t.autoSchema?function(e,t,n){let{_novip:r}=e;r.verno=t.version/10;const s=r._dbSchema=ob(0,t,n);r._storeNames=$m(t.objectStoreNames,0),eb(r,[r._allTables],Um(s),s)}(e,n,r):(lb(e,e._dbSchema,r),function(e,t){const n=sb(ob(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some(e=>e.add.length||e.change.length))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Zv(e,r)}catch(e){}var i;rv.push(e),n.onversionchange=Ty(n=>{t.vcFired=!0,e.on("versionchange").fire(n)}),n.onclose=Ty(t=>{e.on("close").fire(t)}),o&&function(e,t){let{indexedDB:n,IDBKeyRange:r}=e;!db(n)&&t!==lv&&ub(n,r).put({name:t}).catch(Fg)}(e._deps,l),r()},i)}).catch(e=>e&&"UnknownError"===e.name&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l()):py.reject(e));return py.race([r,("undefined"==typeof navigator?py.resolve():fb()).then(l)]).then(()=>(s(),t.onReadyBeingFired=[],py.resolve(hb(()=>e.on.ready.fire(e.vip))).then(function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(Wg,Fg);return t.onReadyBeingFired=[],py.resolve(hb(()=>r(e.vip))).then(n)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(n=>{t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),Xy(n)}).finally(()=>{t.openComplete=!0,i()})}(this)}_close(){const e=this._state,t=rv.indexOf(this);if(t>=0&&rv.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new py(t=>{e.dbReadyResolve=t}),e.openCanceller=new py((t,n)=>{e.cancelOpen=n})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Rg.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new py((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Ty(()=>{!function(e,t){let{indexedDB:n,IDBKeyRange:r}=e;!db(n)&&t!==lv&&ub(n,r).delete(t).catch(Fg)}(this._deps,this.name),n()}),e.onerror=Fv(r),e.onblocked=this._fireOnBlocked};if(e)throw new Rg.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Um(this._allTables).map(e=>this._allTables[e])}transaction(){const e=mb.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=uy.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const s=-1!==e.indexOf("?");let i,a;e=e.replace("!","").replace("?","");try{if(a=t.map(e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||e===cv)i=cv;else{if("rw"!=e&&e!=uv)throw new Rg.InvalidArgument("Invalid transaction mode: "+e);i=uv}if(r){if(r.mode===cv&&i===uv){if(!s)throw new Rg.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach(e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new Rg.SubTransaction("Table "+e+" not included in parent transaction.");r=null}}),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(t,n)=>{n(e)}):Xy(e)}const o=gb.bind(null,this,i,a,r,n);return r?r._promise(i,o,"lock"):uy.trans?qy(uy.transless,()=>this._whenReady(o)):this._whenReady(o)}table(e){if(!qm(this._allTables,e))throw new Rg.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}const Ab="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Pb{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[Ab](){return this}}function Ob(e,t){return Um(t).forEach(n=>{Sb(e[n]||(e[n]=new Nb),t[n])}),e}let Rb;try{Rb={indexedDB:Fm.indexedDB||Fm.mozIndexedDB||Fm.webkitIndexedDB||Fm.msIndexedDB,IDBKeyRange:Fm.IDBKeyRange||Fm.webkitIDBKeyRange}}catch(Fm){Rb={indexedDB:null,IDBKeyRange:null}}const Mb=Db;function Lb(e){let t=Fb;try{Fb=!0,zv.storagemutated.fire(e)}finally{Fb=t}}Hm(Mb,c(c({},Lg),{},{delete:e=>new Mb(e,{addons:[]}).delete(),exists:e=>new Mb(e,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function(e){let{indexedDB:t,IDBKeyRange:n}=e;return db(t)?Promise.resolve(t.databases()).then(e=>e.map(e=>e.name).filter(e=>e!==lv)):ub(t,n).toCollection().primaryKeys()}(Mb.dependencies).then(e)}catch(e){return Xy(new Rg.MissingAPI)}},defineClass:()=>function(e){Bm(this,e)},ignoreTransaction:e=>uy.trans?qy(uy.transless,e):e(),vip:hb,async:function(e){return function(){try{var t=pb(e.apply(this,arguments));return t&&"function"==typeof t.then?t:py.resolve(t)}catch(e){return Xy(e)}}},spawn:function(e,t,n){try{var r=pb(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:py.resolve(r)}catch(e){return Xy(e)}},currentTransaction:{get:()=>uy.trans||null},waitFor:function(e,t){const n=py.resolve("function"==typeof e?Mb.ignoreTransaction(e):e).timeout(t||6e4);return uy.trans?uy.trans.waitFor(n):n},Promise:py,debug:{get:()=>wg,set:e=>{xg(e,"dexie"===e?()=>!0:ov)}},derive:Qm,extend:Bm,props:Hm,override:Zm,Events:mv,on:zv,liveQuery:function(e){let t,n=!1;const r=new Pb(r=>{const s=bg(e);let i=!1,a={},o={};const l={get closed(){return i},unsubscribe:()=>{i=!0,zv.storagemutated.unsubscribe(h)}};r.start&&r.start(l);let c=!1,u=!1;function d(){return Um(o).some(e=>a[e]&&function(e,t){const n=Cb(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Cb(e);let a=i.next(s.from),o=a.value;for(;!r.done&&!a.done;){if(Nv(o.from,s.to)<=0&&Nv(o.to,s.from)>=0)return!0;Nv(s.from,o.from)<0?s=(r=n.next(o.from)).value:o=(a=i.next(s.from)).value}return!1}(a[e],o[e]))}const h=e=>{Ob(a,e),d()&&f()},f=()=>{if(c||i)return;a={};const p={},m=function(t){s&&Ly();const n=()=>My(e,{subscr:t,trans:null}),r=uy.trans?qy(uy.transless,n):n();return s&&r.then(Fy,Fy),r}(p);u||(zv(Vv,h),u=!0),c=!0,Promise.resolve(m).then(e=>{n=!0,t=e,c=!1,i||(d()?f():(a={},o=p,r.next&&r.next(e)))},e=>{c=!1,n=!1,r.error&&r.error(e),l.unsubscribe()})};return f(),l});return r.hasValue=()=>n,r.getValue=()=>t,r},extendObservabilitySet:Ob,getByKeyPath:rg,setByKeyPath:sg,delByKeyPath:function(e,t){"string"==typeof t?sg(e,t,void 0):"length"in t&&[].map.call(t,function(t){sg(e,t,void 0)})},shallowClone:ig,deepClone:dg,getObjectDiff:bb,cmp:Nv,asap:tg,minKey:ev,addons:[],connections:rv,errnames:Pg,dependencies:Rb,semVer:$y,version:$y.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))})),Mb.maxKey=Gv(Mb.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(zv(Vv,e=>{if(!Fb){let t;sv?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Bv,!0,!0,e)):t=new CustomEvent(Bv,{detail:e}),Fb=!0,dispatchEvent(t),Fb=!1}}),addEventListener(Bv,e=>{let{detail:t}=e;Fb||Lb(t)}));let Fb=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(Bv);"function"==typeof e.unref&&e.unref(),zv(Vv,t=>{Fb||e.postMessage(t)}),e.onmessage=e=>{e.data&&Lb(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){zv(Vv,e=>{try{Fb||("undefined"!=typeof localStorage&&localStorage.setItem(Bv,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:Bv,changedParts:e})))}catch(e){}}),"undefined"!=typeof addEventListener&&addEventListener("storage",e=>{if(e.key===Bv){const t=JSON.parse(e.newValue);t&&Lb(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function(e){let{data:t}=e;t&&t.type===Bv&&Lb(t.changedParts)})}py.rejectionMapper=function(e,t){if(!e||e instanceof Tg||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Mg[e.name])return e;var n=new Mg[e.name](t||e.message,e);return"stack"in e&&Gm(n,"stack",{get:function(){return this.inner.stack}}),n},xg(wg,ov);const Ub=new class extends Db{constructor(){super("TaskManagerDB"),this.tasks=void 0,this.projects=void 0,this.clients=void 0,this.payments=void 0,this.notes=void 0,this.files=void 0,this.version(1).stores({tasks:"id, title, status, priority, projectId, clientId, dueDate, createdAt, updatedAt, completedAt, tags",projects:"id, name, status, clientId, startDate, endDate, createdAt, updatedAt, tags",clients:"id, name, email, company, createdAt, updatedAt",payments:"id, amount, type, status, projectId, clientId, dueDate, paidDate, createdAt, updatedAt, category",notes:"id, title, type, projectId, taskId, clientId, createdAt, updatedAt, tags",files:"id, name, type, taskId, projectId, uploadedAt"}),this.version(2).stores({tasks:"id, title, status, priority, projectId, clientId, dueDate, createdAt, updatedAt, completedAt, tags, [status+priority], [projectId+status]",projects:"id, name, status, clientId, startDate, endDate, completedAt, createdAt, updatedAt, tags, [status+clientId]",clients:"id, name, email, company, createdAt, updatedAt",payments:"id, amount, type, status, projectId, clientId, dueDate, paidDate, createdAt, updatedAt, category, [type+status], [clientId+type]",notes:"id, title, type, projectId, taskId, clientId, createdAt, updatedAt, tags, [type+projectId]",files:"id, name, type, taskId, projectId, uploadedAt, [taskId+type]"})}},Vb={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Bb;const zb=new Uint8Array(16);function Kb(){if(!Bb&&(Bb="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bb(zb)}const qb=[];for(let uk=0;uk<256;++uk)qb.push((uk+256).toString(16).slice(1));function Hb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return qb[e[t+0]]+qb[e[t+1]]+qb[e[t+2]]+qb[e[t+3]]+"-"+qb[e[t+4]]+qb[e[t+5]]+"-"+qb[e[t+6]]+qb[e[t+7]]+"-"+qb[e[t+8]]+qb[e[t+9]]+"-"+qb[e[t+10]]+qb[e[t+11]]+qb[e[t+12]]+qb[e[t+13]]+qb[e[t+14]]+qb[e[t+15]]}const Wb=function(e,t,n){if(Vb.randomUUID&&!t&&!e)return Vb.randomUUID();const r=(e=e||{}).random||(e.rng||Kb)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return Hb(r)},Gb=e=>{const[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{try{i(!0),o(null);let t=Ub.tasks.orderBy("createdAt");if(null!==e&&void 0!==e&&e.status&&e.status.length>0&&(t=t.filter(t=>e.status.includes(t.status))),null!==e&&void 0!==e&&e.priority&&e.priority.length>0&&(t=t.filter(t=>e.priority.includes(t.priority))),null!==e&&void 0!==e&&e.projectId&&(t=t.filter(t=>t.projectId===e.projectId)),null!==e&&void 0!==e&&e.clientId&&(t=t.filter(t=>t.clientId===e.clientId)),null!==e&&void 0!==e&&e.search){const n=e.search.toLowerCase();t=t.filter(e=>{var t;return e.title.toLowerCase().includes(n)||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(n))||e.tags.some(e=>e.toLowerCase().includes(n))})}null!==e&&void 0!==e&&e.dueDate&&(e.dueDate.from&&(t=t.filter(t=>!!t.dueDate&&t.dueDate>=e.dueDate.from)),e.dueDate.to&&(t=t.filter(t=>!!t.dueDate&&t.dueDate<=e.dueDate.to))),null!==e&&void 0!==e&&e.tags&&e.tags.length>0&&(t=t.filter(t=>e.tags.some(e=>t.tags.includes(e))));const r=await t.toArray();n(r)}catch(t){o(t instanceof Error?t.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u0434\u0430\u0447")}finally{i(!1)}},[e]);(0,r.useEffect)(()=>{l()},[l]);return{tasks:t,loading:s,error:a,createTask:async e=>{const t=c(c({},e),{},{id:Wb(),createdAt:new Date,updatedAt:new Date,comments:[]});try{return await Ub.tasks.add(t),n(e=>[...e,t]),t}catch(r){throw o(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438"),r}},updateTask:async(e,t)=>{try{const r=c(c({},t),{},{updatedAt:new Date});await Ub.tasks.update(e,r),n(t=>t.map(t=>t.id===e?c(c({},t),r):t))}catch(r){throw o(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438"),r}},deleteTask:async e=>{try{await Ub.tasks.delete(e),n(t=>t.filter(t=>t.id!==e))}catch(t){throw o(t instanceof Error?t.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438"),t}},updateTaskStatus:async(e,r)=>{try{const s={status:r,updatedAt:new Date};if("completed"===r)s.completedAt=new Date;else{const n=t.find(t=>t.id===e);null!==n&&void 0!==n&&n.completedAt&&(s.completedAt=void 0)}await Ub.tasks.update(e,s),n(t=>t.map(t=>t.id===e?c(c({},t),s):t))}catch(s){throw o(s instanceof Error?s.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430"),s}},addComment:async(e,t)=>{try{const n=await Ub.tasks.get(e);if(!n)throw new Error("\u0417\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");const r=c(c({},t),{},{id:Wb(),createdAt:new Date});await Ub.tasks.update(e,{comments:[...n.comments,r],updatedAt:new Date}),await l()}catch(n){throw o(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f"),n}},addChecklistItem:async(e,t)=>{try{const n=await Ub.tasks.get(e);if(!n)throw new Error("\u0417\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");const r={id:Wb(),text:t,completed:!1,createdAt:new Date};await Ub.tasks.update(e,{checklist:[...n.checklist||[],r],updatedAt:new Date}),await l()}catch(n){throw o(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0443\u043d\u043a\u0442\u0430 \u0447\u0435\u043a-\u043b\u0438\u0441\u0442\u0430"),n}},toggleChecklistItem:async(e,t)=>{try{const n=await Ub.tasks.get(e);if(!n||!n.checklist)throw new Error("\u0417\u0430\u0434\u0430\u0447\u0430 \u0438\u043b\u0438 \u0447\u0435\u043a-\u043b\u0438\u0441\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b");const r=n.checklist.map(e=>e.id===t?c(c({},e),{},{completed:!e.completed}):e);await Ub.tasks.update(e,{checklist:r,updatedAt:new Date}),await l()}catch(n){throw o(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0447\u0435\u043a-\u043b\u0438\u0441\u0442\u0430"),n}},refetch:l}},Qb=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{try{s(!0),a(null);const e=await Ub.projects.orderBy("createdAt").toArray();t(e)}catch(e){a(e instanceof Error?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);return{projects:e,loading:n,error:i,createProject:async e=>{const n=c(c({},e),{},{id:Wb(),createdAt:new Date,updatedAt:new Date,tasks:[]});try{return await Ub.projects.add(n),t(e=>[...e,n]),n}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r}},updateProject:async(e,n)=>{try{const r=c(c({},n),{},{updatedAt:new Date});await Ub.projects.update(e,r),t(t=>t.map(t=>t.id===e?c(c({},t),r):t))}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r}},deleteProject:async e=>{try{await Ub.tasks.where("projectId").equals(e).delete(),await Ub.projects.delete(e),t(t=>t.filter(t=>t.id!==e))}catch(n){throw a(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),n}},updateProjectStatus:async(e,n)=>{try{const r={status:n,updatedAt:new Date};await Ub.projects.update(e,r),t(t=>t.map(t=>t.id===e?c(c({},t),r):t))}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r}},addTaskToProject:async(e,t)=>{try{const n=await Ub.projects.get(e);if(!n)throw new Error("\u041f\u0440\u043e\u0435\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");n.tasks.includes(t)||(await Ub.projects.update(e,{tasks:[...n.tasks,t],updatedAt:new Date}),await o())}catch(n){throw a(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u0432 \u043f\u0440\u043e\u0435\u043a\u0442"),n}},removeTaskFromProject:async(e,t)=>{try{const n=await Ub.projects.get(e);if(!n)throw new Error("\u041f\u0440\u043e\u0435\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");await Ub.projects.update(e,{tasks:n.tasks.filter(e=>e!==t),updatedAt:new Date}),await o()}catch(n){throw a(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u0438\u0437 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),n}},refetch:o}},Yb=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{try{s(!0),a(null);const e=await Ub.payments.orderBy("createdAt").toArray();t(e)}catch(e){a(e instanceof Error?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);const l=(0,r.useCallback)(()=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0),s=e.filter(e=>e.createdAt>=n&&e.createdAt<=r),i=s.filter(e=>"income"===e.type&&"paid"===e.status).reduce((e,t)=>e+t.amount,0),a=s.filter(e=>"expense"===e.type&&"paid"===e.status).reduce((e,t)=>e+t.amount,0),o=e.filter(e=>"income"===e.type&&"pending"===e.status).reduce((e,t)=>e+t.amount,0),l=e.filter(e=>"pending"===e.status&&e.dueDate&&e.dueDate<t);return{monthlyIncome:i,monthlyExpenses:a,netIncome:i-a,pendingIncome:o,overduePayments:l.length,totalPayments:e.length}},[e]);return{payments:e,loading:n,error:i,createPayment:async e=>{const n=c(c({},e),{},{id:Wb(),createdAt:new Date,updatedAt:new Date});try{return await Ub.payments.add(n),t(e=>[...e,n]),n}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),r}},updatePayment:async(e,n)=>{try{const r=c(c({},n),{},{updatedAt:new Date});await Ub.payments.update(e,r),t(t=>t.map(t=>t.id===e?c(c({},t),r):t))}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),r}},deletePayment:async e=>{try{await Ub.payments.delete(e),t(t=>t.filter(t=>t.id!==e))}catch(n){throw a(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),n}},markAsPaid:async(e,n)=>{try{await Ub.payments.update(e,{status:"paid",paidDate:n||new Date,updatedAt:new Date}),t(t=>t.map(t=>t.id===e?c(c({},t),{},{status:"paid",paidDate:n||new Date,updatedAt:new Date}):t))}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),r}},getFinancialStats:l,refetch:o}},Xb=f("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Jb=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$b=f("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Zb=e=>{let{stats:t,onNavigate:n}=e;const r=[{title:"\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u0434\u0430\u0447",value:t.totalTasks,icon:Im,color:"blue",change:"+12%",link:"tasks"},{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",value:t.completedTasks,icon:Im,color:"green",change:"+8%",link:"tasks"},{title:"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e",value:t.overdueTasks,icon:Xb,color:"red",change:"-3%",link:"tasks"},{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",value:t.activeProjects,icon:Tm,color:"purple",change:"+2",link:"projects"},{title:"\u0414\u043e\u0445\u043e\u0434 \u0437\u0430 \u043c\u0435\u0441\u044f\u0446",value:"\u20bd".concat(t.monthlyIncome.toLocaleString()),icon:Jb,color:"green",change:"+15%",link:"analytics"},{title:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u0437\u0430 \u043c\u0435\u0441\u044f\u0446",value:"\u20bd".concat(t.monthlyExpenses.toLocaleString()),icon:$b,color:"red",change:"+5%",link:"analytics"}];return(0,Nm.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8",children:r.map((e,t)=>{const r=e.icon;return(0,Nm.jsx)("div",{onClick:()=>n(e.link),className:"group relative overflow-hidden rounded-2xl transition-all duration-500 hover:scale-105 hover:-translate-y-1 cursor-pointer",children:(0,Nm.jsxs)("div",{className:"relative backdrop-blur-xl border ".concat((e.color,"border-white/20")," shadow-2xl p-6 h-full"),style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.7), rgba(35, 39, 41, 0.7))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 rounded-full blur-2xl transition-opacity duration-500",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsxs)("div",{className:"relative flex items-center justify-between mb-4",children:[(0,Nm.jsx)("div",{className:"p-3 rounded-xl backdrop-blur-sm border group-hover:scale-110 transition-transform duration-500",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)"},children:(0,Nm.jsx)(r,{className:"w-6 h-6 drop-shadow-lg",style:{color:(e.color,"#b0b0b0")}})}),(0,Nm.jsx)("span",{className:"text-sm font-medium px-3 py-1 rounded-lg backdrop-blur-sm",style:{color:"#b0b0b0",backgroundColor:"rgba(80, 80, 80, 0.2)"},children:e.change})]}),(0,Nm.jsxs)("div",{className:"relative",children:[(0,Nm.jsx)("h3",{className:"text-3xl font-display mb-1 drop-shadow-lg",style:{color:"#c0c0c0"},children:e.value}),(0,Nm.jsx)("p",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:e.title})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})},t)})})},ew=f("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),tw=e=>{let{onAction:t}=e;const n=[{id:"add-task",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443",icon:Cm,description:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443"},{id:"add-project",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",icon:Tm,description:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442"},{id:"add-client",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430",icon:jm,description:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{id:"add-payment",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u043b\u0430\u0442\u0443",icon:ew,description:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0434\u043e\u0445\u043e\u0434 \u0438\u043b\u0438 \u0440\u0430\u0441\u0445\u043e\u0434"},{id:"add-note",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",icon:Am,description:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u0434\u0435\u044e \u0438\u043b\u0438 \u043c\u044b\u0441\u043b\u044c"},{id:"view-calendar",label:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",icon:Dm,description:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u044b"},{id:"upload-file",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b",icon:Om,description:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442"},{id:"view-tasks",label:"\u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438",icon:Im,description:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"}];return(0,Nm.jsxs)("div",{className:"mb-8",children:[(0,Nm.jsx)("h2",{className:"text-3xl font-heading mb-6 drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u0411\u044b\u0441\u0442\u0440\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"}),(0,Nm.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 sm:gap-4",children:n.map((e,n)=>{const r=e.icon;return(0,Nm.jsxs)("button",{onClick:()=>t(e.id),className:"group relative overflow-hidden rounded-2xl p-[1px] transition-all duration-500 hover:scale-105 hover:-translate-y-1",style:{animation:"fadeInUp 0.6s ease-out ".concat(.1*n,"s both")},children:[(0,Nm.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-400/50 via-gray-500/30 to-gray-600/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"}),(0,Nm.jsxs)("div",{className:"relative backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/10 shadow-2xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl transition-opacity duration-500",style:{backgroundColor:"rgba(255, 255, 255, 0.03)",opacity:.5}}),(0,Nm.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 rounded-full blur-2xl transition-opacity duration-500",style:{backgroundColor:"rgba(255, 255, 255, 0.03)",opacity:.5}}),(0,Nm.jsxs)("div",{className:"relative flex flex-col items-center text-center z-10",children:[(0,Nm.jsx)("div",{className:"mb-3 transform group-hover:scale-110 group-hover:rotate-3 transition-transform duration-500",children:(0,Nm.jsx)(r,{className:"w-8 h-8 drop-shadow-lg",style:{color:"#c0c0c0"}})}),(0,Nm.jsx)("h3",{className:"font-accent text-sm mb-1 drop-shadow-lg transition-colors duration-300",style:{color:"#c0c0c0"},children:e.label}),(0,Nm.jsx)("p",{className:"text-xs font-accent opacity-80 group-hover:opacity-100 transition-opacity duration-300",style:{color:"#a0a0a0"},children:e.description})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})]},e.id)})}),(0,Nm.jsx)("style",{children:"\n        @keyframes fadeInUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      "})]})},nw=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),rw=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),sw=f("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),iw=f("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),aw=f("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function ow(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function lw(e){ow(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function cw(e,t){ow(2,arguments);var n=lw(e),r=lw(t);return n.getTime()<r.getTime()}function uw(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function dw(e,t){ow(2,arguments);var n=lw(e),r=uw(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function hw(e,t){ow(2,arguments);var n=lw(e),r=lw(t);return n.getTime()>r.getTime()}function fw(e){if(ow(1,arguments),!function(e){return ow(1,arguments),e instanceof Date||"object"===i(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=lw(e);return!isNaN(Number(t))}function pw(e,t){return ow(2,arguments),function(e,t){ow(2,arguments);var n=lw(e).getTime(),r=uw(t);return new Date(n+r)}(e,-uw(t))}function mw(e){ow(1,arguments);var t=lw(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function gw(e){ow(1,arguments);var t=lw(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=mw(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=mw(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function yw(e){ow(1,arguments);var t=lw(e),n=mw(t).getTime()-function(e){ow(1,arguments);var t=gw(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),mw(n)}(t).getTime();return Math.round(n/6048e5)+1}var vw={};function bw(){return vw}function ww(e,t){var n,r,s,i,a,o,l,c;ow(1,arguments);var u=bw(),d=uw(null!==(n=null!==(r=null!==(s=null!==(i=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==s?s:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=lw(e),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function xw(e,t){var n,r,s,i,a,o,l,c;ow(1,arguments);var u=lw(e),d=u.getUTCFullYear(),h=bw(),f=uw(null!==(n=null!==(r=null!==(s=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==s?s:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=ww(p,t),g=new Date(0);g.setUTCFullYear(d,0,f),g.setUTCHours(0,0,0,0);var y=ww(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=y.getTime()?d:d-1}function kw(e,t){ow(1,arguments);var n=lw(e),r=ww(n,t).getTime()-function(e,t){var n,r,s,i,a,o,l,c;ow(1,arguments);var u=bw(),d=uw(null!==(n=null!==(r=null!==(s=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==s?s:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=xw(e,t),f=new Date(0);return f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0),ww(f,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function _w(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Nw={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return _w("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):_w(n+1,2)},d:function(e,t){return _w(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return _w(e.getUTCHours()%12||12,t.length)},H:function(e,t){return _w(e.getUTCHours(),t.length)},m:function(e,t){return _w(e.getUTCMinutes(),t.length)},s:function(e,t){return _w(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return _w(Math.floor(r*Math.pow(10,n-3)),t.length)}};var Ew="midnight",Sw="noon",Cw="morning",Iw="afternoon",Tw="evening",jw="night",Dw={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Nw.y(e,t)},Y:function(e,t,n,r){var s=xw(e,r),i=s>0?s:1-s;return"YY"===t?_w(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):_w(i,t.length)},R:function(e,t){return _w(gw(e),t.length)},u:function(e,t){return _w(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return _w(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return _w(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Nw.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return _w(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var s=kw(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):_w(s,t.length)},I:function(e,t,n){var r=yw(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):_w(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Nw.d(e,t)},D:function(e,t,n){var r=function(e){ow(1,arguments);var t=lw(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):_w(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var s=e.getUTCDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return _w(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var s=e.getUTCDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return _w(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return _w(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,s=e.getUTCHours();switch(r=12===s?Sw:0===s?Ew:s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,s=e.getUTCHours();switch(r=s>=17?Tw:s>=12?Iw:s>=4?Cw:jw,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Nw.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Nw.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):_w(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):_w(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Nw.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Nw.s(e,t)},S:function(e,t){return Nw.S(e,t)},X:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return Pw(s);case"XXXX":case"XX":return Ow(s);default:return Ow(s,":")}},x:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Pw(s);case"xxxx":case"xx":return Ow(s);default:return Ow(s,":")}},O:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Aw(s,":");default:return"GMT"+Ow(s,":")}},z:function(e,t,n,r){var s=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Aw(s,":");default:return"GMT"+Ow(s,":")}},t:function(e,t,n,r){var s=r._originalDate||e;return _w(Math.floor(s.getTime()/1e3),t.length)},T:function(e,t,n,r){return _w((r._originalDate||e).getTime(),t.length)}};function Aw(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=r%60;if(0===i)return n+String(s);var a=t||"";return n+String(s)+a+_w(i,2)}function Pw(e,t){return e%60===0?(e>0?"-":"+")+_w(Math.abs(e)/60,2):Ow(e,t)}function Ow(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e);return r+_w(Math.floor(s/60),2)+n+_w(s%60,2)}const Rw=Dw;var Mw=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Lw=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Fw={p:Lw,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Mw(e,t);switch(s){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Mw(s,t)).replace("{{time}}",Lw(i,t))}};const Uw=Fw;var Vw=["D","DD"],Bw=["YY","YYYY"];function zw(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Kw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const qw=function(e,t,n){var r,s=Kw[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Hw(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var Ww={date:Hw({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Hw({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Hw({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Gw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Qw(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):s;r=e.formattingValues[i]||e.formattingValues[s]}else{var a=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Yw(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var a,o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,function(e){return e.test(o)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,function(e){return e.test(o)});return a=e.valueCallback?e.valueCallback(c):c,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(o.length)}}}function Xw(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];return{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}}const Jw={code:"en-US",formatDistance:qw,formatLong:Ww,formatRelative:function(e,t,n,r){return Gw[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Qw({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Qw({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qw({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Qw({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Qw({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Xw({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Yw({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Yw({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yw({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Yw({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Yw({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var $w=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ex=/^'([^]*?)'?$/,tx=/''/g,nx=/[a-zA-Z]/;function rx(e,t,n){var r,s,i,a,o,l,c,u,d,h,f,p,m,g,y,v,b,w;ow(2,arguments);var x=String(t),k=bw(),_=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:k.locale)&&void 0!==r?r:Jw,N=uw(null!==(i=null!==(a=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:k.firstWeekContainsDate)&&void 0!==a?a:null===(d=k.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==i?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=uw(null!==(f=null!==(p=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(y=n.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:k.weekStartsOn)&&void 0!==p?p:null===(b=k.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==f?f:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var S=lw(e);if(!fw(S))throw new RangeError("Invalid time value");var C=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(S),I=pw(S,C),T={firstWeekContainsDate:N,weekStartsOn:E,locale:_,_originalDate:S};return x.match(Zw).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,Uw[t])(e,_.formatLong):e}).join("").match($w).map(function(r){if("''"===r)return"'";var s=r[0];if("'"===s)return function(e){var t=e.match(ex);if(!t)return e;return t[1].replace(tx,"'")}(r);var i,a=Rw[s];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||(i=r,-1===Bw.indexOf(i))||zw(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==Vw.indexOf(e)}(r)||zw(r,t,String(e)),a(I,r,_.localize,T);if(s.match(nx))throw new RangeError("Format string contains an unescaped latin alphabet character `"+s+"`");return r}).join("")}function sx(e,t){if(void 0!==e.one&&1===t)return e.one;var n=t%10,r=t%100;return 1===n&&11!==r?e.singularNominative.replace("{{count}}",String(t)):n>=2&&n<=4&&(r<10||r>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function ix(e){return function(t,n){return null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?e.future?sx(e.future,t):"\u0447\u0435\u0440\u0435\u0437 "+sx(e.regular,t):e.past?sx(e.past,t):sx(e.regular,t)+" \u043d\u0430\u0437\u0430\u0434":sx(e.regular,t)}}var ax={lessThanXSeconds:ix({regular:{one:"\u043c\u0435\u043d\u044c\u0448\u0435 \u0441\u0435\u043a\u0443\u043d\u0434\u044b",singularNominative:"\u043c\u0435\u043d\u044c\u0448\u0435 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u044b",singularGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434",pluralGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434"},future:{one:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u043a\u0443\u043d\u0434\u0443",singularNominative:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u0443",singularGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u044b",pluralGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434"}}),xSeconds:ix({regular:{singularNominative:"{{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u0430",singularGenitive:"{{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u044b",pluralGenitive:"{{count}} \u0441\u0435\u043a\u0443\u043d\u0434"},past:{singularNominative:"{{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u0443 \u043d\u0430\u0437\u0430\u0434",singularGenitive:"{{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u044b \u043d\u0430\u0437\u0430\u0434",pluralGenitive:"{{count}} \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434"},future:{singularNominative:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u0443",singularGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434\u044b",pluralGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043a\u0443\u043d\u0434"}}),halfAMinute:function(e,t){return null!==t&&void 0!==t&&t.addSuffix?t.comparison&&t.comparison>0?"\u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u043b\u043c\u0438\u043d\u0443\u0442\u044b":"\u043f\u043e\u043b\u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434":"\u043f\u043e\u043b\u043c\u0438\u043d\u0443\u0442\u044b"},lessThanXMinutes:ix({regular:{one:"\u043c\u0435\u043d\u044c\u0448\u0435 \u043c\u0438\u043d\u0443\u0442\u044b",singularNominative:"\u043c\u0435\u043d\u044c\u0448\u0435 {{count}} \u043c\u0438\u043d\u0443\u0442\u044b",singularGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435 {{count}} \u043c\u0438\u043d\u0443\u0442",pluralGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435 {{count}} \u043c\u0438\u043d\u0443\u0442"},future:{one:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 \u043c\u0438\u043d\u0443\u0442\u0443",singularNominative:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0438\u043d\u0443\u0442\u0443",singularGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0438\u043d\u0443\u0442\u044b",pluralGenitive:"\u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0438\u043d\u0443\u0442"}}),xMinutes:ix({regular:{singularNominative:"{{count}} \u043c\u0438\u043d\u0443\u0442\u0430",singularGenitive:"{{count}} \u043c\u0438\u043d\u0443\u0442\u044b",pluralGenitive:"{{count}} \u043c\u0438\u043d\u0443\u0442"},past:{singularNominative:"{{count}} \u043c\u0438\u043d\u0443\u0442\u0443 \u043d\u0430\u0437\u0430\u0434",singularGenitive:"{{count}} \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434",pluralGenitive:"{{count}} \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434"},future:{singularNominative:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0438\u043d\u0443\u0442\u0443",singularGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0438\u043d\u0443\u0442\u044b",pluralGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0438\u043d\u0443\u0442"}}),aboutXHours:ix({regular:{singularNominative:"\u043e\u043a\u043e\u043b\u043e {{count}} \u0447\u0430\u0441\u0430",singularGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u0447\u0430\u0441\u043e\u0432",pluralGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u0447\u0430\u0441\u043e\u0432"},future:{singularNominative:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u0447\u0430\u0441",singularGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u0447\u0430\u0441\u0430",pluralGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u0447\u0430\u0441\u043e\u0432"}}),xHours:ix({regular:{singularNominative:"{{count}} \u0447\u0430\u0441",singularGenitive:"{{count}} \u0447\u0430\u0441\u0430",pluralGenitive:"{{count}} \u0447\u0430\u0441\u043e\u0432"}}),xDays:ix({regular:{singularNominative:"{{count}} \u0434\u0435\u043d\u044c",singularGenitive:"{{count}} \u0434\u043d\u044f",pluralGenitive:"{{count}} \u0434\u043d\u0435\u0439"}}),aboutXWeeks:ix({regular:{singularNominative:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043d\u0435\u0434\u0435\u043b\u0438",singularGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043d\u0435\u0434\u0435\u043b\u044c",pluralGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043d\u0435\u0434\u0435\u043b\u044c"},future:{singularNominative:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043d\u0435\u0434\u0435\u043b\u044e",singularGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043d\u0435\u0434\u0435\u043b\u0438",pluralGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043d\u0435\u0434\u0435\u043b\u044c"}}),xWeeks:ix({regular:{singularNominative:"{{count}} \u043d\u0435\u0434\u0435\u043b\u044f",singularGenitive:"{{count}} \u043d\u0435\u0434\u0435\u043b\u0438",pluralGenitive:"{{count}} \u043d\u0435\u0434\u0435\u043b\u044c"}}),aboutXMonths:ix({regular:{singularNominative:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043c\u0435\u0441\u044f\u0446\u0430",singularGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043c\u0435\u0441\u044f\u0446\u0435\u0432",pluralGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043c\u0435\u0441\u044f\u0446\u0435\u0432"},future:{singularNominative:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0435\u0441\u044f\u0446",singularGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0435\u0441\u044f\u0446\u0430",pluralGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043c\u0435\u0441\u044f\u0446\u0435\u0432"}}),xMonths:ix({regular:{singularNominative:"{{count}} \u043c\u0435\u0441\u044f\u0446",singularGenitive:"{{count}} \u043c\u0435\u0441\u044f\u0446\u0430",pluralGenitive:"{{count}} \u043c\u0435\u0441\u044f\u0446\u0435\u0432"}}),aboutXYears:ix({regular:{singularNominative:"\u043e\u043a\u043e\u043b\u043e {{count}} \u0433\u043e\u0434\u0430",singularGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043b\u0435\u0442",pluralGenitive:"\u043e\u043a\u043e\u043b\u043e {{count}} \u043b\u0435\u0442"},future:{singularNominative:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043e\u0434",singularGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043e\u0434\u0430",pluralGenitive:"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 {{count}} \u043b\u0435\u0442"}}),xYears:ix({regular:{singularNominative:"{{count}} \u0433\u043e\u0434",singularGenitive:"{{count}} \u0433\u043e\u0434\u0430",pluralGenitive:"{{count}} \u043b\u0435\u0442"}}),overXYears:ix({regular:{singularNominative:"\u0431\u043e\u043b\u044c\u0448\u0435 {{count}} \u0433\u043e\u0434\u0430",singularGenitive:"\u0431\u043e\u043b\u044c\u0448\u0435 {{count}} \u043b\u0435\u0442",pluralGenitive:"\u0431\u043e\u043b\u044c\u0448\u0435 {{count}} \u043b\u0435\u0442"},future:{singularNominative:"\u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043e\u0434",singularGenitive:"\u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043e\u0434\u0430",pluralGenitive:"\u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0447\u0435\u0440\u0435\u0437 {{count}} \u043b\u0435\u0442"}}),almostXYears:ix({regular:{singularNominative:"\u043f\u043e\u0447\u0442\u0438 {{count}} \u0433\u043e\u0434",singularGenitive:"\u043f\u043e\u0447\u0442\u0438 {{count}} \u0433\u043e\u0434\u0430",pluralGenitive:"\u043f\u043e\u0447\u0442\u0438 {{count}} \u043b\u0435\u0442"},future:{singularNominative:"\u043f\u043e\u0447\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043e\u0434",singularGenitive:"\u043f\u043e\u0447\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043e\u0434\u0430",pluralGenitive:"\u043f\u043e\u0447\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 {{count}} \u043b\u0435\u0442"}})};const ox=function(e,t,n){return ax[e](t,n)};var lx={date:Hw({formats:{full:"EEEE, d MMMM y '\u0433.'",long:"d MMMM y '\u0433.'",medium:"d MMM y '\u0433.'",short:"dd.MM.y"},defaultWidth:"full"}),time:Hw({formats:{full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:Hw({formats:{any:"{{date}}, {{time}}"},defaultWidth:"any"})};function cx(e,t,n){ow(2,arguments);var r=ww(e,n),s=ww(t,n);return r.getTime()===s.getTime()}var ux=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0443","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0443","\u0441\u0443\u0431\u0431\u043e\u0442\u0443"];function dx(e){var t=ux[e];return 2===e?"'\u0432\u043e "+t+" \u0432' p":"'\u0432 "+t+" \u0432' p"}var hx={lastWeek:function(e,t,n){var r=e.getUTCDay();return cx(e,t,n)?dx(r):function(e){var t=ux[e];switch(e){case 0:return"'\u0432 \u043f\u0440\u043e\u0448\u043b\u043e\u0435 "+t+" \u0432' p";case 1:case 2:case 4:return"'\u0432 \u043f\u0440\u043e\u0448\u043b\u044b\u0439 "+t+" \u0432' p";case 3:case 5:case 6:return"'\u0432 \u043f\u0440\u043e\u0448\u043b\u0443\u044e "+t+" \u0432' p"}}(r)},yesterday:"'\u0432\u0447\u0435\u0440\u0430 \u0432' p",today:"'\u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432' p",tomorrow:"'\u0437\u0430\u0432\u0442\u0440\u0430 \u0432' p",nextWeek:function(e,t,n){var r=e.getUTCDay();return cx(e,t,n)?dx(r):function(e){var t=ux[e];switch(e){case 0:return"'\u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 "+t+" \u0432' p";case 1:case 2:case 4:return"'\u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 "+t+" \u0432' p";case 3:case 5:case 6:return"'\u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e "+t+" \u0432' p"}}(r)},other:"P"};const fx=function(e,t,n,r){var s=hx[e];return"function"===typeof s?s(t,n,r):s};const px={code:"ru",formatDistance:ox,formatLong:lx,formatRelative:fx,localize:{ordinalNumber:function(e,t){var n=Number(e),r=null===t||void 0===t?void 0:t.unit;return n+("date"===r?"-\u0435":"week"===r||"minute"===r||"second"===r?"-\u044f":"-\u0439")},era:Qw({values:{narrow:["\u0434\u043e \u043d.\u044d.","\u043d.\u044d."],abbreviated:["\u0434\u043e \u043d. \u044d.","\u043d. \u044d."],wide:["\u0434\u043e \u043d\u0430\u0448\u0435\u0439 \u044d\u0440\u044b","\u043d\u0430\u0448\u0435\u0439 \u044d\u0440\u044b"]},defaultWidth:"wide"}),quarter:Qw({values:{narrow:["1","2","3","4"],abbreviated:["1-\u0439 \u043a\u0432.","2-\u0439 \u043a\u0432.","3-\u0439 \u043a\u0432.","4-\u0439 \u043a\u0432."],wide:["1-\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b","2-\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b","3-\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b","4-\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qw({values:{narrow:["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],abbreviated:["\u044f\u043d\u0432.","\u0444\u0435\u0432.","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440.","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],wide:["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"]},defaultWidth:"wide",formattingValues:{narrow:["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],abbreviated:["\u044f\u043d\u0432.","\u0444\u0435\u0432.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d.","\u0438\u044e\u043b.","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],wide:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"]},defaultFormattingWidth:"wide"}),day:Qw({values:{narrow:["\u0412","\u041f","\u0412","\u0421","\u0427","\u041f","\u0421"],short:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],abbreviated:["\u0432\u0441\u043a","\u043f\u043d\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043f\u0442\u043d","\u0441\u0443\u0431"],wide:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"]},defaultWidth:"wide"}),dayPeriod:Qw({values:{narrow:{am:"\u0414\u041f",pm:"\u041f\u041f",midnight:"\u043f\u043e\u043b\u043d.",noon:"\u043f\u043e\u043b\u0434.",morning:"\u0443\u0442\u0440\u043e",afternoon:"\u0434\u0435\u043d\u044c",evening:"\u0432\u0435\u0447.",night:"\u043d\u043e\u0447\u044c"},abbreviated:{am:"\u0414\u041f",pm:"\u041f\u041f",midnight:"\u043f\u043e\u043b\u043d.",noon:"\u043f\u043e\u043b\u0434.",morning:"\u0443\u0442\u0440\u043e",afternoon:"\u0434\u0435\u043d\u044c",evening:"\u0432\u0435\u0447.",night:"\u043d\u043e\u0447\u044c"},wide:{am:"\u0414\u041f",pm:"\u041f\u041f",midnight:"\u043f\u043e\u043b\u043d\u043e\u0447\u044c",noon:"\u043f\u043e\u043b\u0434\u0435\u043d\u044c",morning:"\u0443\u0442\u0440\u043e",afternoon:"\u0434\u0435\u043d\u044c",evening:"\u0432\u0435\u0447\u0435\u0440",night:"\u043d\u043e\u0447\u044c"}},defaultWidth:"any",formattingValues:{narrow:{am:"\u0414\u041f",pm:"\u041f\u041f",midnight:"\u043f\u043e\u043b\u043d.",noon:"\u043f\u043e\u043b\u0434.",morning:"\u0443\u0442\u0440\u0430",afternoon:"\u0434\u043d\u044f",evening:"\u0432\u0435\u0447.",night:"\u043d\u043e\u0447\u0438"},abbreviated:{am:"\u0414\u041f",pm:"\u041f\u041f",midnight:"\u043f\u043e\u043b\u043d.",noon:"\u043f\u043e\u043b\u0434.",morning:"\u0443\u0442\u0440\u0430",afternoon:"\u0434\u043d\u044f",evening:"\u0432\u0435\u0447.",night:"\u043d\u043e\u0447\u0438"},wide:{am:"\u0414\u041f",pm:"\u041f\u041f",midnight:"\u043f\u043e\u043b\u043d\u043e\u0447\u044c",noon:"\u043f\u043e\u043b\u0434\u0435\u043d\u044c",morning:"\u0443\u0442\u0440\u0430",afternoon:"\u0434\u043d\u044f",evening:"\u0432\u0435\u0447\u0435\u0440\u0430",night:"\u043d\u043e\u0447\u0438"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Xw({matchPattern:/^(\d+)(-?(\u0435|\u044f|\u0439|\u043e\u0435|\u044c\u0435|\u0430\u044f|\u044c\u044f|\u044b\u0439|\u043e\u0439|\u0438\u0439|\u044b\u0439))?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Yw({matchPatterns:{narrow:/^((\u0434\u043e )?\u043d\.?\s?\u044d\.?)/i,abbreviated:/^((\u0434\u043e )?\u043d\.?\s?\u044d\.?)/i,wide:/^(\u0434\u043e \u043d\u0430\u0448\u0435\u0439 \u044d\u0440\u044b|\u043d\u0430\u0448\u0435\u0439 \u044d\u0440\u044b|\u043d\u0430\u0448\u0430 \u044d\u0440\u0430)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^\u0434/i,/^\u043d/i]},defaultParseWidth:"any"}),quarter:Yw({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234](-?[\u044b\u043e\u0438]?\u0439?)? \u043a\u0432.?/i,wide:/^[1234](-?[\u044b\u043e\u0438]?\u0439?)? \u043a\u0432\u0430\u0440\u0442\u0430\u043b/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yw({matchPatterns:{narrow:/^[\u044f\u0444\u043c\u0430\u0438\u0441\u043e\u043d\u0434]/i,abbreviated:/^(\u044f\u043d\u0432|\u0444\u0435\u0432|\u043c\u0430\u0440\u0442?|\u0430\u043f\u0440|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]?|\u0438\u044e\u043b[\u044c\u044f]?|\u0430\u0432\u0433|\u0441\u0435\u043d\u0442?|\u043e\u043a\u0442|\u043d\u043e\u044f\u0431?|\u0434\u0435\u043a)\.?/i,wide:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043b[\u044c\u044f]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^\u044f/i,/^\u0444/i,/^\u043c/i,/^\u0430/i,/^\u043c/i,/^\u0438/i,/^\u0438/i,/^\u0430/i,/^\u0441/i,/^\u043e/i,/^\u043d/i,/^\u044f/i],any:[/^\u044f/i,/^\u0444/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432/i,/^\u0441/i,/^\u043e/i,/^\u043d/i,/^\u0434/i]},defaultParseWidth:"any"}),day:Yw({matchPatterns:{narrow:/^[\u0432\u043f\u0441\u0447]/i,short:/^(\u0432\u0441|\u0432\u043e|\u043f\u043d|\u043f\u043e|\u0432\u0442|\u0441\u0440|\u0447\u0442|\u0447\u0435|\u043f\u0442|\u043f\u044f|\u0441\u0431|\u0441\u0443)\.?/i,abbreviated:/^(\u0432\u0441\u043a|\u0432\u043e\u0441|\u043f\u043d\u0434|\u043f\u043e\u043d|\u0432\u0442\u0440|\u0432\u0442\u043e|\u0441\u0440\u0434|\u0441\u0440\u0435|\u0447\u0442\u0432|\u0447\u0435\u0442|\u043f\u0442\u043d|\u043f\u044f\u0442|\u0441\u0443\u0431).?/i,wide:/^(\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c[\u0435\u044f]|\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a\u0430?|\u0432\u0442\u043e\u0440\u043d\u0438\u043a\u0430?|\u0441\u0440\u0435\u0434[\u0430\u044b]|\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430?|\u043f\u044f\u0442\u043d\u0438\u0446[\u0430\u044b]|\u0441\u0443\u0431\u0431\u043e\u0442[\u0430\u044b])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^\u0432/i,/^\u043f/i,/^\u0432/i,/^\u0441/i,/^\u0447/i,/^\u043f/i,/^\u0441/i],any:[/^\u0432[\u043e\u0441]/i,/^\u043f[\u043e\u043d]/i,/^\u0432/i,/^\u0441\u0440/i,/^\u0447/i,/^\u043f[\u044f\u0442]/i,/^\u0441[\u0443\u0431]/i]},defaultParseWidth:"any"}),dayPeriod:Yw({matchPatterns:{narrow:/^([\u0434\u043f]\u043f|\u043f\u043e\u043b\u043d\.?|\u043f\u043e\u043b\u0434\.?|\u0443\u0442\u0440[\u043e\u0430]|\u0434\u0435\u043d\u044c|\u0434\u043d\u044f|\u0432\u0435\u0447\.?|\u043d\u043e\u0447[\u044c\u0438])/i,abbreviated:/^([\u0434\u043f]\u043f|\u043f\u043e\u043b\u043d\.?|\u043f\u043e\u043b\u0434\.?|\u0443\u0442\u0440[\u043e\u0430]|\u0434\u0435\u043d\u044c|\u0434\u043d\u044f|\u0432\u0435\u0447\.?|\u043d\u043e\u0447[\u044c\u0438])/i,wide:/^([\u0434\u043f]\u043f|\u043f\u043e\u043b\u043d\u043e\u0447\u044c|\u043f\u043e\u043b\u0434\u0435\u043d\u044c|\u0443\u0442\u0440[\u043e\u0430]|\u0434\u0435\u043d\u044c|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430?|\u043d\u043e\u0447[\u044c\u0438])/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^\u0434\u043f/i,pm:/^\u043f\u043f/i,midnight:/^\u043f\u043e\u043b\u043d/i,noon:/^\u043f\u043e\u043b\u0434/i,morning:/^\u0443/i,afternoon:/^\u0434[\u0435\u043d]/i,evening:/^\u0432/i,night:/^\u043d/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}},mx=e=>{let{tasks:t,onTaskClick:n}=e;const[s,i]=(0,r.useState)(new Set),a=e=>{switch(e){case"completed":return"bg-green-900/30 text-green-300 border-green-500/20";case"in_progress":return"bg-gray-800/30 text-gray-300 border-gray-600/20";case"review":return"bg-yellow-900/30 text-yellow-300 border-yellow-500/20";case"cancelled":return"bg-red-900/30 text-red-300 border-red-500/20";default:return"bg-gray-900/30 text-gray-300 border-gray-500/20"}},o=e=>{switch(e){case"urgent":return"bg-red-900/30 text-red-300 border-red-500/20";case"high":return"bg-orange-900/30 text-orange-300 border-orange-500/20";case"medium":return"bg-yellow-900/30 text-yellow-300 border-yellow-500/20";case"low":return"bg-green-900/30 text-green-300 border-green-500/20";default:return"bg-gray-900/30 text-gray-300 border-gray-500/20"}},l=e=>{var n;return!!e&&(cw(e,new Date)&&!(null!==(n=t.find(t=>t.dueDate===e))&&void 0!==n&&n.completedAt))},c=e=>{if(!e)return!1;const t=dw(new Date,3);return hw(e,new Date)&&cw(e,t)},u=t.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).slice(0,5);return(0,Nm.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsx)("div",{className:"absolute bottom-0 left-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsxs)("div",{className:"relative flex items-center justify-between mb-6",children:[(0,Nm.jsx)("h2",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"}),(0,Nm.jsx)("button",{onClick:()=>n("all"),className:"btn-sm",children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435"})]}),(0,Nm.jsx)("div",{className:"relative space-y-2",children:0===u.length?(0,Nm.jsxs)("div",{className:"text-center py-8",style:{color:"#808080"},children:[(0,Nm.jsx)(nw,{className:"w-12 h-12 mx-auto mb-3",style:{color:"#606060"}}),(0,Nm.jsx)("p",{children:"\u041d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447"})]}):u.map(e=>{const t=s.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>{return t=e.id,void i(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},children:[(0,Nm.jsx)("button",{className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:t?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)("h3",{className:"font-accent break-words flex-1 text-sm sm:text-base",style:{color:"#c0c0c0"},children:e.title})]}),t&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium backdrop-blur-sm border ".concat(a(e.status)),children:"completed"===e.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e":"in_progress"===e.status?"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":"review"===e.status?"\u041d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0438":"cancelled"===e.status?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e":"on_hold"===e.status?"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e":"\u041d\u043e\u0432\u0430\u044f"}),(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium backdrop-blur-sm border ".concat(o(e.priority)),children:"urgent"===e.priority?"\u0421\u0440\u043e\u0447\u043d\u043e":"high"===e.priority?"\u0412\u044b\u0441\u043e\u043a\u0438\u0439":"medium"===e.priority?"\u0421\u0440\u0435\u0434\u043d\u0438\u0439":"\u041d\u0438\u0437\u043a\u0438\u0439"})]}),e.description&&(0,Nm.jsx)("p",{className:"text-xs sm:text-sm break-words",style:{color:"#a0a0a0"},children:e.description}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between text-sm flex-wrap gap-2",style:{color:"#909090"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-4",children:[e.dueDate&&(0,Nm.jsxs)("div",{className:"flex items-center space-x-1 ".concat(l(e.dueDate)?"text-red-400":c(e.dueDate)?"text-yellow-400":"text-gray-400"),children:[(0,Nm.jsx)(rw,{className:"w-4 h-4"}),(0,Nm.jsxs)("span",{children:[l(e.dueDate)?"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e":c(e.dueDate)?"\u0421\u043a\u043e\u0440\u043e \u0434\u0435\u0434\u043b\u0430\u0439\u043d":""," ",rx(new Date(e.dueDate),"dd MMM",{locale:px})]})]}),e.tags.length>0&&(0,Nm.jsx)("div",{className:"flex items-center space-x-1",children:(0,Nm.jsxs)("span",{className:"text-xs bg-white/10 px-2 py-1 rounded-lg backdrop-blur-sm",children:[e.tags[0],e.tags.length>1&&" +".concat(e.tags.length-1)]})})]}),(0,Nm.jsx)("div",{className:"text-xs",style:{color:"#808080"},children:rx(new Date(e.updatedAt),"dd MMM HH:mm",{locale:px})})]})]})})]},e.id)})})]})},gx=e=>{let{onNavigate:t}=e;const{tasks:n,loading:s}=Gb(),{projects:i,loading:a}=Qb(),{payments:o,getFinancialStats:l,loading:c}=Yb(),[u,d]=(0,r.useState)({totalTasks:0,completedTasks:0,overdueTasks:0,totalProjects:0,activeProjects:0,monthlyIncome:0,monthlyExpenses:0,tasksByStatus:{new:0,in_progress:0,review:0,completed:0,cancelled:0,on_hold:0},upcomingDeadlines:[]});(0,r.useEffect)(()=>{if(!s&&!a&&!c){const e=n.filter(e=>"completed"===e.status).length,t=n.filter(e=>!(!e.dueDate||"completed"===e.status)&&new Date(e.dueDate)<new Date).length,r=i.filter(e=>"active"===e.status).length,s=l(),a=n.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),o=n.filter(e=>{if(!e.dueDate||"completed"===e.status)return!1;const t=new Date(e.dueDate),n=new Date;return n.setDate(n.getDate()+3),t<=n}).sort((e,t)=>new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime()).slice(0,5);d({totalTasks:n.length,completedTasks:e,overdueTasks:t,totalProjects:i.length,activeProjects:r,monthlyIncome:s.monthlyIncome,monthlyExpenses:s.monthlyExpenses,tasksByStatus:{new:a.new||0,in_progress:a.in_progress||0,review:a.review||0,completed:a.completed||0,cancelled:a.cancelled||0,on_hold:a.on_hold||0},upcomingDeadlines:o})}},[n,i,o,s,a,c,l]);return s||a||c?(0,Nm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-300"})}):(0,Nm.jsxs)("div",{className:"min-h-screen -m-8 p-8 relative overflow-hidden",style:{background:"linear-gradient(to bottom right, #1a1d1f, #292d2f, #1f2224)"},children:[(0,Nm.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Nm.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsx)("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse",style:{backgroundColor:"rgba(255, 255, 255, 0.02)",animationDelay:"1s"}}),(0,Nm.jsx)("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 rounded-full blur-3xl animate-pulse",style:{backgroundColor:"rgba(255, 255, 255, 0.02)",animationDelay:"2s"}})]}),(0,Nm.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,Nm.jsxs)("div",{className:"text-center mb-8",children:[(0,Nm.jsx)("h1",{className:"text-5xl font-heading mb-4 drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),(0,Nm.jsx)("p",{className:"text-lg font-accent drop-shadow-lg",style:{color:"#a0a0a0"},children:"\u0412\u043e\u0442 \u043e\u0431\u0437\u043e\u0440 \u0432\u0430\u0448\u0438\u0445 \u0437\u0430\u0434\u0430\u0447 \u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"})]}),(0,Nm.jsx)(tw,{onAction:e=>{t(e)}}),(0,Nm.jsx)(Zb,{stats:u,onNavigate:t}),(0,Nm.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Nm.jsx)(mx,{tasks:n,onTaskClick:e=>{"all"===e?t("tasks"):console.log("\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443:",e)}}),(0,Nm.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsx)("div",{className:"absolute bottom-0 left-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsx)("h2",{className:"relative text-2xl font-heading mb-6 drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u044b"}),(0,Nm.jsx)("div",{className:"relative space-y-4",children:0===u.upcomingDeadlines.length?(0,Nm.jsx)("div",{className:"text-center py-8",style:{color:"#808080"},children:(0,Nm.jsx)("p",{children:"\u041d\u0435\u0442 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0445 \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u043e\u0432"})}):u.upcomingDeadlines.map(e=>(0,Nm.jsxs)("div",{className:"p-4 rounded-xl border backdrop-blur-sm transition-all duration-300 hover:scale-[1.02]",style:{background:"rgba(41, 45, 47, 0.5)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Nm.jsx)("h3",{className:"font-accent font-medium",style:{color:"#c0c0c0"},children:e.title}),(0,Nm.jsx)("span",{className:"text-sm px-2 py-1 rounded-lg",style:{color:"#b0b0b0",backgroundColor:"rgba(80, 80, 80, 0.3)"},children:e.dueDate&&new Date(e.dueDate).toLocaleDateString("ru-RU")})]}),(0,Nm.jsx)("p",{className:"text-sm",style:{color:"#a0a0a0"},children:e.description})]},e.id))})]})]})]})]})},yx=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vx=f("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),bx=e=>{let{isOpen:t,onClose:n,task:s}=e;const{createTask:i,updateTask:a}=Gb(),[o,l]=(0,r.useState)({title:"",description:"",status:"new",priority:"medium",dueDate:"",tags:""}),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({});(0,r.useEffect)(()=>{l(s?{title:s.title,description:s.description||"",status:s.status,priority:s.priority,dueDate:s.dueDate?new Date(s.dueDate).toISOString().split("T")[0]:"",tags:s.tags.join(", ")}:{title:"",description:"",status:"new",priority:"medium",dueDate:"",tags:""})},[s]);const p=(e,t)=>{l(n=>c(c({},n),{},{[e]:t})),h[e]&&f(t=>c(c({},t),{},{[e]:""}))};return t?(0,Nm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,Nm.jsxs)("div",{className:"rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",style:{backgroundColor:"#f5f5f7"},children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b",style:{borderColor:"#e0e0e0"},children:[(0,Nm.jsx)("h2",{className:"text-base sm:text-xl font-heading break-words pr-2",style:{color:"#2c2c2e"},children:s?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"}),(0,Nm.jsx)("button",{onClick:n,className:"p-2 rounded-lg transition-colors flex-shrink-0",style:{backgroundColor:"rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)",children:(0,Nm.jsx)(yx,{className:"w-5 h-5",style:{color:"#2c2c2e"}})})]}),(0,Nm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.title.trim()||(e.title="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),f(e),0===Object.keys(e).length})()){d(!0);try{const e={title:o.title.trim(),description:o.description.trim()||void 0,status:o.status,priority:o.priority,dueDate:o.dueDate?new Date(o.dueDate):void 0,tags:o.tags.split(",").map(e=>e.trim()).filter(e=>e),comments:[]};s?await a(s.id,e):await i(e),setTimeout(()=>{n()},100)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438:",t)}finally{d(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 *"}),(0,Nm.jsx)("input",{type:"text",value:o.title,onChange:e=>p("title",e.target.value),className:"form-input ".concat(h.title?"border-red-500":""),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"}),h.title&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.title})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,Nm.jsx)("textarea",{value:o.description,onChange:e=>p("description",e.target.value),className:"form-input h-24 resize-none",placeholder:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 inline mr-1"}),"\u0414\u0435\u0434\u043b\u0430\u0439\u043d (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)"]}),(0,Nm.jsx)("input",{type:"date",value:o.dueDate,onChange:e=>p("dueDate",e.target.value),className:"form-input"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(vx,{className:"w-4 h-4 inline mr-1"}),"\u0422\u0435\u0433\u0438 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)"]}),(0,Nm.jsx)("input",{type:"text",value:o.tags,onChange:e=>p("tags",e.target.value),className:"form-input",placeholder:"\u0434\u0438\u0437\u0430\u0439\u043d, \u0441\u0440\u043e\u0447\u043d\u043e, \u0432\u0430\u0436\u043d\u043e\u0435"}),(0,Nm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0439\u0442\u0435 \u0442\u0435\u0433\u0438 \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438"})]}),(0,Nm.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,Nm.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Nm.jsx)("button",{type:"submit",disabled:u,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})]})}):null},wx=f("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),xx=f("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),kx=f("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),_x=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Nx=e=>{let{onAddTask:t,onEditTask:n}=e;const{tasks:s,loading:i,updateTaskStatus:a,deleteTask:o}=Gb(),[l,u]=(0,r.useState)({}),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)("createdAt"),[y,v]=(0,r.useState)("desc"),[b,w]=(0,r.useState)(new Set),x=e=>{w(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},k=e=>{switch(e){case"completed":return"text-green-700 bg-green-50 border-green-200";case"in_progress":return"text-gray-700 bg-gray-100 border-gray-300";case"review":return"text-yellow-700 bg-yellow-50 border-yellow-200";case"cancelled":return"text-red-700 bg-red-50 border-red-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},_=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=e=>{switch(e){case"completed":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e";case"in_progress":return"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435";case"review":return"\u041d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0438";case"cancelled":return"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e";case"on_hold":return"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e";default:return"\u041d\u043e\u0432\u0430\u044f"}},E=e=>{switch(e){case"urgent":return"\u0421\u0440\u043e\u0447\u043d\u043e";case"high":return"\u0412\u044b\u0441\u043e\u043a\u0438\u0439";case"medium":default:return"\u0421\u0440\u0435\u0434\u043d\u0438\u0439";case"low":return"\u041d\u0438\u0437\u043a\u0438\u0439"}},S=e=>!!e&&cw(e,new Date),C=e=>{if(!e)return!1;const t=dw(new Date,3);return hw(e,new Date)&&cw(e,t)},I=s.filter(e=>{if(d){var t;const n=d.toLowerCase();return e.title.toLowerCase().includes(n)||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(n))||e.tags.some(e=>e.toLowerCase().includes(n))}return!0}).filter(e=>!(l.status&&l.status.length>0)||l.status.includes(e.status)).filter(e=>!(l.priority&&l.priority.length>0)||l.priority.includes(e.priority)).sort((e,t)=>{let n,r;switch(m){case"createdAt":n=new Date(e.createdAt).getTime(),r=new Date(t.createdAt).getTime();break;case"dueDate":n=e.dueDate?new Date(e.dueDate).getTime():1/0,r=t.dueDate?new Date(t.dueDate).getTime():1/0;break;case"priority":const s={urgent:4,high:3,medium:2,low:1};n=s[e.priority]||0,r=s[t.priority]||0;break;case"status":const i={new:1,in_progress:2,review:3,completed:4,cancelled:5,on_hold:6};n=i[e.status]||0,r=i[t.status]||0;break;default:return 0}return"asc"===y?n-r:r-n}),T=async(e,t)=>{const n="completed"===t?"new":"completed";await(async(e,t)=>{try{await a(e,t)}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430:",n)}})(e,n)};return i?(0,Nm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#c0c0c0"}})}):(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("h1",{className:"text-xl sm:text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438"}),(0,Nm.jsxs)("p",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u0434\u0430\u0447: ",s.length," | \u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: ",I.length]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nm.jsxs)("button",{onClick:()=>p(!f),className:"btn-secondary",children:[(0,Nm.jsx)(wx,{className:"w-4 h-4 mr-2"}),"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"]}),(0,Nm.jsxs)("button",{onClick:t,className:"btn-primary",children:[(0,Nm.jsx)(Cm,{className:"w-4 h-4 mr-2"}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"]})]})]}),(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Nm.jsx)("div",{className:"flex-1",children:(0,Nm.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a \u0437\u0430\u0434\u0430\u0447...",value:d,onChange:e=>h(e.target.value),className:"form-input"})}),(0,Nm.jsxs)("div",{className:"flex gap-2",children:[(0,Nm.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"form-input",children:[(0,Nm.jsx)("option",{value:"createdAt",children:"\u041f\u043e \u0434\u0430\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"}),(0,Nm.jsx)("option",{value:"dueDate",children:"\u041f\u043e \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u0443"}),(0,Nm.jsx)("option",{value:"priority",children:"\u041f\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0443"}),(0,Nm.jsx)("option",{value:"status",children:"\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443"})]}),(0,Nm.jsx)("button",{onClick:()=>v("asc"===y?"desc":"asc"),className:"btn-secondary",children:"asc"===y?"\u2191":"\u2193"})]})]}),f&&(0,Nm.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:(0,Nm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Nm.jsx)("div",{className:"space-y-2",children:["new","in_progress","review","completed","cancelled","on_hold"].map(e=>{var t;return(0,Nm.jsxs)("label",{className:"flex items-center",children:[(0,Nm.jsx)("input",{type:"checkbox",checked:(null===(t=l.status)||void 0===t?void 0:t.includes(e))||!1,onChange:t=>{const n=l.status||[];t.target.checked?u(c(c({},l),{},{status:[...n,e]})):u(c(c({},l),{},{status:n.filter(t=>t!==e)}))},className:"mr-2"}),(0,Nm.jsx)("span",{className:"text-sm",children:N(e)})]},e)})})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442"}),(0,Nm.jsx)("div",{className:"space-y-2",children:["low","medium","high","urgent"].map(e=>{var t;return(0,Nm.jsxs)("label",{className:"flex items-center",children:[(0,Nm.jsx)("input",{type:"checkbox",checked:(null===(t=l.priority)||void 0===t?void 0:t.includes(e))||!1,onChange:t=>{const n=l.priority||[];t.target.checked?u(c(c({},l),{},{priority:[...n,e]})):u(c(c({},l),{},{priority:n.filter(t=>t!==e)}))},className:"mr-2"}),(0,Nm.jsx)("span",{className:"text-sm",children:E(e)})]},e)})})]})]})}),(0,Nm.jsx)("div",{className:"space-y-2",children:0===I.length?(0,Nm.jsxs)("div",{className:"text-center py-12",style:{color:"#808080"},children:[(0,Nm.jsx)(sw,{className:"w-16 h-16 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:"\u0417\u0430\u0434\u0430\u0447 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443"})]}):I.map(e=>{const t=b.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2 p-3 hover:bg-white/5 transition-colors",style:{minWidth:0},children:[(0,Nm.jsx)("button",{onClick:()=>x(e.id),className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:t?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>x(e.id),children:(0,Nm.jsx)("h3",{className:"font-accent break-words text-sm sm:text-base overflow-wrap-anywhere",style:{color:"#c0c0c0",wordBreak:"break-word",overflowWrap:"anywhere"},children:e.title})}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,Nm.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id,e.status)},className:"p-1.5 hover:bg-green-500/20 rounded-lg transition-colors",title:"completed"===e.status?"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0435\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0443\u044e":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0443\u044e",children:(0,Nm.jsx)(xx,{className:"w-4 h-4",style:{color:"completed"===e.status?"#80c080":"#b0b0b0"}})}),(0,Nm.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",children:(0,Nm.jsx)(kx,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{if(window.confirm('\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 "'.concat(t,'"?')))try{await o(e)}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438:",n)}})(e.id,e.title)},className:"p-1.5 hover:bg-red-500/20 rounded-lg transition-colors",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:(0,Nm.jsx)(_x,{className:"w-4 h-4",style:{color:"#c08080"}})})]})]}),t&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium backdrop-blur-sm border ".concat(k(e.status)),children:N(e.status)}),(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium backdrop-blur-sm ".concat(_(e.priority)),children:E(e.priority)})]}),e.description&&(0,Nm.jsx)("p",{className:"text-xs sm:text-sm break-words",style:{color:"#a0a0a0"},children:e.description}),(0,Nm.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[e.dueDate&&(0,Nm.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(S(e.dueDate)?"bg-red-900/30 text-red-300 border border-red-500/20":C(e.dueDate)?"bg-yellow-900/30 text-yellow-300 border border-yellow-500/20":"bg-gray-900/30 text-gray-300 border border-gray-500/20"),children:[(0,Nm.jsx)(Dm,{className:"w-3 h-3 inline mr-1"}),rx(new Date(e.dueDate),"dd MMM",{locale:px}),S(e.dueDate)&&" (\u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e)",C(e.dueDate)&&" (\u0441\u043a\u043e\u0440\u043e)"]}),e.tags.map(e=>(0,Nm.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-800/30 text-gray-300 border border-gray-600/20",children:[(0,Nm.jsx)(vx,{className:"w-3 h-3 inline mr-1"}),e]},e))]}),(0,Nm.jsx)("div",{className:"flex items-center justify-between text-sm",style:{color:"#909090"},children:(0,Nm.jsxs)("span",{children:["\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e: ",rx(new Date(e.updatedAt),"dd MMM HH:mm",{locale:px})]})}),e.checklist&&e.checklist.length>0&&(0,Nm.jsx)("div",{className:"pt-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsx)("div",{className:"space-y-2",children:e.checklist.map(e=>(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>{},className:"rounded"}),(0,Nm.jsx)("span",{className:"text-sm ".concat(e.completed?"line-through":""),style:{color:e.completed?"#808080":"#c0c0c0"},children:e.text})]},e.id))})})]})})]},e.id)})})]})},Ex=e=>{let{isOpen:t,onClose:n,project:s}=e;const{createProject:i,updateProject:a}=Qb(),[o,l]=(0,r.useState)({name:"",description:"",status:"planning",startDate:"",endDate:"",tags:""}),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({});(0,r.useEffect)(()=>{l(s?{name:s.name,description:s.description||"",status:s.status,startDate:s.startDate?new Date(s.startDate).toISOString().split("T")[0]:"",endDate:s.endDate?new Date(s.endDate).toISOString().split("T")[0]:"",tags:s.tags.join(", ")}:{name:"",description:"",status:"planning",startDate:"",endDate:"",tags:""})},[s]);const p=(e,t)=>{l(n=>c(c({},n),{},{[e]:t})),h[e]&&f(t=>c(c({},t),{},{[e]:""}))};return t?(0,Nm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,Nm.jsxs)("div",{className:"rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",style:{backgroundColor:"#f5f5f7"},children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b",style:{borderColor:"#e0e0e0"},children:[(0,Nm.jsx)("h2",{className:"text-base sm:text-xl font-heading break-words pr-2",style:{color:"#2c2c2e"},children:s?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"}),(0,Nm.jsx)("button",{onClick:n,className:"p-2 rounded-lg transition-colors flex-shrink-0",style:{backgroundColor:"rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)",children:(0,Nm.jsx)(yx,{className:"w-5 h-5",style:{color:"#2c2c2e"}})})]}),(0,Nm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.name.trim()||(e.name="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),f(e),0===Object.keys(e).length})()){d(!0);try{const e={name:o.name.trim(),description:o.description.trim()||void 0,status:o.status,startDate:o.startDate?new Date(o.startDate):void 0,endDate:o.endDate?new Date(o.endDate):void 0,tags:o.tags.split(",").map(e=>e.trim()).filter(e=>e)};s?await a(s.id,e):await i(e),setTimeout(()=>{n()},100)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430:",t)}finally{d(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 *"}),(0,Nm.jsx)("input",{type:"text",value:o.name,onChange:e=>p("name",e.target.value),className:"form-input ".concat(h.name?"border-red-500":""),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"}),h.name&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.name})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,Nm.jsx)("textarea",{value:o.description,onChange:e=>p("description",e.target.value),className:"form-input h-24 resize-none",placeholder:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Nm.jsxs)("select",{value:o.status,onChange:e=>p("status",e.target.value),className:"form-input",children:[(0,Nm.jsx)("option",{value:"planning",children:"\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,Nm.jsx)("option",{value:"active",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439"}),(0,Nm.jsx)("option",{value:"on_hold",children:"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d"}),(0,Nm.jsx)("option",{value:"completed",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d"}),(0,Nm.jsx)("option",{value:"cancelled",children:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"})]})]}),(0,Nm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 inline mr-1"}),"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430"]}),(0,Nm.jsx)("input",{type:"date",value:o.startDate,onChange:e=>p("startDate",e.target.value),className:"form-input"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 inline mr-1"}),"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f"]}),(0,Nm.jsx)("input",{type:"date",value:o.endDate,onChange:e=>p("endDate",e.target.value),className:"form-input"})]})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(vx,{className:"w-4 h-4 inline mr-1"}),"\u0422\u0435\u0433\u0438 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)"]}),(0,Nm.jsx)("input",{type:"text",value:o.tags,onChange:e=>p("tags",e.target.value),className:"form-input",placeholder:"\u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430, \u0434\u0438\u0437\u0430\u0439\u043d, \u0441\u0440\u043e\u0447\u043d\u043e"}),(0,Nm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0439\u0442\u0435 \u0442\u0435\u0433\u0438 \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438"})]}),(0,Nm.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,Nm.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Nm.jsx)("button",{type:"submit",disabled:u,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})]})}):null},Sx=f("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Cx=e=>{let{onAddProject:t,onEditProject:n}=e;const{projects:s,loading:i,deleteProject:a}=Qb(),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)("all"),f=e=>{switch(e){case"planning":return"text-gray-700 bg-gray-100 border-gray-300";case"active":return"text-green-700 bg-green-50 border-green-200";case"on_hold":return"text-yellow-700 bg-yellow-50 border-yellow-200";case"completed":default:return"text-gray-700 bg-gray-50 border-gray-200";case"cancelled":return"text-red-700 bg-red-50 border-red-200"}},p=e=>{switch(e){case"planning":return"\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435";case"active":return"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439";case"on_hold":return"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d";case"completed":return"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d";case"cancelled":return"\u041e\u0442\u043c\u0435\u043d\u0435\u043d";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"}},m=s.filter(e=>{if(o){var t;const n=o.toLowerCase();return e.name.toLowerCase().includes(n)||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(n))||e.tags.some(e=>e.toLowerCase().includes(n))}return!0}).filter(e=>"all"===d||e.status===d).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime());return i?(0,Nm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#c0c0c0"}})}):(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("h1",{className:"text-xl sm:text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"}),(0,Nm.jsxs)("p",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:["\u0412\u0441\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432: ",s.length," | \u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: ",m.length]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nm.jsxs)("button",{onClick:()=>u(!c),className:"btn-secondary",children:[(0,Nm.jsx)(wx,{className:"w-4 h-4 mr-2"}),"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"]}),(0,Nm.jsxs)("button",{onClick:t,className:"btn-primary",children:[(0,Nm.jsx)(Cm,{className:"w-4 h-4 mr-2"}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"]})]})]}),(0,Nm.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,Nm.jsx)("div",{className:"flex-1",children:(0,Nm.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432...",value:o,onChange:e=>l(e.target.value),className:"form-input"})})}),c&&(0,Nm.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Nm.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"form-input",children:[(0,Nm.jsx)("option",{value:"all",children:"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"}),(0,Nm.jsx)("option",{value:"planning",children:"\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,Nm.jsx)("option",{value:"active",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439"}),(0,Nm.jsx)("option",{value:"on_hold",children:"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d"}),(0,Nm.jsx)("option",{value:"completed",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d"}),(0,Nm.jsx)("option",{value:"cancelled",children:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"})]})]})}),(0,Nm.jsx)("div",{className:"space-y-4",children:0===m.length?(0,Nm.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Nm.jsx)(Tm,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,Nm.jsx)("h3",{className:"text-lg font-medium mb-2",children:"\u041f\u0440\u043e\u0435\u043a\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Nm.jsx)("p",{children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442"})]}):m.map(e=>(0,Nm.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,Nm.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Nm.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,Nm.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(80, 80, 80, 0.2)"},children:(0,Nm.jsx)(Tm,{className:"w-6 h-6",style:{color:"#b0b0b0"}})}),(0,Nm.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Nm.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),e.description&&(0,Nm.jsx)("p",{className:"text-gray-600 mb-3 break-words",children:e.description}),(0,Nm.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(0,Nm.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(f(e.status)),children:p(e.status)}),e.startDate&&(0,Nm.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,Nm.jsx)(Dm,{className:"w-3 h-3 inline mr-1"}),"\u041d\u0430\u0447\u0430\u043b\u043e: ",rx(new Date(e.startDate),"dd MMM yyyy",{locale:px})]}),e.endDate&&(0,Nm.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,Nm.jsx)(Dm,{className:"w-3 h-3 inline mr-1"}),"\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435: ",rx(new Date(e.endDate),"dd MMM yyyy",{locale:px})]}),e.tags.map(e=>(0,Nm.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-200 text-gray-700",children:[(0,Nm.jsx)(vx,{className:"w-3 h-3 inline mr-1"}),e]},e))]}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,Nm.jsxs)("span",{children:["\u0421\u043e\u0437\u0434\u0430\u043d: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),(0,Nm.jsxs)("span",{children:["\u0417\u0430\u0434\u0430\u0447: ",e.tasks.length]})]})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("button",{onClick:()=>n(e),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",children:(0,Nm.jsx)(Sx,{className:"w-4 h-4 text-gray-400"})}),(0,Nm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442? \u0412\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0442\u0430\u043a\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b."))try{await a(e)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430:",t)}})(e.id),className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:(0,Nm.jsx)(_x,{className:"w-4 h-4 text-red-400"})})]})]})},e.id))})]})},Ix=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{try{s(!0),a(null);const e=await Ub.notes.orderBy("createdAt").toArray();t(e)}catch(e){a(e instanceof Error?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u043c\u0435\u0442\u043e\u043a")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);return{notes:e,loading:n,error:i,createNote:async e=>{const n=c(c({},e),{},{id:Wb(),createdAt:new Date,updatedAt:new Date});try{return await Ub.notes.add(n),t(e=>[...e,n]),n}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0438"),r}},updateNote:async(e,n)=>{try{const r=c(c({},n),{},{updatedAt:new Date});await Ub.notes.update(e,r),t(t=>t.map(t=>t.id===e?c(c({},t),r):t))}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0438"),r}},deleteNote:async e=>{try{await Ub.notes.delete(e),t(t=>t.filter(t=>t.id!==e))}catch(n){throw a(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0438"),n}},refetch:o}},Tx=e=>{let{onAddNote:t,onEditNote:n}=e;const{notes:s,loading:i,deleteNote:a,updateNote:o}=Ix(),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("all"),h=e=>{switch(e){case"idea":return"\u0418\u0434\u0435\u044f";case"reminder":return"\u041d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435";case"link":return"\u0421\u0441\u044b\u043b\u043a\u0438";case"book":return"\u041a\u043d\u0438\u0436\u043a\u0438";case"series":return"\u0421\u0435\u0440\u0438\u0430\u043b\u044b";default:return"\u0414\u0440\u0443\u0433\u043e\u0435"}},f=s.filter(e=>{if(e.archived)return!1;if(l){const t=l.toLowerCase();return e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t))}return!0}).filter(e=>"all"===u||e.type===u).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime());return i?(0,Nm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#c0c0c0"}})}):(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("h1",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u041c\u043e\u0438 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),(0,Nm.jsxs)("p",{className:"font-accent",style:{color:"#a0a0a0"},children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u043c\u0435\u0442\u043e\u043a: ",s.length," | \u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: ",f.length]})]}),(0,Nm.jsxs)("button",{onClick:t,className:"group relative w-14 h-14 rounded-full transition-all duration-500 hover:scale-110 hover:rotate-90 shadow-2xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.95), rgba(35, 39, 41, 0.95))",border:"2px solid rgba(120, 120, 120, 0.4)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",children:[(0,Nm.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),(0,Nm.jsx)(Cm,{className:"w-7 h-7 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 drop-shadow-lg",style:{color:"#d0d0d0"}})]})]}),(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Nm.jsx)("div",{className:"flex-1",children:(0,Nm.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043c\u0435\u0442\u043e\u043a...",value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 rounded-lg backdrop-blur-sm border transition-all duration-300 focus:ring-2 focus:ring-gray-500/50 focus:border-transparent",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"}})}),(0,Nm.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"px-3 py-2 rounded-lg backdrop-blur-sm border transition-all duration-300 focus:ring-2 focus:ring-gray-500/50 focus:border-transparent",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"},children:[(0,Nm.jsx)("option",{value:"all",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b"}),(0,Nm.jsx)("option",{value:"idea",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0418\u0434\u0435\u0438"}),(0,Nm.jsx)("option",{value:"reminder",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u041d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f"}),(0,Nm.jsx)("option",{value:"link",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0421\u0441\u044b\u043b\u043a\u0438"}),(0,Nm.jsx)("option",{value:"book",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u041a\u043d\u0438\u0436\u043a\u0438"}),(0,Nm.jsx)("option",{value:"series",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0421\u0435\u0440\u0438\u0430\u043b\u044b"}),(0,Nm.jsx)("option",{value:"other",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0414\u0440\u0443\u0433\u043e\u0435"})]})]}),(0,Nm.jsx)("div",{className:"space-y-4",children:0===f.length?(0,Nm.jsxs)("div",{className:"text-center py-12",style:{color:"#808080"},children:[(0,Nm.jsx)(Am,{className:"w-16 h-16 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:"\u0417\u0430\u043c\u0435\u0442\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u0435\u0440\u0432\u0443\u044e \u0437\u0430\u043c\u0435\u0442\u043a\u0443"})]}):(0,Nm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(e=>{const t=(e=>{if(e&&!e.includes(","))return e;if(e&&e.includes(",")){const t=e.split(",");if(t.length>=3)return t[2]}return"#FEF3C7"})(e.color),r=(e=>{switch(e){case"idea":return{bg:"#E6D5E6",text:"#4A2C4A",border:"#C8A8C8"};case"reminder":return{bg:"#FFE4E1",text:"#8B4049",border:"#FFB6C1"};case"link":return{bg:"#E0F2F7",text:"#2C5F6F",border:"#B2D8E5"};case"book":return{bg:"#F5E6D3",text:"#6B5744",border:"#D4C5B0"};case"series":return{bg:"#FADADD",text:"#8B5F65",border:"#F4C2C2"};default:return{bg:"#E8E5D5",text:"#5A5742",border:"#C8C5B0"}}})(e.type);return(0,Nm.jsxs)("div",{className:"relative group rounded-2xl transition-all duration-300 hover:scale-[1.03] hover:-rotate-1 shadow-lg hover:shadow-2xl",style:{backgroundColor:t,border:"2px solid rgba(0, 0, 0, 0.1)"},children:[(0,Nm.jsxs)("div",{className:"p-5 cursor-pointer min-h-[200px] relative",onClick:()=>n(e),children:[(0,Nm.jsx)("div",{className:"absolute top-3 right-3",children:(0,Nm.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold shadow-md",style:{backgroundColor:r.bg,color:r.text,border:"2px solid ".concat(r.border)},children:h(e.type)})}),(0,Nm.jsx)("div",{className:"pr-20 mb-3",children:(0,Nm.jsx)("h3",{className:"text-lg font-heading font-bold break-words",style:{color:"#2c2c2e"},children:e.title})}),(0,Nm.jsx)("p",{className:"text-sm mb-4 break-words whitespace-pre-wrap leading-relaxed",style:{color:"#3c3c3e"},children:e.content}),e.tags.length>0&&(0,Nm.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(e=>(0,Nm.jsxs)("span",{className:"px-2 py-1 text-xs rounded-lg font-medium shadow-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.15)",color:"#2c2c2e"},children:["#",e]},e))}),(0,Nm.jsx)("div",{className:"absolute bottom-3 right-3 text-xs font-medium",style:{color:"rgba(0, 0, 0, 0.4)"},children:rx(new Date(e.updatedAt),"dd MMM",{locale:px})})]}),(0,Nm.jsxs)("div",{className:"absolute top-3 left-3 opacity-0 group-hover:opacity-100 transition-all duration-200 flex space-x-1",children:[(0,Nm.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043c\u0435\u0442\u043a\u0443? \u041e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0430 \u0432 \u0430\u0440\u0445\u0438\u0432."))try{await o(e,{archived:!0,archivedAt:new Date})}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0438:",t)}})(e.id)},className:"p-1.5 rounded-full shadow-lg",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(100, 100, 100, 0.3)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.2)",title:"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",children:(0,Nm.jsx)(Pm,{className:"w-4 h-4",style:{color:"#2c2c2e"}})}),(0,Nm.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043c\u0435\u0442\u043a\u0443?"))try{await a(e)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0438:",t)}})(e.id)},className:"p-1.5 rounded-full shadow-lg",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(200, 50, 50, 0.3)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.2)",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",children:(0,Nm.jsx)(yx,{className:"w-4 h-4",style:{color:"#2c2c2e"}})})]})]},e.id)})})})]})},jx=f("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Dx=f("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ax=f("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Px=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{try{s(!0),a(null);const e=await Ub.clients.orderBy("createdAt").toArray();t(e)}catch(e){a(e instanceof Error?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);return{clients:e,loading:n,error:i,createClient:async e=>{const n=c(c({},e),{},{id:Wb(),createdAt:new Date,updatedAt:new Date,projects:[]});try{return await Ub.clients.add(n),t(e=>[...e,n]),n}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),r}},updateClient:async(e,n)=>{try{const r=c(c({},n),{},{updatedAt:new Date});await Ub.clients.update(e,r),t(t=>t.map(t=>t.id===e?c(c({},t),r):t))}catch(r){throw a(r instanceof Error?r.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),r}},deleteClient:async e=>{try{const n=await Ub.projects.where("clientId").equals(e).toArray();for(const e of n)await Ub.tasks.where("projectId").equals(e.id).delete(),await Ub.projects.delete(e.id);await Ub.clients.delete(e),t(t=>t.filter(t=>t.id!==e))}catch(n){throw a(n instanceof Error?n.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),n}},refetch:o}},Ox=e=>{let{isOpen:t,onClose:n,client:s}=e;const{createClient:i,updateClient:a}=Px(),[o,l]=(0,r.useState)({name:"",email:"",phone:"",company:"",notes:""}),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({});(0,r.useEffect)(()=>{l(s?{name:s.name,email:s.email||"",phone:s.phone||"",company:s.company||"",notes:s.notes||""}:{name:"",email:"",phone:"",company:"",notes:""})},[s]);const p=(e,t)=>{l(n=>c(c({},n),{},{[e]:t})),h[e]&&f(t=>c(c({},t),{},{[e]:""}))};return t?(0,Nm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,Nm.jsxs)("div",{className:"rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",style:{backgroundColor:"#f5f5f7"},children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b",style:{borderColor:"#e0e0e0"},children:[(0,Nm.jsx)("h2",{className:"text-base sm:text-xl font-heading break-words pr-2",style:{color:"#2c2c2e"},children:s?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),(0,Nm.jsx)("button",{onClick:n,className:"p-2 rounded-lg transition-colors flex-shrink-0",style:{backgroundColor:"rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)",children:(0,Nm.jsx)(yx,{className:"w-5 h-5",style:{color:"#2c2c2e"}})})]}),(0,Nm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.name.trim()||(e.name="\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(e.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"),f(e),0===Object.keys(e).length})()){d(!0);try{const e={name:o.name.trim(),email:o.email.trim()||void 0,phone:o.phone.trim()||void 0,company:o.company.trim()||void 0,notes:o.notes.trim()||void 0};s?await a(s.id,e):await i(e),setTimeout(()=>{n()},100)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430:",t)}finally{d(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(y,{className:"w-4 h-4 inline mr-1"}),"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 *"]}),(0,Nm.jsx)("input",{type:"text",value:o.name,onChange:e=>p("name",e.target.value),className:"form-input ".concat(h.name?"border-red-500":""),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),h.name&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.name})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(jx,{className:"w-4 h-4 inline mr-1"}),"Email"]}),(0,Nm.jsx)("input",{type:"email",value:o.email,onChange:e=>p("email",e.target.value),className:"form-input ".concat(h.email?"border-red-500":""),placeholder:"client@example.com"}),h.email&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.email})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Dx,{className:"w-4 h-4 inline mr-1"}),"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"]}),(0,Nm.jsx)("input",{type:"tel",value:o.phone,onChange:e=>p("phone",e.target.value),className:"form-input",placeholder:"+7 (999) 123-45-67"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Ax,{className:"w-4 h-4 inline mr-1"}),"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"]}),(0,Nm.jsx)("input",{type:"text",value:o.company,onChange:e=>p("company",e.target.value),className:"form-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"}),(0,Nm.jsx)("textarea",{value:o.notes,onChange:e=>p("notes",e.target.value),className:"form-input h-24 resize-none",placeholder:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"})]}),(0,Nm.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,Nm.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Nm.jsx)("button",{type:"submit",disabled:u,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})}):null},Rx=e=>{let{onAddClient:t,onEditClient:n}=e;const{clients:s,loading:i,deleteClient:a}=Px(),[o,l]=(0,r.useState)(""),c=s.filter(e=>{if(o){var t,n,r,s;const i=o.toLowerCase();return e.name.toLowerCase().includes(i)||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(n=e.phone)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===(r=e.company)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(s=e.notes)||void 0===s?void 0:s.toLowerCase().includes(i))}return!0}).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime());return i?(0,Nm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#c0c0c0"}})}):(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("h1",{className:"text-xl sm:text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"}),(0,Nm.jsxs)("p",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:["\u0412\u0441\u0435\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432: ",s.length," | \u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: ",c.length]})]}),(0,Nm.jsxs)("button",{onClick:t,className:"btn-primary",children:[(0,Nm.jsx)(Cm,{className:"w-4 h-4 mr-2"}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"]})]}),(0,Nm.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,Nm.jsx)("div",{className:"flex-1",children:(0,Nm.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432...",value:o,onChange:e=>l(e.target.value),className:"form-input"})})}),(0,Nm.jsx)("div",{className:"space-y-4",children:0===c.length?(0,Nm.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Nm.jsx)(y,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,Nm.jsx)("h3",{className:"text-lg font-medium mb-2",children:"\u041a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Nm.jsx)("p",{children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0435\u0433\u043e \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430"})]}):c.map(e=>(0,Nm.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,Nm.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Nm.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,Nm.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(80, 80, 80, 0.2)"},children:(0,Nm.jsx)(y,{className:"w-6 h-6",style:{color:"#b0b0b0"}})}),(0,Nm.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Nm.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),e.company&&(0,Nm.jsxs)("p",{className:"text-gray-600 mb-3 flex items-center",children:[(0,Nm.jsx)(Ax,{className:"w-4 h-4 mr-2 text-gray-400"}),e.company]}),(0,Nm.jsxs)("div",{className:"space-y-2 mb-3",children:[e.email&&(0,Nm.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,Nm.jsx)(jx,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,Nm.jsx)("a",{href:"mailto:".concat(e.email),className:"hover:underline",style:{color:"#c0c0c0"},children:e.email})]}),e.phone&&(0,Nm.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,Nm.jsx)(Dx,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,Nm.jsx)("a",{href:"tel:".concat(e.phone),className:"hover:underline",style:{color:"#c0c0c0"},children:e.phone})]})]}),e.notes&&(0,Nm.jsx)("p",{className:"text-gray-600 text-sm mb-3 break-words",children:e.notes}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,Nm.jsxs)("span",{children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),(0,Nm.jsxs)("span",{children:["\u041f\u0440\u043e\u0435\u043a\u0442\u043e\u0432: ",e.projects.length]})]})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("button",{onClick:()=>n(e),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",children:(0,Nm.jsx)(Sx,{className:"w-4 h-4 text-gray-400"})}),(0,Nm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430? \u0412\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0442\u0430\u043a\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b."))try{await a(e)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430:",t)}})(e.id),className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:(0,Nm.jsx)(_x,{className:"w-4 h-4 text-red-400"})})]})]})},e.id))})]})},Mx=e=>{let{isOpen:t,onClose:n,payment:s}=e;const{createPayment:i,updatePayment:a}=Yb(),{clients:o}=Px(),{projects:l}=Qb(),[u,d]=(0,r.useState)({amount:"",description:"",type:"income",paymentDate:(new Date).toISOString().split("T")[0]}),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)({});(0,r.useEffect)(()=>{d(s?{amount:s.amount.toString(),description:s.description,type:s.type,paymentDate:s.paidDate?new Date(s.paidDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}:{amount:"",description:"",type:"income",paymentDate:(new Date).toISOString().split("T")[0]})},[s]);const g=(e,t)=>{d(n=>c(c({},n),{},{[e]:t})),p[e]&&m(t=>c(c({},t),{},{[e]:""}))};return t?(0,Nm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,Nm.jsxs)("div",{className:"rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",style:{backgroundColor:"#f5f5f7"},children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b",style:{borderColor:"#e0e0e0"},children:[(0,Nm.jsx)("h2",{className:"text-base sm:text-xl font-heading break-words pr-2",style:{color:"#2c2c2e"},children:s?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043b\u0430\u0442\u0435\u0436":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u0442\u0435\u0436"}),(0,Nm.jsx)("button",{onClick:n,className:"p-2 rounded-lg transition-colors flex-shrink-0",style:{backgroundColor:"rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)",children:(0,Nm.jsx)(yx,{className:"w-5 h-5",style:{color:"#2c2c2e"}})})]}),(0,Nm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return u.amount.trim()?(isNaN(Number(u.amount))||Number(u.amount)<=0)&&(e.amount="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0441\u0443\u043c\u043c\u0443"):e.amount="\u0421\u0443\u043c\u043c\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430",u.description.trim()||(e.description="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),m(e),0===Object.keys(e).length})()){f(!0);try{const e={amount:Number(u.amount),description:u.description.trim(),type:u.type,status:"paid",paidDate:new Date(u.paymentDate),category:"\u041e\u0431\u0449\u0435\u0435",tags:[]};s?await a(s.id,e):await i(e),setTimeout(()=>{n()},100)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430:",t)}finally{f(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,Nm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)($b,{className:"w-4 h-4 inline mr-1"}),"\u0421\u0443\u043c\u043c\u0430 *"]}),(0,Nm.jsx)("input",{type:"number",value:u.amount,onChange:e=>g("amount",e.target.value),className:"form-input ".concat(p.amount?"border-red-500":""),placeholder:"10000",min:"0",step:"0.01"}),p.amount&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.amount})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(ew,{className:"w-4 h-4 inline mr-1"}),"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"]}),(0,Nm.jsxs)("select",{value:u.type,onChange:e=>g("type",e.target.value),className:"form-input",children:[(0,Nm.jsx)("option",{value:"income",children:"\u0414\u043e\u0445\u043e\u0434"}),(0,Nm.jsx)("option",{value:"expense",children:"\u0420\u0430\u0441\u0445\u043e\u0434"})]})]})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 inline mr-1"}),"\u0414\u0430\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430 *"]}),(0,Nm.jsx)("input",{type:"date",value:u.paymentDate,onChange:e=>g("paymentDate",e.target.value),className:"form-input"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Am,{className:"w-4 h-4 inline mr-1"}),"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 *"]}),(0,Nm.jsx)("textarea",{value:u.description,onChange:e=>g("description",e.target.value),className:"form-input h-20 resize-none ".concat(p.description?"border-red-500":""),placeholder:"\u0417\u0430 \u0447\u0442\u043e \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d\u043e (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041e\u043f\u043b\u0430\u0442\u0430 \u0437\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u0430\u0439\u0442\u0430)"}),p.description&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.description})]}),(0,Nm.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,Nm.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Nm.jsx)("button",{type:"submit",disabled:h,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:h?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":s?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})}):null},Lx=f("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Fx=[{name:"\u0416\u0435\u043b\u0442\u044b\u0439",value:"#FEF3C7",text:"#92400E"},{name:"\u041e\u043b\u0438\u0432\u043a\u043e\u0432\u044b\u0439",value:"#E8E5D5",text:"#5A5742"},{name:"\u041f\u0443\u0434\u0440\u043e\u0432\u044b\u0439",value:"#FFE4E1",text:"#8B4049"},{name:"\u041c\u0430\u0442\u043e\u0432\u043e-\u043b\u0438\u043b\u043e\u0432\u044b\u0439",value:"#E6D5E6",text:"#4A2C4A"},{name:"\u041c\u0438\u043d\u0434\u0430\u043b\u044c\u043d\u044b\u0439",value:"#F5E6D3",text:"#6B5744"},{name:"\u041c\u0430\u0442\u043e\u0432\u043e-\u043d\u0435\u0431\u0435\u0441\u043d\u044b\u0439",value:"#E0F2F7",text:"#2C5F6F"},{name:"\u041c\u0430\u0442\u043e\u0432\u0430\u044f \u0440\u043e\u0437\u0430",value:"#FADADD",text:"#8B5F65"},{name:"\u041c\u044f\u0442\u043d\u044b\u0439",value:"#D1FAE5",text:"#065F46"}],Ux=e=>{var t;let{isOpen:n,onClose:s,note:i}=e;const{createNote:a,updateNote:o}=Ix(),[l,u]=(0,r.useState)({title:"",content:"",type:"idea",color:Fx[0].value,tags:""}),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)({});(0,r.useEffect)(()=>{u(i?{title:i.title,content:i.content,type:i.type,color:i.color||Fx[0].value,tags:i.tags.join(", ")}:{title:"",content:"",type:"idea",color:Fx[0].value,tags:""})},[i]);const m=(e,t)=>{u(n=>c(c({},n),{},{[e]:t})),f[e]&&p(t=>c(c({},t),{},{[e]:""}))};return n?(0,Nm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,Nm.jsxs)("div",{className:"rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",style:{backgroundColor:"#f5f5f7"},children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b",style:{borderColor:"#e0e0e0"},children:[(0,Nm.jsx)("h2",{className:"text-base sm:text-xl font-heading break-words pr-2",style:{color:"#2c2c2e"},children:i?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0438\u043a\u0435\u0440-\u0437\u0430\u043c\u0435\u0442\u043a\u0443"}),(0,Nm.jsx)("button",{onClick:s,className:"p-2 rounded-lg transition-colors flex-shrink-0",style:{backgroundColor:"rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)",children:(0,Nm.jsx)(yx,{className:"w-5 h-5",style:{color:"#2c2c2e"}})})]}),(0,Nm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.title.trim()||(e.title="\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d"),l.content.trim()||(e.content="\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),p(e),0===Object.keys(e).length})()){h(!0);try{const e={title:l.title.trim(),content:l.content.trim(),type:l.type,color:l.color,tags:l.tags.split(",").map(e=>e.trim()).filter(e=>e)};i?await o(i.id,e):await a(e),setTimeout(()=>{s()},100)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0438:",t)}finally{h(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Am,{className:"w-4 h-4 inline mr-1"}),"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043c\u0435\u0442\u043a\u0438 *"]}),(0,Nm.jsx)("input",{type:"text",value:l.title,onChange:e=>m("title",e.target.value),className:"form-input ".concat(f.title?"border-red-500":""),placeholder:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),f.title&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.title})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 *"}),(0,Nm.jsx)("textarea",{value:l.content,onChange:e=>m("content",e.target.value),className:"form-input h-32 resize-none ".concat(f.content?"border-red-500":""),placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u0437\u0430\u043c\u0435\u0442\u043a\u0443, \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b \u0438\u043b\u0438 \u0438\u0434\u0435\u044e..."}),f.content&&(0,Nm.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.content})]}),(0,Nm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u0422\u0438\u043f \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),(0,Nm.jsxs)("select",{value:l.type,onChange:e=>m("type",e.target.value),className:"form-input",children:[(0,Nm.jsx)("option",{value:"idea",children:"\ud83d\udca1 \u0418\u0434\u0435\u044f"}),(0,Nm.jsx)("option",{value:"reminder",children:"\u23f0 \u041d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435"}),(0,Nm.jsx)("option",{value:"link",children:"\ud83d\udd17 \u0421\u0441\u044b\u043b\u043a\u0438"}),(0,Nm.jsx)("option",{value:"book",children:"\ud83d\udcda \u041a\u043d\u0438\u0436\u043a\u0438"}),(0,Nm.jsx)("option",{value:"series",children:"\ud83d\udcfa \u0421\u0435\u0440\u0438\u0430\u043b\u044b"}),(0,Nm.jsx)("option",{value:"other",children:"\ud83d\udcdd \u0414\u0440\u0443\u0433\u043e\u0435"})]})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(Lx,{className:"w-4 h-4 inline mr-1"}),"\u0426\u0432\u0435\u0442 \u0441\u0442\u0438\u043a\u0435\u0440\u0430"]}),(0,Nm.jsx)("div",{className:"grid grid-cols-4 gap-3",children:Fx.map(e=>(0,Nm.jsx)("button",{type:"button",onClick:()=>m("color",e.value),className:"relative h-12 rounded-xl border-2 transition-all duration-300 hover:scale-110 shadow-md ".concat(l.color===e.value?"border-gray-800 ring-2 ring-gray-400 ring-offset-2":"border-gray-300"),style:{backgroundColor:e.value},title:e.name,children:l.color===e.value&&(0,Nm.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Nm.jsx)("div",{className:"w-4 h-4 bg-gray-800 rounded-full"})})},e.value))})]})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"form-label",children:[(0,Nm.jsx)(vx,{className:"w-4 h-4 inline mr-1"}),"\u0422\u0435\u0433\u0438"]}),(0,Nm.jsx)("input",{type:"text",value:l.tags,onChange:e=>m("tags",e.target.value),className:"form-input",placeholder:"\u0432\u0430\u0436\u043d\u043e\u0435, \u0441\u0440\u043e\u0447\u043d\u043e, \u0440\u0430\u0431\u043e\u0442\u0430"}),(0,Nm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0439\u0442\u0435 \u0442\u0435\u0433\u0438 \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438"})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("label",{className:"form-label",children:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"}),(0,Nm.jsxs)("div",{className:"p-4 rounded-lg border-2 border-dashed border-gray-300",style:{backgroundColor:l.color,color:(null===(t=Fx.find(e=>e.value===l.color))||void 0===t?void 0:t.text)||"#000"},children:[(0,Nm.jsx)("h4",{className:"font-semibold mb-2",children:l.title||"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),(0,Nm.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:l.content||"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438..."}),l.tags&&(0,Nm.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:l.tags.split(",").map((e,t)=>(0,Nm.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-black bg-opacity-10",children:e.trim()},t))})]})]}),(0,Nm.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,Nm.jsx)("button",{type:"button",onClick:s,className:"btn-secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,Nm.jsx)("button",{type:"submit",disabled:d,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0438\u043a\u0435\u0440"})]})]})]})}):null},Vx=f("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function Bx(e,t){var n;ow(1,arguments);var r=e||{},s=lw(r.start),i=lw(r.end).getTime();if(!(s.getTime()<=i))throw new RangeError("Invalid interval");var a=[],o=s;o.setHours(0,0,0,0);var l=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=i;)a.push(lw(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a}function zx(e){ow(1,arguments);var t=lw(e);return t.setHours(0,0,0,0),t}function Kx(e,t){ow(2,arguments);var n=zx(e),r=zx(t);return n.getTime()===r.getTime()}function qx(e,t){ow(2,arguments);var n=lw(e),r=uw(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());return i.setMonth(n.getMonth()+r+1,0),s>=i.getDate()?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}const Hx=()=>{const{tasks:e}=Gb(),[t,n]=(0,r.useState)(new Date),[s,i]=(0,r.useState)(null),a=function(e){ow(1,arguments);var t=lw(e);return t.setDate(1),t.setHours(0,0,0,0),t}(t),o=function(e){ow(1,arguments);var t=lw(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t),l=(Bx({start:a,end:o}),new Date(a));l.setDate(l.getDate()-a.getDay());const c=new Date(o);c.setDate(c.getDate()+(6-o.getDay()));const u=Bx({start:l,end:c}),d=t=>e.filter(e=>e.dueDate&&Kx(new Date(e.dueDate),t)),h=()=>s?d(s):[],f=e=>e.dueDate&&function(e){return ow(1,arguments),lw(e).getTime()<Date.now()}(new Date(e.dueDate))&&"completed"!==e.status,p=e=>{if(!e.dueDate)return!1;const t=new Date(e.dueDate),n=new Date,r=t.getTime()-n.getTime(),s=Math.ceil(r/864e5);return s<=3&&s>0&&"completed"!==e.status},m=e=>f(e)?"bg-red-100 text-red-800":p(e)?"bg-yellow-100 text-yellow-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800";return(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nm.jsx)("h1",{className:"text-xl sm:text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u043e\u0432"}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Nm.jsx)("button",{onClick:()=>n(function(e,t){return ow(2,arguments),qx(e,-uw(t))}(t,1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Nm.jsx)(Vx,{className:"w-5 h-5"})}),(0,Nm.jsxs)("h2",{className:"text-xl font-semibold text-gray-700 min-w-[200px] text-center",children:[["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][t.getMonth()]," ",t.getFullYear()]}),(0,Nm.jsx)("button",{onClick:()=>n(qx(t,1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Nm.jsx)(aw,{className:"w-5 h-5"})})]})]}),(0,Nm.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Nm.jsx)("div",{className:"lg:col-span-2",children:(0,Nm.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,Nm.jsx)("div",{className:"grid grid-cols-7 bg-gray-50",children:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"].map(e=>(0,Nm.jsx)("div",{className:"p-3 text-center text-sm font-medium text-gray-500",children:e},e))}),(0,Nm.jsx)("div",{className:"grid grid-cols-7",children:u.map((e,n)=>{const r=d(e),a=function(e,t){ow(2,arguments);var n=lw(e),r=lw(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}(e,t),o=function(e){return ow(1,arguments),Kx(e,Date.now())}(e),l=s&&Kx(e,s);return(0,Nm.jsxs)("div",{className:"\n                      min-h-[100px] p-2 border-r border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors\n                      ".concat(a?"":"bg-gray-50 text-gray-400","\n                      ").concat(o?"bg-blue-50":"","\n                      ").concat(l?"bg-blue-100":"","\n                    "),onClick:()=>i(e),children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Nm.jsx)("span",{className:"text-sm font-medium ".concat(o?"text-blue-600":""),children:rx(e,"d")}),r.length>0&&(0,Nm.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-full",children:r.length})]}),(0,Nm.jsxs)("div",{className:"space-y-1",children:[r.slice(0,2).map(e=>(0,Nm.jsx)("div",{className:"text-xs p-1 rounded truncate ".concat(m(e)),title:e.title,children:e.title},e.id)),r.length>2&&(0,Nm.jsxs)("div",{className:"text-xs text-gray-500",children:["+",r.length-2," \u0435\u0449\u0435"]})]})]},n)})})]})}),(0,Nm.jsx)("div",{className:"lg:col-span-1",children:(0,Nm.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,Nm.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Nm.jsx)(Dm,{className:"w-5 h-5 mr-2"}),s?rx(s,"dd MMMM yyyy",{locale:px}):"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443"]}),s?(0,Nm.jsx)("div",{className:"space-y-3",children:0===h().length?(0,Nm.jsx)("p",{className:"text-gray-500 text-sm",children:"\u041d\u0430 \u044d\u0442\u0443 \u0434\u0430\u0442\u0443 \u043d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447"}):h().map(e=>(0,Nm.jsxs)("div",{className:"p-3 rounded-lg border ".concat(m(e)),children:[(0,Nm.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Nm.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-1",children:[f(e)&&(0,Nm.jsx)(Xb,{className:"w-4 h-4 text-red-600"}),p(e)&&(0,Nm.jsx)(rw,{className:"w-4 h-4 text-yellow-600"})]})]}),e.description&&(0,Nm.jsx)("p",{className:"text-xs opacity-75 mb-2 line-clamp-2",children:e.description}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Nm.jsx)("span",{className:"capitalize",children:"completed"===e.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e":"in_progress"===e.status?"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":"review"===e.status?"\u041d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0438":"cancelled"===e.status?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e":"on_hold"===e.status?"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e":"\u041d\u043e\u0432\u0430\u044f"}),(0,Nm.jsx)("span",{children:rx(new Date(e.dueDate),"HH:mm")})]})]},e.id))}):(0,Nm.jsx)("p",{className:"text-gray-500 text-sm",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0432 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438"})]})})]})]})},Wx=f("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Gx=f("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qx=f("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Yx=()=>{const{files:e,loading:t,uploadFile:n,deleteFile:s}=(()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{try{s(!0),a(null);const e=await Ub.files.orderBy("uploadedAt").toArray();t(e)}catch(e){a(e instanceof Error?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432")}finally{s(!1)}},[]);return(0,r.useEffect)(()=>{o()},[o]),{files:e,loading:n,error:i,uploadFile:async e=>{try{const t=c(c({},e),{},{id:Wb(),uploadedAt:new Date});return await Ub.files.add(t),await o(),t}catch(t){throw a(t instanceof Error?t.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430"),t}},deleteFile:async e=>{try{await Ub.files.delete(e),await o()}catch(t){throw a(t instanceof Error?t.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430"),t}},refetch:o}})(),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),u=(0,r.useRef)(null),d=e.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),h=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?l(!0):"dragleave"===e.type&&l(!1)},f=async e=>{try{const t=new FileReader;t.onload=async t=>{var r;const s=null===(r=t.target)||void 0===r?void 0:r.result;await n({name:e.name,size:e.size,type:e.type,url:s,taskId:void 0,projectId:void 0})},t.readAsDataURL(e)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430:",t)}},p=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return t?(0,Nm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#c0c0c0"}})}):(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("h1",{className:"text-xl sm:text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u0424\u0430\u0439\u043b\u044b"}),(0,Nm.jsxs)("p",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:["\u0412\u0441\u0435\u0433\u043e \u0444\u0430\u0439\u043b\u043e\u0432: ",e.length," | \u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: ",d.length]})]}),(0,Nm.jsxs)("button",{onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},className:"btn-primary",children:[(0,Nm.jsx)(Cm,{className:"w-4 h-4 mr-2"}),"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"]})]}),(0,Nm.jsx)("div",{children:(0,Nm.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a \u0444\u0430\u0439\u043b\u043e\u0432...",value:i,onChange:e=>a(e.target.value),className:"form-input"})}),(0,Nm.jsxs)("div",{className:"\n          border-2 border-dashed rounded-lg p-8 text-center transition-colors\n          ".concat(o?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400","\n        "),onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:e=>{e.preventDefault(),e.stopPropagation(),l(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&f(e.dataTransfer.files[0])},children:[(0,Nm.jsx)(Om,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,Nm.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u044e\u0434\u0430"}),(0,Nm.jsx)("p",{className:"text-gray-600 mb-4",children:'\u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"'}),(0,Nm.jsx)("button",{onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},className:"btn-secondary",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b"})]}),(0,Nm.jsx)("input",{ref:u,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&f(e.target.files[0])},className:"hidden",multiple:!0}),(0,Nm.jsx)("div",{className:"space-y-4",children:0===d.length?(0,Nm.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Nm.jsx)(Wx,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,Nm.jsx)("h3",{className:"text-lg font-medium mb-2",children:"\u0424\u0430\u0439\u043b\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Nm.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u0444\u0430\u0439\u043b"})]}):(0,Nm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>{return(0,Nm.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[(0,Nm.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,Nm.jsx)("div",{className:"text-2xl",children:(t=e.type,t.startsWith("image/")?"\ud83d\uddbc\ufe0f":t.startsWith("video/")?"\ud83c\udfa5":t.startsWith("audio/")?"\ud83c\udfb5":t.includes("pdf")?"\ud83d\udcc4":t.includes("word")||t.includes("document")?"\ud83d\udcdd":t.includes("excel")||t.includes("spreadsheet")?"\ud83d\udcca":t.includes("zip")||t.includes("rar")?"\ud83d\udce6":"\ud83d\udcc1")}),(0,Nm.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Nm.jsx)("h3",{className:"font-medium text-gray-900 truncate",title:e.name,children:e.name}),(0,Nm.jsx)("p",{className:"text-sm text-gray-500",children:p(e.size)}),(0,Nm.jsx)("p",{className:"text-xs text-gray-400",children:rx(new Date(e.uploadedAt),"dd MMM yyyy HH:mm",{locale:px})})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nm.jsx)("span",{className:"text-xs text-gray-500",children:e.type}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("button",{onClick:()=>(e=>{const t=window.open();t&&t.document.write("\n        <html>\n          <head>\n            <title>".concat(e.name,'</title>\n            <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">\n            <style>\n              * { margin: 0; padding: 0; box-sizing: border-box; }\n              body { \n                font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Arial, sans-serif; \n                background: #1f2224;\n                color: #c0c0c0;\n                overflow: hidden;\n              }\n              .header {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                background: rgba(41, 45, 47, 0.95);\n                backdrop-filter: blur(20px);\n                border-bottom: 1px solid rgba(120, 120, 120, 0.3);\n                padding: 16px;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                z-index: 1000;\n              }\n              .file-name {\n                font-size: 14px;\n                font-weight: 600;\n                color: #c0c0c0;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                flex: 1;\n                margin-right: 12px;\n              }\n              .close-btn {\n                width: 44px;\n                height: 44px;\n                border-radius: 12px;\n                background: rgba(200, 80, 80, 0.2);\n                border: 1px solid rgba(200, 100, 100, 0.3);\n                color: #c08080;\n                font-size: 24px;\n                font-weight: bold;\n                cursor: pointer;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                transition: all 0.3s;\n                flex-shrink: 0;\n              }\n              .close-btn:hover {\n                background: rgba(200, 80, 80, 0.3);\n                transform: scale(1.1);\n              }\n              .content {\n                padding: 80px 20px 20px;\n                height: 100vh;\n                overflow: auto;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n              }\n              img { max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); }\n              video { max-width: 100%; border-radius: 8px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); }\n              iframe { width: 100%; height: calc(100vh - 100px); border: none; border-radius: 8px; background: white; }\n              .message { text-align: center; color: #a0a0a0; }\n              .download-link { color: #80c080; text-decoration: none; padding: 12px 24px; background: rgba(80, 200, 80, 0.1); border-radius: 8px; display: inline-block; margin-top: 16px; }\n            </style>\n          </head>\n          <body>\n            <div class="header">\n              <div class="file-name">').concat(e.name,'</div>\n              <button class="close-btn" onclick="window.close()" title="\u0417\u0430\u043a\u0440\u044b\u0442\u044c">\u2715</button>\n            </div>\n            <div class="content">\n              ').concat(e.type.startsWith("image/")?'<img src="'.concat(e.url,'" alt="').concat(e.name,'" />'):e.type.startsWith("video/")?'<video controls src="'.concat(e.url,'"></video>'):"application/pdf"===e.type?'<iframe src="'.concat(e.url,'"></iframe>'):'<div class="message">\n                    <p>\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0444\u0430\u0439\u043b\u0430</p>\n                    <a href="'.concat(e.url,'" download="').concat(e.name,'" class="download-link">\ud83d\udce5 \u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b</a>\n                   </div>'),"\n            </div>\n          </body>\n        </html>\n      "))})(e),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",children:(0,Nm.jsx)(Gx,{className:"w-4 h-4 text-gray-400"})}),(0,Nm.jsx)("button",{onClick:()=>(e=>{const t=document.createElement("a");t.href=e.url,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)})(e),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c",children:(0,Nm.jsx)(Qx,{className:"w-4 h-4 text-gray-400"})}),(0,Nm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0444\u0430\u0439\u043b?"))try{await s(e)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430:",t)}})(e.id),className:"p-1 hover:bg-red-100 rounded transition-colors",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:(0,Nm.jsx)(_x,{className:"w-4 h-4 text-red-400"})})]})]})]},e.id);var t})})})]})},Xx=e=>{let{title:t,description:n,icon:r}=e;return(0,Nm.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,Nm.jsxs)("div",{className:"text-center max-w-md mx-auto",children:[(0,Nm.jsx)("div",{className:"p-6 bg-blue-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,Nm.jsx)(r,{className:"w-12 h-12 text-blue-600"})}),(0,Nm.jsx)("h1",{className:"text-3xl font-heading text-gray-900 mb-4",children:t}),(0,Nm.jsx)("p",{className:"text-gray-600 mb-8 text-lg",children:n}),(0,Nm.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Nm.jsx)("p",{className:"text-blue-800 text-sm",children:"\ud83d\udea7 \u042d\u0442\u043e\u0442 \u0440\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435. \u0421\u043a\u043e\u0440\u043e \u0437\u0434\u0435\u0441\u044c \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043f\u043e\u043b\u043d\u043e\u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441!"})})]})})},Jx=()=>(0,Nm.jsx)(Xx,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",description:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f",icon:g}),$x=f("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Zx=f("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ek=f("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),tk=()=>{const{loginWithEmail:e,registerWithEmail:t}=_m(),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1);return(0,Nm.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"linear-gradient(to bottom right, #1a1d1f, #292d2f, #1f2224)"},children:[(0,Nm.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Nm.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsx)("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse",style:{backgroundColor:"rgba(255, 255, 255, 0.02)",animationDelay:"1s"}})]}),(0,Nm.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,Nm.jsxs)("div",{className:"text-center mb-8",children:[(0,Nm.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-4 backdrop-blur-xl shadow-2xl",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))",border:"2px solid rgba(120, 120, 120, 0.4)"},children:(0,Nm.jsx)($x,{className:"w-10 h-10",style:{color:"#d0d0d0"}})}),(0,Nm.jsx)("h1",{className:"text-3xl font-heading mb-2",style:{color:"#c0c0c0"},children:"TaskManager Pro"}),(0,Nm.jsx)("p",{className:"font-accent",style:{color:"#a0a0a0"},children:n?"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]}),(0,Nm.jsx)("div",{className:"backdrop-blur-xl rounded-2xl p-8 shadow-2xl border",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))",borderColor:"rgba(120, 120, 120, 0.3)"},children:(0,Nm.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),h(""),p(!0),!n&&o!==c)return h("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),void p(!1);if(o.length<6)return h("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),void p(!1);try{const r=n?await e(i,o):await t(i,o);r.success||h(r.error||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}catch(d){h("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430")}finally{p(!1)}},className:"space-y-6",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"block text-sm font-accent mb-2",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(jx,{className:"w-4 h-4 inline mr-2"}),"Email"]}),(0,Nm.jsx)("input",{type:"email",value:i,onChange:e=>a(e.target.value),placeholder:"your@email.com",className:"w-full px-4 py-3 rounded-lg border backdrop-blur-sm transition-all duration-300",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"},required:!0})]}),(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"block text-sm font-accent mb-2",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(Zx,{className:"w-4 h-4 inline mr-2"}),"\u041f\u0430\u0440\u043e\u043b\u044c"]}),(0,Nm.jsx)("input",{type:"password",value:o,onChange:e=>l(e.target.value),placeholder:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",className:"w-full px-4 py-3 rounded-lg border backdrop-blur-sm transition-all duration-300",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"},required:!0})]}),!n&&(0,Nm.jsxs)("div",{children:[(0,Nm.jsxs)("label",{className:"block text-sm font-accent mb-2",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(Zx,{className:"w-4 h-4 inline mr-2"}),"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"]}),(0,Nm.jsx)("input",{type:"password",value:c,onChange:e=>u(e.target.value),placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",className:"w-full px-4 py-3 rounded-lg border backdrop-blur-sm transition-all duration-300",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"},required:!0})]}),d&&(0,Nm.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"rgba(200, 80, 80, 0.2)",color:"#c08080"},children:d}),(0,Nm.jsx)("button",{type:"submit",disabled:f,className:"w-full btn-primary py-3 flex items-center justify-center space-x-2",children:f?(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2",style:{borderColor:"#c0c0c0"}}):(0,Nm.jsxs)(Nm.Fragment,{children:[(0,Nm.jsx)("span",{children:n?"\u0412\u043e\u0439\u0442\u0438":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),(0,Nm.jsx)(ek,{className:"w-5 h-5"})]})}),(0,Nm.jsx)("div",{className:"text-center",children:(0,Nm.jsx)("button",{type:"button",onClick:()=>{s(!n),h(""),a(""),l(""),u("")},className:"text-sm font-accent transition-colors hover:underline",style:{color:"#80c080"},children:n?"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0421\u043e\u0437\u0434\u0430\u0442\u044c":"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? \u0412\u043e\u0439\u0442\u0438"})})]})}),(0,Nm.jsxs)("div",{className:"mt-8 text-center",children:[(0,Nm.jsx)("p",{className:"text-sm font-accent",style:{color:"#808080"},children:"\u0412\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b \u0438 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u043e\u0431\u043b\u0430\u043a\u0435"}),(0,Nm.jsx)("p",{className:"text-xs mt-2",style:{color:"#707070"},children:"\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u0441 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0435\u0439"})]})]})]})},nk=f("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),rk=()=>{const{payments:e,deletePayment:t}=Yb(),{tasks:n}=Gb(),{projects:s}=Qb(),i=(0,r.useMemo)(()=>{const t=new Date,r=t.getMonth(),i=t.getFullYear(),a=e.filter(e=>{const t=new Date(e.createdAt);return t.getMonth()===r&&t.getFullYear()===i}),o=a.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),l=a.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),c=o-l,u=n.filter(e=>"completed"===e.status).length,d=n.length,h=d>0?u/d*100:0,f=n.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),p=s.filter(e=>"active"===e.status).length,m=s.filter(e=>"completed"===e.status).length;return{income:o,expenses:l,netIncome:c,completedTasks:u,totalTasks:d,completionRate:h,tasksByStatus:f,activeProjects:p,completedProjects:m,currentMonthPayments:a}},[e,n,s]),a=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(e);return(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nm.jsx)("h2",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),(0,Nm.jsx)("div",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:(new Date).toLocaleDateString("ru-RU",{month:"long",year:"numeric"})})]}),(0,Nm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-105 hover:-translate-y-1",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(80, 200, 80, 0.1)"}}),(0,Nm.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("p",{className:"text-sm font-accent mb-1",style:{color:"#80c080"},children:"\u0414\u043e\u0445\u043e\u0434\u044b"}),(0,Nm.jsx)("p",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:a(i.income)})]}),(0,Nm.jsx)("div",{className:"p-3 rounded-xl backdrop-blur-sm",style:{backgroundColor:"rgba(80, 200, 80, 0.15)",border:"1px solid rgba(80, 200, 80, 0.3)"},children:(0,Nm.jsx)(Jb,{className:"w-6 h-6",style:{color:"#80c080"}})})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]}),(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-105 hover:-translate-y-1",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(200, 80, 80, 0.1)"}}),(0,Nm.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("p",{className:"text-sm font-accent mb-1",style:{color:"#c08080"},children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"}),(0,Nm.jsx)("p",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:a(i.expenses)})]}),(0,Nm.jsx)("div",{className:"p-3 rounded-xl backdrop-blur-sm",style:{backgroundColor:"rgba(200, 80, 80, 0.15)",border:"1px solid rgba(200, 80, 80, 0.3)"},children:(0,Nm.jsx)(nk,{className:"w-6 h-6",style:{color:"#c08080"}})})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]}),(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-105 hover:-translate-y-1",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:i.netIncome>=0?"rgba(200, 200, 200, 0.1)":"rgba(200, 150, 80, 0.1)"}}),(0,Nm.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,Nm.jsxs)("div",{children:[(0,Nm.jsx)("p",{className:"text-sm font-accent mb-1",style:{color:i.netIncome>=0?"#b0b0b0":"#c0a080"},children:"\u0427\u0438\u0441\u0442\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c"}),(0,Nm.jsx)("p",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#c0c0c0"},children:a(i.netIncome)})]}),(0,Nm.jsx)("div",{className:"p-3 rounded-xl backdrop-blur-sm",style:{backgroundColor:i.netIncome>=0?"rgba(200, 200, 200, 0.15)":"rgba(200, 150, 80, 0.15)",border:i.netIncome>=0?"1px solid rgba(200, 200, 200, 0.3)":"1px solid rgba(200, 150, 80, 0.3)"},children:(0,Nm.jsx)($b,{className:"w-6 h-6",style:{color:i.netIncome>=0?"#b0b0b0":"#c0a080"}})})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})]}),(0,Nm.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-[1.02]",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(80, 200, 80, 0.08)"}}),(0,Nm.jsxs)("h3",{className:"relative text-lg font-heading mb-4 flex items-center drop-shadow-lg",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(nw,{className:"w-5 h-5 mr-2",style:{color:"#80c080"}}),"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0434\u0430\u0447"]}),(0,Nm.jsxs)("div",{className:"relative space-y-4",children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nm.jsx)("span",{className:"font-accent",style:{color:"#a0a0a0"},children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430\u0434\u0430\u0447"}),(0,Nm.jsxs)("span",{className:"font-semibold",style:{color:"#c0c0c0"},children:[i.completedTasks," \u0438\u0437 ",i.totalTasks]})]}),(0,Nm.jsx)("div",{className:"w-full rounded-full h-3 backdrop-blur-sm",style:{backgroundColor:"rgba(80, 80, 80, 0.3)"},children:(0,Nm.jsx)("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:"".concat(i.completionRate,"%"),background:"linear-gradient(to right, rgba(80, 200, 80, 0.6), rgba(100, 220, 100, 0.8))",boxShadow:"0 0 10px rgba(80, 200, 80, 0.3)"}})}),(0,Nm.jsxs)("div",{className:"text-center",children:[(0,Nm.jsxs)("span",{className:"text-2xl font-heading drop-shadow-lg",style:{color:"#80c080"},children:[i.completionRate.toFixed(1),"%"]}),(0,Nm.jsx)("p",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})]})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]}),(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-[1.02]",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsxs)("h3",{className:"relative text-lg font-heading mb-4 flex items-center drop-shadow-lg",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(rw,{className:"w-5 h-5 mr-2",style:{color:"#b0b0b0"}}),"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0437\u0430\u0434\u0430\u0447"]}),(0,Nm.jsx)("div",{className:"relative space-y-3",children:Object.entries(i.tasksByStatus).map(e=>{let[t,n]=e;return(0,Nm.jsxs)("div",{className:"flex items-center justify-between backdrop-blur-sm p-2 rounded-lg",style:{backgroundColor:"rgba(80, 80, 80, 0.1)"},children:[(0,Nm.jsx)("span",{className:"px-3 py-1 rounded text-sm font-medium ".concat({new:"bg-gray-800/30 text-gray-300 border border-gray-600/20",in_progress:"bg-gray-700/30 text-gray-300 border border-gray-500/20",completed:"bg-green-900/30 text-green-300 border border-green-500/20",review:"bg-yellow-900/30 text-yellow-300 border border-yellow-500/20",cancelled:"bg-red-900/30 text-red-300 border border-red-500/20",on_hold:"bg-orange-900/30 text-orange-300 border border-orange-500/20"}[t]),children:{new:"\u041d\u043e\u0432\u044b\u0435",in_progress:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",completed:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b",review:"\u041d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435",cancelled:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u044b",on_hold:"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}[t]||t}),(0,Nm.jsx)("span",{className:"font-semibold",style:{color:"#c0c0c0"},children:n})]},t)})}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})]}),(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-[1.02]",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsxs)("h3",{className:"relative text-lg font-heading mb-4 flex items-center drop-shadow-lg",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(Dm,{className:"w-5 h-5 mr-2",style:{color:"#b0b0b0"}}),"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"]}),(0,Nm.jsxs)("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Nm.jsxs)("div",{className:"text-center p-4 rounded-xl backdrop-blur-sm border border-green-500/20",style:{backgroundColor:"rgba(80, 200, 80, 0.1)"},children:[(0,Nm.jsx)("div",{className:"text-3xl font-heading drop-shadow-lg mb-2",style:{color:"#80c080"},children:i.completedProjects}),(0,Nm.jsx)("div",{className:"font-accent",style:{color:"#a0a0a0"},children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"})]}),(0,Nm.jsxs)("div",{className:"text-center p-4 rounded-xl backdrop-blur-sm border border-gray-500/20",style:{backgroundColor:"rgba(120, 120, 120, 0.1)"},children:[(0,Nm.jsx)("div",{className:"text-3xl font-heading drop-shadow-lg mb-2",style:{color:"#c0c0c0"},children:i.activeProjects}),(0,Nm.jsx)("div",{className:"font-accent",style:{color:"#a0a0a0"},children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"})]})]}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]}),i.currentMonthPayments.length>0&&(0,Nm.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl p-6 transition-all duration-500 hover:scale-[1.01]",style:{background:"linear-gradient(135deg, rgba(41, 45, 47, 0.9), rgba(35, 39, 41, 0.9))"},children:[(0,Nm.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl",style:{backgroundColor:"rgba(255, 255, 255, 0.02)"}}),(0,Nm.jsxs)("h3",{className:"relative text-lg font-heading mb-4 flex items-center drop-shadow-lg",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)($b,{className:"w-5 h-5 mr-2",style:{color:"#b0b0b0"}}),"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"]}),(0,Nm.jsx)("div",{className:"relative space-y-2",children:i.currentMonthPayments.slice(0,5).map(e=>(0,Nm.jsxs)("div",{className:"group/item flex items-center justify-between p-3 rounded-lg transition-all duration-300 hover:bg-white/5 backdrop-blur-sm",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",border:"1px solid rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,Nm.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0 shadow-lg ".concat("income"===e.type?"bg-green-400":"bg-red-400"),style:{boxShadow:"income"===e.type?"0 0 8px rgba(80, 200, 80, 0.5)":"0 0 8px rgba(200, 80, 80, 0.5)"}}),(0,Nm.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Nm.jsx)("span",{className:"font-accent break-words",style:{color:"#c0c0c0"},children:e.description}),(0,Nm.jsx)("div",{className:"text-xs",style:{color:"#909090"},children:e.paidDate?rx(new Date(e.paidDate),"dd MMM yyyy",{locale:px}):"\u0414\u0430\u0442\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2 ml-2",children:[(0,Nm.jsxs)("span",{className:"font-semibold whitespace-nowrap ".concat((e.type,"")),style:{color:"income"===e.type?"#80c080":"#c08080"},children:["income"===e.type?"+":"-",a(e.amount)]}),(0,Nm.jsx)("button",{onClick:()=>(async(e,n)=>{if(window.confirm('\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e "'.concat(n,'"?')))try{await t(e)}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430:",r)}})(e.id,e.description),className:"opacity-0 group-hover/item:opacity-100 p-1.5 rounded-lg transition-all duration-200 flex-shrink-0",style:{backgroundColor:"rgba(200, 80, 80, 0.1)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(200, 80, 80, 0.2)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(200, 80, 80, 0.1)",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e",children:(0,Nm.jsx)(_x,{className:"w-4 h-4",style:{color:"#c08080"}})})]})]},e.id))}),(0,Nm.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})]})},sk=f("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ik=()=>{const{tasks:e,updateTaskStatus:t,deleteTask:n}=Gb(),{projects:s,updateProject:i,deleteProject:a}=Qb(),{clients:o,updateClient:l,deleteClient:c}=Px(),{notes:u,updateNote:d,deleteNote:h}=Ix(),{payments:f,updatePayment:p,deletePayment:m}=Yb(),[g,v]=(0,r.useState)("tasks"),[b,w]=(0,r.useState)(""),[x,k]=(0,r.useState)("all"),[_,N]=(0,r.useState)(new Set),E=(0,r.useMemo)(()=>e.filter(e=>"completed"===e.status||"cancelled"===e.status),[e]),S=(0,r.useMemo)(()=>s.filter(e=>"completed"===e.status||"cancelled"===e.status),[s]),C=(0,r.useMemo)(()=>o.filter(e=>e.archived),[o]),I=(0,r.useMemo)(()=>u.filter(e=>e.archived),[u]),T=(0,r.useMemo)(()=>f.filter(e=>e.archived),[f]),j=(0,r.useMemo)(()=>{let e=E;return b&&(e=e.filter(e=>{var t;return e.title.toLowerCase().includes(b.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))})),"all"!==x&&(e=e.filter(e=>e.status===x)),e},[E,b,x]),D=(0,r.useMemo)(()=>{let e=S;return b&&(e=e.filter(e=>{var t;return e.name.toLowerCase().includes(b.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))})),"all"!==x&&(e=e.filter(e=>e.status===x)),e},[S,b,x]),A=(0,r.useMemo)(()=>{let e=C;return b&&(e=e.filter(e=>{var t,n;return e.name.toLowerCase().includes(b.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))||(null===(n=e.company)||void 0===n?void 0:n.toLowerCase().includes(b.toLowerCase()))})),e},[C,b]),P=(0,r.useMemo)(()=>{let e=I;return b&&(e=e.filter(e=>e.title.toLowerCase().includes(b.toLowerCase())||e.content.toLowerCase().includes(b.toLowerCase()))),"all"!==x&&(e=e.filter(e=>e.type===x)),e},[I,b,x]),O=(0,r.useMemo)(()=>{let e=T;return b&&(e=e.filter(e=>e.description.toLowerCase().includes(b.toLowerCase()))),"all"!==x&&(e=e.filter(e=>e.type===x)),e},[T,b,x]),R=e=>({completed:"bg-green-900/30 text-green-300 border-green-500/20",cancelled:"bg-red-900/30 text-red-300 border-red-500/20",on_hold:"bg-orange-900/30 text-orange-300 border-orange-500/20"}[e]||"bg-gray-900/30 text-gray-300 border-gray-500/20"),M=e=>({completed:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e",cancelled:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e",on_hold:"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"}[e]||e),L=e=>{N(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,Nm.jsxs)("div",{className:"space-y-6",children:[(0,Nm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nm.jsxs)("h2",{className:"text-2xl font-heading drop-shadow-lg flex items-center",style:{color:"#c0c0c0"},children:[(0,Nm.jsx)(Pm,{className:"w-6 h-6 mr-2",style:{color:"#b0b0b0"}}),"\u0410\u0440\u0445\u0438\u0432"]}),(0,Nm.jsxs)("div",{className:"text-sm font-accent",style:{color:"#a0a0a0"},children:[E.length," \u0437\u0430\u0434\u0430\u0447, ",S.length," \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432, ",C.length," \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, ",I.length," \u0437\u0430\u043c\u0435\u0442\u043e\u043a, ",T.length," \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439"]})]}),(0,Nm.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-1 p-1 rounded-lg backdrop-blur-sm",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",border:"1px solid rgba(120, 120, 120, 0.3)"},children:[{key:"tasks",label:"\u0417\u0430\u0434\u0430\u0447\u0438",count:E.length},{key:"projects",label:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",count:S.length},{key:"clients",label:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",count:C.length},{key:"notes",label:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438",count:I.length},{key:"payments",label:"\u041f\u043b\u0430\u0442\u0435\u0436\u0438",count:T.length}].map(e=>{let{key:t,label:n,count:r}=e;return(0,Nm.jsxs)("button",{onClick:()=>v(t),className:"px-2 py-2 rounded-md text-xs sm:text-sm font-accent transition-all duration-300 ".concat(g===t?"backdrop-blur-sm shadow-lg":"hover:bg-white/5"),style:{backgroundColor:g===t?"rgba(80, 80, 80, 0.4)":"transparent",color:g===t?"#d0d0d0":"#b0b0b0",border:g===t?"1px solid rgba(120, 120, 120, 0.3)":"none"},children:[(0,Nm.jsx)("div",{className:"hidden sm:block",children:n}),(0,Nm.jsx)("div",{className:"block sm:hidden",children:n.charAt(0)}),(0,Nm.jsxs)("div",{className:"text-xs",style:{color:g===t?"#c0c0c0":"#909090"},children:["(",r,")"]})]},t)})}),(0,Nm.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Nm.jsx)("div",{className:"flex-1",children:(0,Nm.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a \u0432 \u0430\u0440\u0445\u0438\u0432\u0435...",value:b,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 rounded-lg backdrop-blur-sm border transition-all duration-300 focus:ring-2 focus:ring-gray-500/50 focus:border-transparent",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"}})}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)(wx,{className:"w-4 h-4",style:{color:"#808080"}}),(0,Nm.jsxs)("select",{value:x,onChange:e=>k(e.target.value),className:"px-3 py-2 rounded-lg backdrop-blur-sm border transition-all duration-300 focus:ring-2 focus:ring-blue-500/50 focus:border-transparent",style:{backgroundColor:"rgba(80, 80, 80, 0.2)",borderColor:"rgba(120, 120, 120, 0.3)",color:"#c0c0c0"},children:[(0,Nm.jsx)("option",{value:"all",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"}),(0,Nm.jsx)("option",{value:"completed",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"}),(0,Nm.jsx)("option",{value:"cancelled",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e"}),(0,Nm.jsx)("option",{value:"on_hold",style:{backgroundColor:"#292d2f",color:"#c0c0c0"},children:"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"})]})]})]}),"tasks"===g&&(0,Nm.jsx)("div",{className:"space-y-2",children:0===j.length?(0,Nm.jsxs)("div",{className:"text-center py-12",children:[(0,Nm.jsx)(Pm,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:b||"all"!==x?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":"\u0410\u0440\u0445\u0438\u0432 \u043f\u0443\u0441\u0442"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:b||"all"!==x?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435 \u0438 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c"})]}):j.map(e=>{const r=_.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>L(e.id),children:[(0,Nm.jsx)("button",{className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:r?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)("h3",{className:"font-accent break-words flex-1 text-sm sm:text-base",style:{color:"#c0c0c0"},children:e.title})]}),r&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#909090"},children:"\u0421\u0442\u0430\u0442\u0443\u0441:"}),(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium backdrop-blur-sm ".concat(R(e.status)),children:M(e.status)})]}),e.description&&(0,Nm.jsx)("p",{className:"text-xs sm:text-sm break-words",style:{color:"#a0a0a0"},children:e.description}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-4 text-sm",style:{color:"#909090"},children:[(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"\u0421\u043e\u0437\u0434\u0430\u043d\u043e: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),e.completedAt&&(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(nw,{className:"w-4 h-4 mr-1"}),"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e: ",rx(new Date(e.completedAt),"dd MMM yyyy",{locale:px})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsxs)("button",{onClick:n=>{n.stopPropagation(),(async e=>{await t(e,"new")})(e.id)},className:"btn-sm flex items-center space-x-1",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",children:[(0,Nm.jsx)(sk,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u0434\u0430\u0447\u0443?")&&await n(e)})(e.id)},className:"btn-danger flex items-center space-x-1",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430",children:[(0,Nm.jsx)(_x,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})]})})]},e.id)})}),"projects"===g&&(0,Nm.jsx)("div",{className:"space-y-2",children:0===D.length?(0,Nm.jsxs)("div",{className:"text-center py-12",children:[(0,Nm.jsx)(Tm,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:b||"all"!==x?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":"\u0410\u0440\u0445\u0438\u0432 \u043f\u0443\u0441\u0442"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:b||"all"!==x?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435 \u0438 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c"})]}):D.map(e=>{const t=_.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>L(e.id),children:[(0,Nm.jsx)("button",{className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:t?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)(Tm,{className:"w-4 h-4 flex-shrink-0",style:{color:"#b0b0b0"}}),(0,Nm.jsx)("h3",{className:"font-accent break-words flex-1 text-sm sm:text-base",style:{color:"#c0c0c0"},children:e.name})]}),t&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#909090"},children:"\u0421\u0442\u0430\u0442\u0443\u0441:"}),(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium backdrop-blur-sm ".concat(R(e.status)),children:M(e.status)})]}),e.description&&(0,Nm.jsx)("p",{className:"text-xs sm:text-sm break-words",style:{color:"#a0a0a0"},children:e.description}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-4 text-sm",style:{color:"#909090"},children:[(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"\u0421\u043e\u0437\u0434\u0430\u043d: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),e.completedAt&&(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(nw,{className:"w-4 h-4 mr-1"}),"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d: ",rx(new Date(e.completedAt),"dd MMM yyyy",{locale:px})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{await i(e,{status:"active"})})(e.id)},className:"btn-sm flex items-center space-x-1",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",children:[(0,Nm.jsx)(sk,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442?")&&await a(e)})(e.id)},className:"btn-danger flex items-center space-x-1",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430",children:[(0,Nm.jsx)(_x,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})]})})]},e.id)})}),"clients"===g&&(0,Nm.jsx)("div",{className:"space-y-2",children:0===A.length?(0,Nm.jsxs)("div",{className:"text-center py-12",children:[(0,Nm.jsx)(y,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:b?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":"\u0410\u0440\u0445\u0438\u0432 \u043f\u0443\u0441\u0442"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:b?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430":"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c"})]}):A.map(e=>{const t=_.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>L(e.id),children:[(0,Nm.jsx)("button",{className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:t?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)(y,{className:"w-4 h-4 flex-shrink-0",style:{color:"#b0b0b0"}}),(0,Nm.jsx)("h3",{className:"font-accent break-words flex-1 text-sm sm:text-base",style:{color:"#c0c0c0"},children:e.name})]}),t&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[e.email&&(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#909090"},children:"Email:"}),(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#a0a0a0"},children:e.email})]}),e.company&&(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#909090"},children:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f:"}),(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#a0a0a0"},children:e.company})]}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-4 text-sm",style:{color:"#909090"},children:[(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"\u0421\u043e\u0437\u0434\u0430\u043d: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),e.archivedAt&&(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Pm,{className:"w-4 h-4 mr-1"}),"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d: ",rx(new Date(e.archivedAt),"dd MMM yyyy",{locale:px})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{await l(e,{archived:!1,archivedAt:void 0})})(e.id)},className:"btn-sm flex items-center space-x-1",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",children:[(0,Nm.jsx)(sk,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430?")&&await c(e)})(e.id)},className:"btn-danger flex items-center space-x-1",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430",children:[(0,Nm.jsx)(_x,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})]})})]},e.id)})}),"notes"===g&&(0,Nm.jsx)("div",{className:"space-y-2",children:0===P.length?(0,Nm.jsxs)("div",{className:"text-center py-12",children:[(0,Nm.jsx)(Pm,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:b||"all"!==x?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":"\u0410\u0440\u0445\u0438\u0432 \u043f\u0443\u0441\u0442"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:b||"all"!==x?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430":"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c"})]}):P.map(e=>{const t=_.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>L(e.id),children:[(0,Nm.jsx)("button",{className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:t?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:e.color||"#808080"}}),(0,Nm.jsx)("h3",{className:"font-accent break-words flex-1 text-sm sm:text-base",style:{color:"#c0c0c0"},children:e.title})]}),t&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#909090"},children:"\u0422\u0438\u043f:"}),(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#a0a0a0"},children:e.type})]}),(0,Nm.jsx)("p",{className:"text-xs sm:text-sm break-words",style:{color:"#a0a0a0"},children:e.content}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-4 text-sm",style:{color:"#909090"},children:[(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"\u0421\u043e\u0437\u0434\u0430\u043d\u0430: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),e.archivedAt&&(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Pm,{className:"w-4 h-4 mr-1"}),"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0430: ",rx(new Date(e.archivedAt),"dd MMM yyyy",{locale:px})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{await d(e,{archived:!1,archivedAt:void 0})})(e.id)},className:"btn-sm flex items-center space-x-1",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",children:[(0,Nm.jsx)(sk,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043c\u0435\u0442\u043a\u0443?")&&await h(e)})(e.id)},className:"btn-danger flex items-center space-x-1",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430",children:[(0,Nm.jsx)(_x,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})]})})]},e.id)})}),"payments"===g&&(0,Nm.jsx)("div",{className:"space-y-2",children:0===O.length?(0,Nm.jsxs)("div",{className:"text-center py-12",children:[(0,Nm.jsx)(Pm,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#606060"}}),(0,Nm.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"#c0c0c0"},children:b||"all"!==x?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":"\u0410\u0440\u0445\u0438\u0432 \u043f\u0443\u0441\u0442"}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:b||"all"!==x?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430":"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0438 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c"})]}):O.map(e=>{const t=_.has(e.id);return(0,Nm.jsxs)("div",{className:"backdrop-blur-sm border rounded-lg transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:"rgba(80, 80, 80, 0.1)",borderColor:"rgba(120, 120, 120, 0.2)"},children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>L(e.id),children:[(0,Nm.jsx)("button",{className:"p-1 hover:bg-white/10 rounded transition-colors flex-shrink-0",children:t?(0,Nm.jsx)(iw,{className:"w-4 h-4",style:{color:"#b0b0b0"}}):(0,Nm.jsx)(aw,{className:"w-4 h-4",style:{color:"#b0b0b0"}})}),(0,Nm.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0 ".concat("income"===e.type?"bg-green-500":"bg-red-500")}),(0,Nm.jsx)("h3",{className:"font-accent break-words flex-1 text-sm sm:text-base",style:{color:"#c0c0c0"},children:e.description}),(0,Nm.jsxs)("span",{className:"text-sm font-medium",style:{color:"income"===e.type?"#80c080":"#c08080"},children:["income"===e.type?"+":"-",e.amount.toLocaleString()," \u20bd"]})]}),t&&(0,Nm.jsx)("div",{className:"px-3 pb-3 border-t",style:{borderColor:"rgba(120, 120, 120, 0.1)"},children:(0,Nm.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsx)("span",{className:"text-sm",style:{color:"#909090"},children:"\u0422\u0438\u043f:"}),(0,Nm.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("income"===e.type?"bg-green-900/30 text-green-300":"bg-red-900/30 text-red-300"),children:"income"===e.type?"\u0414\u043e\u0445\u043e\u0434":"\u0420\u0430\u0441\u0445\u043e\u0434"})]}),(0,Nm.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,Nm.jsxs)("div",{className:"flex items-center space-x-4 text-sm",style:{color:"#909090"},children:[(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"\u0421\u043e\u0437\u0434\u0430\u043d: ",rx(new Date(e.createdAt),"dd MMM yyyy",{locale:px})]}),e.archivedAt&&(0,Nm.jsxs)("div",{className:"flex items-center",children:[(0,Nm.jsx)(Pm,{className:"w-4 h-4 mr-1"}),"\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d: ",rx(new Date(e.archivedAt),"dd MMM yyyy",{locale:px})]})]}),(0,Nm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{await p(e,{archived:!1,archivedAt:void 0})})(e.id)},className:"btn-sm flex items-center space-x-1",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",children:[(0,Nm.jsx)(sk,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),(0,Nm.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u043b\u0430\u0442\u0435\u0436?")&&await m(e)})(e.id)},className:"btn-danger flex items-center space-x-1",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430",children:[(0,Nm.jsx)(_x,{className:"w-4 h-4"}),(0,Nm.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})]})})]},e.id)})})]})},ak=(0,r.createContext)({mode:"local",setMode:()=>{},userId:null}),ok=e=>{let{children:t}=e;const{user:n}=_m(),[s,i]=(0,r.useState)("local");return(0,r.useEffect)(()=>{i(n?"cloud":"local")},[n]),(0,Nm.jsx)(ak.Provider,{value:{mode:s,setMode:i,userId:(null===n||void 0===n?void 0:n.uid)||null},children:t})};function lk(){const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)("dashboard"),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[x,k]=(0,r.useState)(null),[_,N]=(0,r.useState)(!1),[E,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{await(async()=>{try{if(0===await Ub.tasks.count()){const e="client-1";await Ub.clients.add({id:e,name:'\u041e\u041e\u041e "\u041f\u0440\u0438\u043c\u0435\u0440"',email:"info@example.com",company:'\u041e\u041e\u041e "\u041f\u0440\u0438\u043c\u0435\u0440"',notes:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442",createdAt:new Date,updatedAt:new Date,projects:[]});const t="project-1";await Ub.projects.add({id:t,name:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0441\u0430\u0439\u0442\u0430",description:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430",clientId:e,status:"active",startDate:new Date,endDate:new Date(Date.now()+2592e6),budget:15e4,color:"#3B82F6",createdAt:new Date,updatedAt:new Date,tags:["\u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430","\u0434\u0438\u0437\u0430\u0439\u043d"],tasks:[]}),await Ub.tasks.bulkAdd([{id:"task-1",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u043a\u0435\u0442 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",description:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0434\u0438\u0437\u0430\u0439\u043d \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0441\u0430\u0439\u0442\u0430",status:"in_progress",priority:"high",projectId:t,clientId:e,dueDate:new Date(Date.now()+2592e5),createdAt:new Date,updatedAt:new Date,tags:["\u0434\u0438\u0437\u0430\u0439\u043d","\u043c\u0430\u043a\u0435\u0442"],color:"#EF4444",checklist:[{id:"check-1",text:"\u0418\u0437\u0443\u0447\u0438\u0442\u044c \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f",completed:!0,createdAt:new Date},{id:"check-2",text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c wireframe",completed:!1,createdAt:new Date},{id:"check-3",text:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0434\u0438\u0437\u0430\u0439\u043d",completed:!1,createdAt:new Date}],comments:[],estimatedHours:8},{id:"task-2",title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440",description:"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443",status:"new",priority:"medium",projectId:t,clientId:e,dueDate:new Date(Date.now()+6048e5),createdAt:new Date,updatedAt:new Date,tags:["\u0441\u0435\u0440\u0432\u0435\u0440","\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430"],color:"#10B981",checklist:[],comments:[],estimatedHours:4}]),await Ub.projects.update(t,{tasks:["task-1","task-2"],updatedAt:new Date}),await Ub.clients.update(e,{projects:[t],updatedAt:new Date}),await Ub.notes.add({id:"note-1",title:"\u0418\u0434\u0435\u0438 \u0434\u043b\u044f \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f UX",content:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c\u0438, \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e",type:"idea",tags:["ux","\u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438"],createdAt:new Date,updatedAt:new Date,projectId:t}),await Ub.payments.add({id:"payment-1",amount:5e4,description:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430 \u0437\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u0430\u0439\u0442\u0430",type:"income",projectId:t,clientId:e,dueDate:new Date,paidDate:new Date,status:"paid",createdAt:new Date,updatedAt:new Date,category:"\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430",tags:["\u043f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430"]})}}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445:",e)}})(),a(!1)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f:",e),a(!1)}})()},[]);const C=e=>{"add-task"===e?(u(null),l(!0)):"add-project"===e?(p(null),h(!0)):"add-client"===e?(v(null),g(!0)):"add-payment"===e?(k(null),w(!0)):"add-note"===e?(S(null),N(!0)):s("view-calendar"===e?"calendar":"upload-file"===e?"files":"view-tasks"===e?"tasks":e)},I=e=>{u(e),l(!0)},T=e=>{p(e),h(!0)},j=e=>{v(e),g(!0)},D=e=>{S(e),N(!0)};return i?(0,Nm.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, #1a1d1f, #292d2f, #1f2224)"},children:(0,Nm.jsxs)("div",{className:"text-center",children:[(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 mx-auto mb-4",style:{borderColor:"#c0c0c0"}}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f..."})]})}):(0,Nm.jsxs)("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, #1a1d1f, #292d2f, #1f2224)"},children:[(0,Nm.jsxs)("div",{className:"flex",children:[(0,Nm.jsx)(Lm,{isOpen:e,onClose:()=>t(!1),currentPage:n,onNavigate:C}),(0,Nm.jsxs)("div",{className:"flex-1 lg:ml-0",children:[(0,Nm.jsx)(Em,{onMenuClick:()=>t(!0),title:{dashboard:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f","add-task":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443","add-project":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",tasks:"\u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438",projects:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",clients:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",calendar:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",notes:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438",archive:"\u0410\u0440\u0445\u0438\u0432",files:"\u0424\u0430\u0439\u043b\u044b",analytics:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430",settings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}[n]||"TaskManager Pro"}),(0,Nm.jsx)("main",{className:"p-6",style:{backgroundColor:"transparent"},children:(()=>{switch(n){case"dashboard":default:return(0,Nm.jsx)(gx,{onNavigate:C});case"add-task":return(0,Nm.jsx)("div",{className:"p-6",children:"\u0424\u043e\u0440\u043c\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438 (\u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435)"});case"add-project":return(0,Nm.jsx)("div",{className:"p-6",children:"\u0424\u043e\u0440\u043c\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 (\u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435)"});case"tasks":return(0,Nm.jsx)(Nx,{onAddTask:()=>C("add-task"),onEditTask:I});case"projects":return(0,Nm.jsx)(Cx,{onAddProject:()=>C("add-project"),onEditProject:T});case"clients":return(0,Nm.jsx)(Rx,{onAddClient:()=>C("add-client"),onEditClient:j});case"calendar":return(0,Nm.jsx)(Hx,{});case"notes":return(0,Nm.jsx)(Tx,{onAddNote:()=>C("add-note"),onEditNote:D});case"archive":return(0,Nm.jsx)(ik,{});case"files":return(0,Nm.jsx)(Yx,{});case"analytics":return(0,Nm.jsx)(rk,{});case"settings":return(0,Nm.jsx)(Jx,{})}})()})]})]}),(0,Nm.jsx)(bx,{isOpen:o,onClose:()=>{l(!1),u(null)},task:c}),(0,Nm.jsx)(Ex,{isOpen:d,onClose:()=>{h(!1),p(null)},project:f}),(0,Nm.jsx)(Ox,{isOpen:m,onClose:()=>{g(!1),v(null)},client:y}),(0,Nm.jsx)(Mx,{isOpen:b,onClose:()=>{w(!1),k(null)},payment:x}),(0,Nm.jsx)(Ux,{isOpen:_,onClose:()=>{N(!1),S(null)},note:E})]})}const ck=function(){const{user:e,loading:t}=_m();return t?(0,Nm.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, #1a1d1f, #292d2f, #1f2224)"},children:(0,Nm.jsxs)("div",{className:"text-center",children:[(0,Nm.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 mx-auto mb-4",style:{borderColor:"#c0c0c0"}}),(0,Nm.jsx)("p",{style:{color:"#a0a0a0"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})}):e?(0,Nm.jsx)(ok,{children:(0,Nm.jsx)(lk,{})}):(0,Nm.jsx)(tk,{})};s.createRoot(document.getElementById("root")).render((0,Nm.jsx)(r.StrictMode,{children:(0,Nm.jsx)(ck,{})}))})();
//# sourceMappingURL=main.b921476a.js.map